<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <title>나의 일주일 묵상 즐기기</title>
  
  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      overflow: auto;
      min-height: 100vh;
      width: 100vw;
    }
    #root {
      min-height: 100vh;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback, useMemo } = React;
    

// Lucide 아이콘 컴포넌트들
const ChevronLeft = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <path d="m15 18-6-6 6-6"/>
  </svg>
);

const ChevronRight = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <path d="m9 18 6-6-6-6"/>
  </svg>
);

const Calendar = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/>
  </svg>
);

const Copy = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
  </svg>
);

const Check = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <polyline points="20 6 9 17 4 12"/>
  </svg>
);

const Plus = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <line x1="12" x2="12" y1="5" y2="19"/><line x1="5" x2="19" y1="12" y2="12"/>
  </svg>
);

const Minus = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <line x1="5" x2="19" y1="12" y2="12"/>
  </svg>
);

const X = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <line x1="18" x2="6" y1="6" y2="18"/><line x1="6" x2="18" y1="6" y2="18"/>
  </svg>
);

const Settings = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/>
  </svg>
);

const Book = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
  </svg>
);

const Search = ({ size = 24, className = "" }) => (
  <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/>
  </svg>
);


    

// 버전 정보
const APP_VERSION = "나의 일주일 묵상 즐기기 v16";

// 전체화면 메타 태그 설정 (PWA 스타일)
if (typeof document !== 'undefined') {
  // viewport 메타 태그
  let viewport = document.querySelector('meta[name="viewport"]');
  if (!viewport) {
    viewport = document.createElement('meta');
    viewport.name = 'viewport';
    document.head.appendChild(viewport);
  }
  viewport.content = 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover';
  
  // iOS 전체화면
  let appleFullscreen = document.querySelector('meta[name="apple-mobile-web-app-capable"]');
  if (!appleFullscreen) {
    appleFullscreen = document.createElement('meta');
    appleFullscreen.name = 'apple-mobile-web-app-capable';
    document.head.appendChild(appleFullscreen);
  }
  appleFullscreen.content = 'yes';
  
  // iOS 상태바 스타일
  let appleStatusBar = document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');
  if (!appleStatusBar) {
    appleStatusBar = document.createElement('meta');
    appleStatusBar.name = 'apple-mobile-web-app-status-bar-style';
    document.head.appendChild(appleStatusBar);
  }
  appleStatusBar.content = 'black-translucent';
  
  // Android 전체화면
  let mobileOptimized = document.querySelector('meta[name="mobile-web-app-capable"]');
  if (!mobileOptimized) {
    mobileOptimized = document.createElement('meta');
    mobileOptimized.name = 'mobile-web-app-capable';
    document.head.appendChild(mobileOptimized);
  }
  mobileOptimized.content = 'yes';
  
  // body 스타일 - 전체화면 (스크롤 허용)
  document.body.style.margin = '0';
  document.body.style.padding = '0';
  document.body.style.overflow = 'auto';
  document.body.style.minHeight = '100vh';
  document.body.style.width = '100vw';
}

const WeeklyScriptureApp = () => {
  // 오늘 날짜 기준으로 초기화 (한국 시간 기준)
  const getTodayInfo = () => {
    // 한국 시간으로 현재 날짜 가져오기
    const now = new Date();
    const koreaTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Seoul' }));
    return {
      year: koreaTime.getFullYear(),
      month: koreaTime.getMonth() + 1,
      day: koreaTime.getDate()
    };
  };
  
  const [todayInfo, setTodayInfo] = useState(getTodayInfo());
  
  // 현재 선택된 년월 (오늘 날짜 기준)
  const [currentYear, setCurrentYear] = useState(todayInfo.year);
  const [currentMonth, setCurrentMonth] = useState(todayInfo.month);

  // 커스텀 성경구절 데이터 (저장소에서 로드)
  const [customScriptures, setCustomScriptures] = useState({});
  
  // 주간 성경구절 데이터
  const [weeklyScriptures, setWeeklyScriptures] = useState({});

  // 기본 월별 성경구절 데이터
  const defaultScripturesByMonth = {
    "2026-3": [
      { date: "3월 1일", day: "주일", reference: "아가서 2:11-12", verse: "겨울도 지나고 비도 그쳤고 지면에는 꽃이 피고 새가 노래할 때가 이르렀는데 비둘기의 소리가 우리 땅에 들리는구나", theme: "봄의 시작" },
      { date: "3월 2일", day: "월요일", reference: "시편 4:8", verse: "내가 평안히 눕고 자기도 하리니 나를 안전히 살게 하시는 이는 오직 여호와이시니라" },
      { date: "3월 3일", day: "화요일", reference: "잠언 27:1", verse: "너는 내일 일을 자랑하지 말라 하루 동안에 무슨 일이 일어날는지 네가 알 수 없음이니라" },
      { date: "3월 4일", day: "수요일", reference: "요한일서 5:14", verse: "그를 향하여 우리가 가진 바 담대함이 이것이니 그의 뜻대로 무엇을 구하면 들으심이라" },
      { date: "3월 5일", day: "목요일", reference: "마태복음 6:14", verse: "너희가 사람의 잘못을 용서하면 너희 하늘 아버지께서도 너희 잘못을 용서하시려니와" },
      { date: "3월 6일", day: "금요일", reference: "이사야 58:11", verse: "여호와가 너를 항상 인도하여 메마른 곳에서도 네 영혼을 만족하게 하며 네 뼈를 견고하게 하리니 너는 물 댄 동산 같겠고 물이 끊어지지 아니하는 샘 같을 것이라" },
      { date: "3월 7일", day: "토요일", reference: "빌립보서 2:3", verse: "아무 일에든지 다툼이나 허영으로 하지 말고 오직 겸손한 마음으로 각각 자기보다 남을 낫게 여기고" },
      { date: "3월 8일", day: "주일", reference: "요한복음 7:37-38", verse: "누구든지 목마르거든 내게로 와서 마시라 나를 믿는 자는 성경에 이름과 같이 그 배에서 생수의 강이 흘러나오리라 하시니", theme: "메마름을 적시는 생명" },
      { date: "3월 9일", day: "월요일", reference: "시편 100:5", verse: "여호와는 선하시니 그의 인자하심이 영원하고 그의 성실하심이 대대에 이르리로다" },
      { date: "3월 10일", day: "화요일", reference: "골로새서 3:12", verse: "그러므로 너희는 하나님이 택하사 거룩하고 사랑받는 자처럼 긍휼과 자비와 겸손과 온유와 오래 참음을 옷 입고" },
      { date: "3월 11일", day: "수요일", reference: "누가복음 6:37", verse: "비판하지 말라 그리하면 너희가 비판을 받지 않을 것이요 정죄하지 말라 그리하면 너희가 정죄를 받지 않을 것이요 용서하라 그리하면 너희가 용서를 받을 것이요" },
      { date: "3월 12일", day: "목요일", reference: "에베소서 4:32", verse: "서로 친절하게 하며 불쌍히 여기며 서로 용서하기를 하나님이 그리스도 안에서 너희를 용서하심과 같이 하라" },
      { date: "3월 13일", day: "금요일", reference: "디모데후서 3:16-17", verse: "모든 성경은 하나님의 감동으로 된 것으로 교훈과 책망과 바르게 함과 의로 교육하기에 유익하니 이는 하나님의 사람으로 온전하게 하며 모든 선한 일을 행할 능력을 갖추게 하려 함이라" },
      { date: "3월 14일", day: "토요일", reference: "베드로전서 1:22", verse: "너희가 진리를 순종함으로 너희 영혼을 깨끗하게 하여 거짓이 없이 형제를 사랑하기에 이르렀으니 뜨겁게 서로 사랑하라" },
      { date: "3월 15일", day: "주일", reference: "고린도후서 5:17", verse: "그런즉 누구든지 그리스도 안에 있으면 새로운 피조물이라 이전 것은 지나갔으니 보라 새 것이 되었도다", theme: "새로운 피조물" },
      { date: "3월 16일", day: "월요일", reference: "시편 33:4", verse: "여호와의 말씀은 정직하며 그가 행하시는 일은 다 진실하시도다" },
      { date: "3월 17일", day: "화요일", reference: "로마서 14:12", verse: "이러므로 우리 각 사람이 자기 일을 하나님께 직고하리라" },
      { date: "3월 18일", day: "수요일", reference: "호세아 6:3", verse: "그러므로 우리가 여호와를 알자 힘써 여호와를 알자 그의 나타나심은 새벽 빛 같이 어김없나니 비와 같이, 땅을 적시는 늦은 비와 같이 우리에게 임하시리라" },
      { date: "3월 19일", day: "목요일", reference: "요한복음 14:27", verse: "평안을 너희에게 끼치노니 곧 나의 평안을 너희에게 주노라 내가 너희에게 주는 것은 세상이 주는 것과 같지 아니하니라 너희는 마음에 근심하지도 말고 두려워하지도 말라" },
      { date: "3월 20일", day: "금요일", reference: "역대상 28:9", verse: "내 아들 솔로몬아 너는 네 아버지의 하나님을 알고 온전한 마음과 기쁜 뜻으로 섬길지어다" },
      { date: "3월 21일", day: "토요일", reference: "골로새서 3:23-24", verse: "무슨 일을 하든지 마음을 다하여 주께 하듯 하고 사람에게 하듯 하지 말라 이는 기업의 상을 주께 받을 줄 아나니 너희는 주 그리스도를 섬기느니라" },
      { date: "3월 22일", day: "주일", reference: "로마서 15:13", verse: "소망의 하나님이 모든 기쁨과 평강을 믿음 안에서 너희에게 충만하게 하사 성령의 능력으로 소망이 넘치게 하시기를 원하노라", theme: "소망" },
      { date: "3월 23일", day: "월요일", reference: "시편 145:18", verse: "여호와께서는 자기에게 간구하는 모든 자 곧 진실하게 간구하는 모든 자에게 가까이 하시는도다" },
      { date: "3월 24일", day: "화요일", reference: "잠언 16:3", verse: "모든 일에 여호와께 맡기라 그리하면 네가 원하는 것이 이루어지리라" },
      { date: "3월 25일", day: "수요일", reference: "이사야 1:18", verse: "여호와께서 말씀하시되 오라 우리가 서로 변론하자 너희의 죄가 주홍 같을지라도 눈과 같이 희어질 것이요 진홍 같이 붉을지라도 양털 같이 희게 되리라" },
      { date: "3월 26일", day: "목요일", reference: "시편 121:7", verse: "여호와께서 너를 지켜 모든 환난을 면하게 하시며 또 네 영혼을 지키시리로다" },
      { date: "3월 27일", day: "금요일", reference: "로마서 1:17", verse: "복음에는 하나님의 의가 나타나서 믿음으로 믿음에 이르게 하나니 기록된 바 오직 의인은 믿음으로 말미암아 살리라 함과 같으니라" },
      { date: "3월 28일", day: "토요일", reference: "야고보서 1:22", verse: "너희는 말씀을 행하는 자가 되고 듣기만 하여 자신을 속이는 자가 되지 말라" },
      { date: "3월 29일", day: "주일", reference: "요한복음 11:25", verse: "예수께서 이르시되 나는 부활이요 생명이니 나를 믿는 자는 죽어도 살겠고", theme: "부활" },
      { date: "3월 30일", day: "월요일", reference: "시편 33:12", verse: "여호와를 자기 하나님으로 삼은 나라 곧 하나님의 기업으로 선택된 백성은 복이 있도다" },
      { date: "3월 31일", day: "화요일", reference: "빌립보서 4:6", verse: "아무 것도 염려하지 말고 다만 모든 일에 기도와 간구로, 너희 구할 것을 감사함으로 하나님께 아뢰라" }
    ],
    "2026-4": [
      { date: "4월 1일", day: "수요일", reference: "이사야 43:18-19", verse: "너희는 이전 일을 기억하지 말며 옛날 일을 생각하지 말라 보라 내가 새 일을 행하리니 이제 나타낼 것이라 너희가 그것을 알지 못하겠느냐 반드시 내가 광야에 길을 사막에 강을 내리니" },
      { date: "4월 2일", day: "목요일", reference: "고린도전서 13:13", verse: "그런즉 믿음, 소망, 사랑, 이 세 가지는 항상 있을 것인데 그 중의 제일은 사랑이라" },
      { date: "4월 3일", day: "금요일", reference: "시편 23:2", verse: "그가 나를 푸른 풀밭에 누이시며 쉴 만한 물 가로 인도하시는도다" },
      { date: "4월 4일", day: "토요일", reference: "마태복음 6:28-29", verse: "또 너희가 어찌 의복 때문에 염려하느냐 들의 백합화가 어떻게 자라는가 생각하여 보라 수고도 아니하고 길쌈도 아니하느니라 그러나 내가 너희에게 말하노니 솔로몬의 모든 영광으로도 입은 것이 이 꽃 하나만 같지 못하였느니라" },
      { date: "4월 5일", day: "주일", reference: "이사야 40:8", verse: "풀은 마르고 꽃은 시드나 우리 하나님의 말씀은 영원히 서리라 하라", theme: "영원한 말씀" },
      { date: "4월 6일", day: "월요일", reference: "시편 100:5", verse: "여호와는 선하시니 그의 인자하심이 영원하고 그의 성실하심이 대대에 이르리로다" },
      { date: "4월 7일", day: "화요일", reference: "골로새서 3:16", verse: "그리스도의 말씀이 너희 속에 풍성히 거하여 모든 지혜로 피차 가르치며 권면하고 시와 찬송과 신령한 노래를 부르며 감사하는 마음으로 하나님을 찬양하고" },
      { date: "4월 8일", day: "수요일", reference: "에베소서 4:32", verse: "서로 친절하게 하며 불쌍히 여기며 서로 용서하기를 하나님이 그리스도 안에서 너희를 용서하심과 같이 하라" },
      { date: "4월 9일", day: "목요일", reference: "요한복음 10:10", verse: "도둑이 오는 것은 도둑질하고 죽이고 멸망시키려는 것뿐이요 내가 온 것은 양으로 생명을 얻게 하고 더 풍성히 얻게 하려는 것이라" },
      { date: "4월 10일", day: "금요일", reference: "디모데후서 3:16", verse: "모든 성경은 하나님의 감동으로 된 것으로 교훈과 책망과 바르게 함과 의로 교육하기에 유익하니" },
      { date: "4월 11일", day: "토요일", reference: "요한복음 11:25-26", verse: "예수께서 이르시되 나는 부활이요 생명이니 나를 믿는 자는 죽어도 살겠고 무릇 살아서 나를 믿는 자는 영원히 죽지 아니하리니 이것을 네가 믿느냐" },
      { date: "4월 12일", day: "주일", reference: "로마서 6:4", verse: "그러므로 우리가 그의 죽으심과 합하여 세례를 받음으로 그와 함께 장사되었나니 이는 아버지의 영광으로 말미암아 그리스도를 죽은 자 가운데서 살리심과 같이 우리로 또한 새 생명 가운데서 행하게 하려 함이라", theme: "새로운 삶" },
      { date: "4월 13일", day: "월요일", reference: "시편 121:7-8", verse: "여호와께서 너를 지켜 모든 환난을 면하게 하시며 또 네 영혼을 지키시리로다 여호와께서 너의 출입을 지금부터 영원까지 지키시리로다" },
      { date: "4월 14일", day: "화요일", reference: "빌립보서 4:8", verse: "끝으로 형제들아 무엇에든지 참되며 무엇에든지 경건하며 무엇에든지 옳으며 무엇에든지 정결하며 무엇에든지 사랑 받을 만하며 무엇에든지 칭찬 받을 만하며 무슨 덕이 있든지 무슨 기림이 있든지 이것들을 생각하라" },
      { date: "4월 15일", day: "수요일", reference: "잠언 3:5-6", verse: "너는 마음을 다하여 여호와를 신뢰하고 네 명철을 의지하지 말라 너는 범사에 그를 인정하라 그리하면 네 길을 지도하시리라" },
      { date: "4월 16일", day: "목요일", reference: "고린도전서 1:9", verse: "너희를 불러 그의 아들 예수 그리스도 우리 주와 더불어 교제하게 하시는 하나님은 미쁘시도다" },
      { date: "4월 17일", day: "금요일", reference: "신명기 30:19", verse: "내가 생명과 사망과 복과 저주를 네 앞에 두었은즉 너와 네 자손이 살기 위하여 생명을 택하고" },
      { date: "4월 18일", day: "토요일", reference: "마태복음 5:16", verse: "이같이 너희 빛이 사람 앞에 비치게 하여 그들로 너희 착한 행실을 보고 하늘에 계신 너희 아버지께 영광을 돌리게 하라" },
      { date: "4월 19일", day: "주일", reference: "시편 32:8", verse: "내가 네 갈 길을 가르쳐 보이고 너를 주목하여 훈계하리로다", theme: "인도하심" },
      { date: "4월 20일", day: "월요일", reference: "시편 27:10", verse: "내 부모는 나를 버렸으나 여호와는 나를 영접하시리이다" },
      { date: "4월 21일", day: "화요일", reference: "로마서 12:10", verse: "형제를 사랑하여 서로 우애하고 존경하기를 서로 먼저 하며" },
      { date: "4월 22일", day: "수요일", reference: "요한일서 1:9", verse: "만일 우리가 우리 죄를 자백하면 그는 미쁘시고 의로우사 우리 죄를 사하시며 우리를 모든 불의에서 깨끗하게 하실 것이요" },
      { date: "4월 23일", day: "목요일", reference: "빌립보서 4:6", verse: "아무 것도 염려하지 말고 다만 모든 일에 기도와 간구로, 너희 구할 것을 감사함으로 하나님께 아뢰라" },
      { date: "4월 24일", day: "금요일", reference: "여호수아 1:9", verse: "내가 네게 명령한 것이 아니냐 강하고 담대하라 두려워하지 말며 놀라지 말라 네가 어디로 가든지 네 하나님 여호와가 너와 함께 하느니라 하시니라" },
      { date: "4월 25일", day: "토요일", reference: "베드로전서 5:7", verse: "너희 염려를 다 주께 맡기라 이는 그가 너희를 돌보심이라" },
      { date: "4월 26일", day: "주일", reference: "요한일서 4:8", verse: "사랑하지 아니하는 자는 하나님을 알지 못하나니 이는 하나님은 사랑이심이라", theme: "사랑" },
      { date: "4월 27일", day: "월요일", reference: "시편 145:9", verse: "여호와께서는 모든 것을 선대하시며 그 지으신 모든 것에 긍휼을 베푸시는도다" },
      { date: "4월 28일", day: "화요일", reference: "잠언 16:3", verse: "모든 일에 여호와께 맡기라 그리하면 네가 원하는 것이 이루어지리라" },
      { date: "4월 29일", day: "수요일", reference: "이사야 55:7", verse: "악인은 그 길을, 불의한 자는 그 생각을 버리고 여호와께로 돌아오라 그리하면 그가 긍휼히 여기시리라 우리 하나님께로 돌아오라 그가 너그럽게 용서하시리라" },
      { date: "4월 30일", day: "목요일", reference: "고린도후서 12:9", verse: "나에게 이르시기를 내 은혜가 네게 족하도다 이는 내 능력이 약한 데서 온전하여짐이라 하신지라 그러므로 도리어 크게 기뻐함으로 나의 여러 약한 것들에 대하여 자랑하리니 이는 그리스도의 능력이 내게 머물게 하려 함이라" }
    ],
    "2026-5": [
      { date: "5월 1일", day: "금요일", reference: "신명기 6:6-7", verse: "오늘 내가 네게 명하는 이 말씀을 너는 마음에 새기고 네 자녀에게 부지런히 가르치며 집에 앉았을 때에든지 길을 갈 때에든지 누워 있을 때에든지 일어날 때에든지 이 말씀을 강론할 것이며" },
      { date: "5월 2일", day: "토요일", reference: "요한복음 15:12", verse: "내 계명은 곧 내가 너희를 사랑한 것 같이 너희도 서로 사랑하라 하는 이것이니라" },
      { date: "5월 3일", day: "주일", reference: "잠언 24:3-4", verse: "집은 지혜로 말미암아 건축되고 명철로 말미암아 견고하게 되며 방들은 지식으로 말미암아 각종 귀하고 아름다운 보배로 채우게 되느니라", theme: "복의 근원" },
      { date: "5월 4일", day: "월요일", reference: "시편 148:1-2", verse: "할렐루야 하늘에서 여호와를 찬양하며 높은 데서 그를 찬양할지어다 그의 모든 천사여 찬양하며 그의 모든 군대여 찬양할지어다" },
      { date: "5월 5일", day: "화요일", reference: "잠언 22:6", verse: "마땅히 행할 길을 아이에게 가르치라 그리하면 늙어서도 그것을 떠나지 아니하리라" },
      { date: "5월 6일", day: "수요일", reference: "이사야 1:19-20", verse: "너희가 즐겨 순종하면 땅의 아름다운 소산을 먹을 것이요 너희가 거절하여 순종하지 아니하면 칼에 삼켜지리라 여호와의 입의 말씀이니라" },
      { date: "5월 7일", day: "목요일", reference: "로마서 8:28", verse: "우리가 알거니와 하나님을 사랑하는 자 곧 그의 뜻대로 부르심을 입은 자들에게는 모든 것이 합력하여 선을 이루느니라" },
      { date: "5월 8일", day: "금요일", reference: "골로새서 3:20", verse: "자녀들아 모든 일에 부모에게 순종하라 이는 주 안에서 옳으니라" },
      { date: "5월 9일", day: "토요일", reference: "히브리서 13:5", verse: "그가 친히 말씀하시기를 내가 결코 너희를 버리지 아니하고 너희를 떠나지 아니하리라 하셨느니라" },
      { date: "5월 10일", day: "주일", reference: "에베소서 6:2-3", verse: "네 아버지와 어머니를 공경하라 이것은 약속이 있는 첫 계명이니 이로써 네가 잘되고 땅에서 장수하리라", theme: "부모 공경" },
      { date: "5월 11일", day: "월요일", reference: "시편 42:1-2", verse: "하나님이여 사슴이 시냇물을 찾기에 갈급함 같이 내 영혼이 주를 찾기에 갈급하나이다 내 영혼이 하나님 곧 살아 계시는 하나님을 갈망하나니 내가 어느 때에 나아가서 하나님의 얼굴을 뵈올까" },
      { date: "5월 12일", day: "화요일", reference: "잠언 16:9", verse: "사람이 마음으로 자기의 길을 계획할지라도 그의 걸음을 인도하시는 이는 여호와시니라" },
      { date: "5월 13일", day: "수요일", reference: "예레미야 29:13", verse: "너희가 온 마음으로 나를 구하면 나를 찾을 것이요 나를 만나리라" },
      { date: "5월 14일", day: "목요일", reference: "빌립보서 4:19", verse: "나의 하나님이 그리스도 예수 안에서 영광 가운데 그 풍성한 대로 너희 모든 쓸 것을 채우시리라" },
      { date: "5월 15일", day: "금요일", reference: "디모데후서 3:16-17", verse: "모든 성경은 하나님의 감동으로 된 것으로 교훈과 책망과 바르게 함과 의로 교육하기에 유익하니 이는 하나님의 사람으로 온전하게 하며 모든 선한 일을 행할 능력을 갖추게 하려 함이라" },
      { date: "5월 16일", day: "토요일", reference: "히브리서 11:6", verse: "믿음이 없이는 하나님을 기쁘시게 하지 못하나니 하나님께 나아가는 자는 반드시 그가 계신 것과 또한 그가 자기를 찾는 자들에게 상 주시는 이심을 믿어야 할지니라" },
      { date: "5월 17일", day: "주일", reference: "시편 133:1", verse: "보라 형제가 연합하여 동거함이 어찌 그리 선하고 아름다운고", theme: "가정의 화평" },
      { date: "5월 18일", day: "월요일", reference: "시편 145:18-19", verse: "여호와께서는 자기에게 간구하는 모든 자 곧 진실하게 간구하는 모든 자에게 가까이 하시는도다 그는 자기를 경외하는 자들의 소원을 이루시며 또 그들의 부르짖음을 들으사 구원하시리로다" },
      { date: "5월 19일", day: "화요일", reference: "잠언 17:22", verse: "마음의 즐거움은 양약이라도 심령의 근심은 뼈를 마르게 하느니라" },
      { date: "5월 20일", day: "수요일", reference: "로마서 5:1", verse: "그러므로 우리가 믿음으로 의롭다 하심을 받았으니 우리 주 예수 그리스도로 말미암아 하나님과 화평을 누리자" },
      { date: "5월 21일", day: "목요일", reference: "고린도후서 1:20", verse: "하나님의 약속은 그리스도 안에서 다 예가 되니 그런즉 우리가 그로 말미암아 아멘 하여 하나님께 영광을 돌리게 되느니라" },
      { date: "5월 22일", day: "금요일", reference: "갈라디아서 5:22-23", verse: "오직 성령의 열매는 사랑과 희락과 화평과 오래 참음과 자비와 양선과 충성과 온유와 절제니 이같은 것을 금지할 법이 없느니라" },
      { date: "5월 23일", day: "토요일", reference: "에베소서 4:31", verse: "너희는 모든 악독과 노함과 분냄과 떠드는 것과 비방하는 것을 모든 악의와 함께 버리고" },
      { date: "5월 24일", day: "주일", reference: "에베소서 5:33", verse: "그러나 너희도 각각 자기의 아내 사랑하기를 자신같이 하고 아내도 자기 남편을 존경하라", theme: "아내/남편" },
      { date: "5월 25일", day: "월요일", reference: "시편 46:1", verse: "하나님은 우리의 피난처시요 힘이시니 환난 중에 만날 큰 도움이시라" },
      { date: "5월 26일", day: "화요일", reference: "잠언 4:23", verse: "모든 지킬 만한 것 중에 더욱 네 마음을 지키라 생명의 근원이 이에서 남이니라" },
      { date: "5월 27일", day: "수요일", reference: "이사야 41:10", verse: "두려워하지 말라 내가 너와 함께 함이라 놀라지 말라 나는 네 하나님이 됨이라 내가 너를 굳세게 하리라 참으로 너를 도와 주리라 참으로 나의 의로운 오른손으로 너를 붙들리라" },
      { date: "5월 28일", day: "목요일", reference: "요한복음 14:27", verse: "평안을 너희에게 끼치노니 곧 나의 평안을 너희에게 주노라 내가 너희에게 주는 것은 세상이 주는 것과 같지 아니하니라 너희는 마음에 근심하지도 말고 두려워하지도 말라" },
      { date: "5월 29일", day: "금요일", reference: "마태복음 6:33", verse: "그런즉 너희는 먼저 그의 나라와 그의 의를 구하라 그리하면 이 모든 것을 너희에게 더하시리라" },
      { date: "5월 30일", day: "토요일", reference: "야고보서 1:19", verse: "내 사랑하는 형제들아 너희가 알지니 사람마다 듣기는 속히 하고 말하기는 더디 하며 성내기도 더디 하라" },
      { date: "5월 31일", day: "주일", reference: "사도행전 1:8", verse: "오직 성령이 너희에게 임하시면 너희가 권능을 받고 예루살렘과 온 유대와 사마리아와 땅 끝까지 이르러 내 증인이 되리라 하시니라", theme: "성령 강림" }
    ],
    "2026-6": [
      { date: "6월 1일", day: "월요일", reference: "시편 145:18-19", verse: "여호와께서는 자기에게 간구하는 모든 자 곧 진실하게 간구하는 모든 자에게 가까이 하시는도다 그는 자기를 경외하는 자들의 소원을 이루시며 또 그들의 부르짖음을 들으사 구원하시리로다" },
      { date: "6월 2일", day: "화요일", reference: "잠언 13:20", verse: "지혜로운 자와 동행하면 지혜를 얻고 미련한 자와 사귀면 해를 받느니라" },
      { date: "6월 3일", day: "수요일", reference: "골로새서 3:13", verse: "누가 누구에게 불만이 있거든 서로 용납하여 피차 용서하되 주께서 너희를 용서하신 것 같이 너희도 그리하고" },
      { date: "6월 4일", day: "목요일", reference: "고린도후서 4:18", verse: "우리가 주목하는 것은 보이는 것이 아니요 보이지 않는 것이니 보이는 것은 잠깐이요 보이지 않는 것은 영원함이라" },
      { date: "6월 5일", day: "금요일", reference: "로마서 1:5", verse: "그로 말미암아 우리가 은혜와 사도의 직분을 받아 그의 이름을 위하여 모든 이방인 중에서 믿어 순종하게 하나니" },
      { date: "6월 6일", day: "토요일", reference: "신명기 32:4", verse: "그는 반석이시니 그가 하신 일이 완전하고 그의 모든 길이 정의롭고 진실하고 거짓이 없으신 하나님이시니 공의로우시고 바르시도다" },
      { date: "6월 7일", day: "주일", reference: "요한복음 13:34-35", verse: "새 계명을 너희에게 주노니 서로 사랑하라 내가 너희를 사랑한 것 같이 너희도 서로 사랑하라 너희가 서로 사랑하면 이로써 모든 사람이 너희가 내 제자인 줄 알리라", theme: "관계" },
      { date: "6월 8일", day: "월요일", reference: "시편 95:6-7", verse: "오라 우리가 굽혀 경배하며 우리를 지으신 여호와 앞에 무릎을 꿇자 그는 우리의 하나님이시요 우리는 그가 기르시는 백성이며 그의 손이 돌보시는 양이기 때문이라" },
      { date: "6월 9일", day: "화요일", reference: "잠언 4:23", verse: "모든 지킬 만한 것 중에 더욱 네 마음을 지키라 생명의 근원이 이에서 남이니라" },
      { date: "6월 10일", day: "수요일", reference: "시편 32:5", verse: "내가 이르기를 내 허물을 여호와께 자백하리라 하고 주께 내 죄를 아뢰고 내 죄악을 숨기지 아니하였더니 곧 주께서 내 죄악을 사하셨나이다" },
      { date: "6월 11일", day: "목요일", reference: "로마서 15:13", verse: "소망의 하나님이 모든 기쁨과 평강을 믿음 안에서 너희에게 충만하게 하사 성령의 능력으로 소망이 넘치게 하시기를 원하노라" },
      { date: "6월 12일", day: "금요일", reference: "야고보서 1:22", verse: "너희는 말씀을 행하는 자가 되고 듣기만 하여 자신을 속이는 자가 되지 말라" },
      { date: "6월 13일", day: "토요일", reference: "시편 103:8", verse: "여호와는 긍휼이 많으시고 은혜로우시며 노하기를 더디 하시고 인자하심이 풍부하시도다" },
      { date: "6월 14일", day: "주일", reference: "빌립보서 2:3", verse: "아무 일에든지 다툼이나 허영으로 하지 말고 오직 겸손한 마음으로 각각 자기보다 남을 낫게 여기고", theme: "관계" },
      { date: "6월 15일", day: "월요일", reference: "시편 27:8", verse: "내가 주의 얼굴을 찾으오니 여호와여 이제 내가 주의 얼굴을 찾으리이다" },
      { date: "6월 16일", day: "화요일", reference: "로마서 12:2", verse: "너희는 이 세대를 본받지 말고 오직 마음을 새롭게 함으로 변화를 받아 하나님의 선하시고 기뻐하시고 온전하신 뜻이 무엇인지 분별하도록 하라" },
      { date: "6월 17일", day: "수요일", reference: "요한일서 1:9", verse: "만일 우리가 우리 죄를 자백하면 그는 미쁘시고 의로우사 우리 죄를 사하시며 우리를 모든 불의에서 깨끗하게 하실 것이요" },
      { date: "6월 18일", day: "목요일", reference: "이사야 41:10", verse: "두려워하지 말라 내가 너와 함께 함이라 놀라지 말라 나는 네 하나님이 됨이라 내가 너를 굳세게 하리라 참으로 너를 도와 주리라 참으로 나의 의로운 오른손으로 너를 붙들리라" },
      { date: "6월 19일", day: "금요일", reference: "히브리서 11:6", verse: "믿음이 없이는 하나님을 기쁘시게 하지 못하나니 하나님께 나아가는 자는 반드시 그가 계신 것과 또한 그가 자기를 찾는 자들에게 상 주시는 이심을 믿어야 할지니라" },
      { date: "6월 20일", day: "토요일", reference: "요한복음 3:16", verse: "하나님이 세상을 이처럼 사랑하사 독생자를 주셨으니 이는 그를 믿는 자마다 멸망하지 않고 영생을 얻게 하려 하심이라" },
      { date: "6월 21일", day: "주일", reference: "베드로전서 4:8", verse: "무엇보다도 뜨겁게 서로 사랑할지니 사랑은 허다한 죄를 덮느니라", theme: "관계" },
      { date: "6월 22일", day: "월요일", reference: "시편 37:4", verse: "또 여호와를 기뻐하라 그가 네 마음의 소원을 네게 이루어 주시리로다" },
      { date: "6월 23일", day: "화요일", reference: "잠언 3:5-6", verse: "너는 마음을 다하여 여호와를 신뢰하고 네 명철을 의지하지 말라 너는 범사에 그를 인정하라 그리하면 네 길을 지도하시리라" },
      { date: "6월 24일", day: "수요일", reference: "누가복음 6:37", verse: "비판하지 말라 그리하면 너희가 비판을 받지 않을 것이요 정죄하지 말라 그리하면 너희가 정죄를 받지 않을 것이요 용서하라 그리하면 너희가 용서를 받을 것이요" },
      { date: "6월 25일", day: "목요일", reference: "시편 46:1", verse: "하나님은 우리의 피난처시요 힘이시니 환난 중에 만날 큰 도움이시라" },
      { date: "6월 26일", day: "금요일", reference: "마태복음 7:24-25", verse: "그러므로 누구든지 나의 이 말을 듣고 행하는 자는 그 집을 반석 위에 지은 지혜로운 사람 같으리니 비가 내리고 창수가 나고 바람이 불어 그 집에 부딪치되 무너지지 아니하나니 이는 주추를 반석 위에 놓은 까닭이요" },
      { date: "6월 27일", day: "토요일", reference: "요한일서 4:8", verse: "사랑하지 아니하는 자는 하나님을 알지 못하나니 이는 하나님은 사랑이심이라" },
      { date: "6월 28일", day: "주일", reference: "로마서 12:18", verse: "할 수 있거든 너희로서는 모든 사람과 더불어 화목하라", theme: "관계" },
      { date: "6월 29일", day: "월요일", reference: "시편 150:6", verse: "호흡이 있는 자마다 여호와를 찬양할지어다 할렐루야" },
      { date: "6월 30일", day: "화요일", reference: "잠언 27:1", verse: "너는 내일 일을 자랑하지 말라 하루 동안에 무슨 일이 일어날는지 네가 알 수 없음이니라" }
    ],
    "2026-7": [
      { date: "7월 1일", day: "수요일", reference: "시편 51:10", verse: "하나님이여 내 속에 정한 마음을 창조하시고 내 안에 정직한 영을 새롭게 하소서" },
      { date: "7월 2일", day: "목요일", reference: "로마서 8:28", verse: "우리가 알거니와 하나님을 사랑하는 자 곧 그의 뜻대로 부르심을 입은 자들에게는 모든 것이 합력하여 선을 이루느니라" },
      { date: "7월 3일", day: "금요일", reference: "여호수아 1:8", verse: "이 율법책을 네 입에서 떠나지 말게 하며 주야로 그것을 묵상하여 그 안에 기록된 대로 다 지켜 행하라 그리하면 네 길이 평탄하게 될 것이며 네가 형통하리라" },
      { date: "7월 4일", day: "토요일", reference: "요한일서 4:8", verse: "사랑하지 아니하는 자는 하나님을 알지 못하나니 이는 하나님은 사랑이심이라" },
      { date: "7월 5일", day: "주일", reference: "베드로후서 3:18", verse: "오직 우리 주 곧 구주 예수 그리스도의 은혜와 그를 아는 지식에서 자라가라 영광이 이제와 영원한 날까지 그에게 있을지어다", theme: "성장" },
      { date: "7월 6일", day: "월요일", reference: "시편 92:1-2", verse: "지존자여 십현금과 비파와 수금으로 주께 노래함이 아름다움이니이다 아침마다 주의 인자하심을 알리며 밤마다 주의 성실하심을 베풂이 좋으니이다" },
      { date: "7월 7일", day: "화요일", reference: "잠언 16:3", verse: "모든 일에 여호와께 맡기라 그리하면 네가 원하는 것이 이루어지리라" },
      { date: "7월 8일", day: "수요일", reference: "이사야 55:7", verse: "악인은 그 길을, 불의한 자는 그 생각을 버리고 여호와께로 돌아오라 그리하면 그가 긍휼히 여기시리라 우리 하나님께로 돌아오라 그가 너그럽게 용서하시리라" },
      { date: "7월 9일", day: "목요일", reference: "이사야 26:3", verse: "주께서 심지가 견고한 자를 평강하고 평강하도록 지키시리니 이는 그가 주를 신뢰함이니이다" },
      { date: "7월 10일", day: "금요일", reference: "로마서 10:17", verse: "그러므로 믿음은 들음에서 나며 들음은 그리스도의 말씀으로 말미암았느니라" },
      { date: "7월 11일", day: "토요일", reference: "말라기 3:6", verse: "나 여호와는 변하지 아니하나니 그러므로 야곱의 자손들아 너희가 소멸되지 아니하느니라" },
      { date: "7월 12일", day: "주일", reference: "디모데후서 3:16-17", verse: "모든 성경은 하나님의 감동으로 된 것으로 교훈과 책망과 바르게 함과 의로 교육하기에 유익하니 이는 하나님의 사람으로 온전하게 하며 모든 선한 일을 행할 능력을 갖추게 하려 함이라", theme: "성장" },
      { date: "7월 13일", day: "월요일", reference: "시편 105:4", verse: "여호와와 그의 능력을 구할지어다 그의 얼굴을 항상 구할지어다" },
      { date: "7월 14일", day: "화요일", reference: "빌립보서 4:8", verse: "끝으로 형제들아 무엇에든지 참되며 무엇에든지 경건하며 무엇에든지 옳으며 무엇에든지 정결하며 무엇에든지 사랑 받을 만하며 무엇에든지 칭찬 받을 만하며 무슨 덕이 있든지 무슨 기림이 있든지 이것들을 생각하라" },
      { date: "7월 15일", day: "수요일", reference: "누가복음 15:7", verse: "내가 너희에게 이르노니 이와 같이 죄인 한 사람이 회개하면 하늘에서는 회개할 것 없는 의인 아흔아홉으로 말미암아 기뻐하는 것보다 더하리라" },
      { date: "7월 16일", day: "목요일", reference: "고린도후서 4:18", verse: "우리가 주목하는 것은 보이는 것이 아니요 보이지 않는 것이니 보이는 것은 잠깐이요 보이지 않는 것은 영원함이라" },
      { date: "7월 17일", day: "금요일", reference: "야고보서 4:7", verse: "그런즉 너희는 하나님께 복종할지어다 마귀를 대적하라 그리하면 너희를 피하리라" },
      { date: "7월 18일", day: "토요일", reference: "말라기 3:6", verse: "나 여호와는 변하지 아니하나니 그러므로 야곱의 자손들아 너희가 소멸되지 아니하느니라" },
      { date: "7월 19일", day: "주일", reference: "빌립보서 3:12-14", verse: "내가 이미 얻었다 함도 아니요 온전히 이루었다 함도 아니라 오직 내가 그리스도 예수께 잡힌 바 된 그것을 잡으려고 달려가노라 형제들아 나는 아직 내가 잡은 줄로 여기지 아니하고 오직 한 일 곧 뒤에 있는 것은 잊어버리고 앞에 있는 것을 잡으려고 푯대를 향하여 그리스도 예수 안에서 하나님이 위에서 부르신 부름의 상을 위하여 달려가노라", theme: "성장" },
      { date: "7월 20일", day: "월요일", reference: "시편 37:4", verse: "또 여호와를 기뻐하라 그가 네 마음의 소원을 네게 이루어 주시리로다" },
      { date: "7월 21일", day: "화요일", reference: "잠언 22:1", verse: "명예는 많은 재물보다 낫고 은총은 금이나 은보다 더 나으니라" },
      { date: "7월 22일", day: "수요일", reference: "이사야 1:18", verse: "여호와께서 말씀하시되 오라 우리가 서로 변론하자 너희의 죄가 주홍 같을지라도 눈과 같이 희어질 것이요 진홍 같이 붉을지라도 양털 같이 희게 되리라" },
      { date: "7월 23일", day: "목요일", reference: "데살로니가전서 5:16-18", verse: "항상 기뻐하라 쉬지 말고 기도하라 범사에 감사하라 이것이 그리스도 예수 안에서 너희를 향하신 하나님의 뜻이니라" },
      { date: "7월 24일", day: "금요일", reference: "로마서 1:5", verse: "그로 말미암아 우리가 은혜와 사도의 직분을 받아 그의 이름을 위하여 모든 이방인 중에서 믿어 순종하게 하나니" },
      { date: "7월 25일", day: "토요일", reference: "신명기 32:4", verse: "그는 반석이시니 그가 하신 일이 완전하고 그의 모든 길이 정의롭고 진실하고 거짓이 없으신 하나님이시니 공의로우시고 바르시도다" },
      { date: "7월 26일", day: "주일", reference: "골로새서 2:7", verse: "그 안에 뿌리를 박으며 세움을 받아 교훈을 받은 대로 믿음에 굳게 서서 감사함을 넘치게 하라", theme: "성장" },
      { date: "7월 27일", day: "월요일", reference: "시편 103:1", verse: "내 영혼아 여호와를 송축하라 내 속에 있는 것들아 다 그의 거룩한 이름을 송축하라" },
      { date: "7월 28일", day: "화요일", reference: "잠언 4:23", verse: "모든 지킬 만한 것 중에 더욱 네 마음을 지키라 생명의 근원이 이에서 남이니라" },
      { date: "7월 29일", day: "수요일", reference: "미가 7:19", verse: "다시 우리를 불쌍히 여기셔서 우리의 죄악을 발로 밟으시고 우리의 모든 죄를 깊은 바다에 던지시리이다" },
      { date: "7월 30일", day: "목요일", reference: "요한복음 14:27", verse: "평안을 너희에게 끼치노니 곧 나의 평안을 너희에게 주노라 내가 너희에게 주는 것은 세상이 주는 것과 같지 아니하니라 너희는 마음에 근심하지도 말고 두려워하지도 말라" },
      { date: "7월 31일", day: "금요일", reference: "히브리서 11:1", verse: "믿음은 바라는 것들의 실상이요 보이지 않는 것들의 증거니" }
    ],
    "2026-8": [
      { date: "8월 1일", day: "토요일", reference: "이사야 55:9", verse: "이는 하늘이 땅보다 높음 같이 내 길은 너희의 길보다 높으며 내 생각은 너희의 생각보다 높음이니라" },
      { date: "8월 2일", day: "주일", reference: "요한복음 14:26", verse: "보혜사 곧 아버지께서 내 이름으로 보내실 성령 그가 너희에게 모든 것을 가르치고 내가 너희에게 말한 모든 것을 생각나게 하리라", theme: "성령" },
      { date: "8월 3일", day: "월요일", reference: "시편 42:1-2", verse: "하나님이여 사슴이 시냇물을 찾기에 갈급함 같이 내 영혼이 주를 찾기에 갈급하나이다 내 영혼이 하나님 곧 살아 계시는 하나님을 갈망하나니 내가 어느 때에 나아가서 하나님의 얼굴을 뵈올까" },
      { date: "8월 4일", day: "화요일", reference: "잠언 16:3", verse: "모든 일에 여호와께 맡기라 그리하면 네가 원하는 것이 이루어지리라" },
      { date: "8월 5일", day: "수요일", reference: "시편 32:5", verse: "내가 이르기를 내 허물을 여호와께 자백하리라 하고 주께 내 죄를 아뢰고 내 죄악을 숨기지 아니하였더니 곧 주께서 내 죄악을 사하셨나이다" },
      { date: "8월 6일", day: "목요일", reference: "히브리서 13:5", verse: "그가 친히 말씀하시기를 내가 결코 너희를 버리지 아니하고 너희를 떠나지 아니하리라 하셨느니라" },
      { date: "8월 7일", day: "금요일", reference: "야고보서 1:22", verse: "너희는 말씀을 행하는 자가 되고 듣기만 하여 자신을 속이는 자가 되지 말라" },
      { date: "8월 8일", day: "토요일", reference: "로마서 8:39", verse: "높음이나 깊음이나 다른 어떤 피조물이라도 우리를 우리 주 그리스도 예수 안에 있는 하나님의 사랑에서 끊을 수 없으리라" },
      { date: "8월 9일", day: "주일", reference: "갈라디아서 5:22-23", verse: "오직 성령의 열매는 사랑과 희락과 화평과 오래 참음과 자비와 양선과 충성과 온유와 절제니 이같은 것을 금지할 법이 없느니라", theme: "성령" },
      { date: "8월 10일", day: "월요일", reference: "시편 100:4", verse: "감사함으로 그의 문에 들어가며 찬송함으로 그의 궁정에 들어가서 그에게 감사하며 그의 이름을 송축할지어다" },
      { date: "8월 11일", day: "화요일", reference: "잠언 16:9", verse: "사람이 마음으로 자기의 길을 계획할지라도 그의 걸음을 인도하시는 이는 여호와시니라" },
      { date: "8월 12일", day: "수요일", reference: "요한일서 1:9", verse: "만일 우리가 우리 죄를 자백하면 그는 미쁘시고 의로우사 우리 죄를 사하시며 우리를 모든 불의에서 깨끗하게 하실 것이요" },
      { date: "8월 13일", day: "목요일", reference: "고린도후서 1:3-4", verse: "찬송하리로다 그는 우리 주 예수 그리스도의 아버지시요 자비의 아버지시요 모든 위로의 하나님이시며 우리의 모든 환난 중에서 우리를 위로하사 우리로 하여금 하나님께 받는 위로로써 모든 환난 중에 있는 자들을 능히 위로하게 하시는 이시로다" },
      { date: "8월 14일", day: "금요일", reference: "골로새서 2:6", verse: "그러므로 너희가 그리스도 예수를 주로 받았으니 그 안에서 행하되" },
      { date: "8월 15일", day: "토요일", reference: "요한복음 3:16", verse: "하나님이 세상을 이처럼 사랑하사 독생자를 주셨으니 이는 그를 믿는 자마다 멸망하지 않고 영생을 얻게 하려 하심이라" },
      { date: "8월 16일", day: "주일", reference: "로마서 8:26", verse: "이와 같이 성령도 우리의 연약함을 도우시나니 우리는 마땅히 기도할 바를 알지 못하나 오직 성령이 말할 수 없는 탄식으로 우리를 위하여 친히 간구하시느니라", theme: "성령" },
      { date: "8월 17일", day: "월요일", reference: "시편 103:1", verse: "내 영혼아 여호와를 송축하라 내 속에 있는 것들아 다 그의 거룩한 이름을 송축하라" },
      { date: "8월 18일", day: "화요일", reference: "잠언 3:5-6", verse: "너는 마음을 다하여 여호와를 신뢰하고 네 명철을 의지하지 말라 너는 범사에 그를 인정하라 그리하면 네 길을 지도하시리라" },
      { date: "8월 19일", day: "수요일", reference: "누가복음 15:7", verse: "내가 너희에게 이르노니 이와 같이 죄인 한 사람이 회개하면 하늘에서는 회개할 것 없는 의인 아흔아홉으로 말미암아 기뻐하는 것보다 더하리라" },
      { date: "8월 20일", day: "목요일", reference: "이사야 40:31", verse: "오직 여호와를 앙망하는 자는 새 힘을 얻으리니 독수리가 날개 치며 올라감 같을 것이요 달음박질하여도 곤비하지 아니하겠고 걸어가도 피곤하지 아니하리로다" },
      { date: "8월 21일", day: "금요일", reference: "베드로전서 1:14-15", verse: "너희가 순종하는 자식처럼 전에 알지 못할 때에 따르던 너희 사욕을 본받지 말고 오직 너희를 부르신 거룩한 이처럼 너희도 모든 행실에 거룩한 자가 되라" },
      { date: "8월 22일", day: "토요일", reference: "이사야 43:25", verse: "나 곧 나는 나를 위하여 네 허물을 도말하는 자니 네 죄를 기억하지 아니하리라" },
      { date: "8월 23일", day: "주일", reference: "고린도전서 3:16", verse: "너희는 너희가 하나님의 성전인 것과 하나님의 성령이 너희 안에 계시는 것을 알지 못하느냐", theme: "성령" },
      { date: "8월 24일", day: "월요일", reference: "시편 150:6", verse: "호흡이 있는 자마다 여호와를 찬양할지어다 할렐루야" },
      { date: "8월 25일", day: "화요일", reference: "로마서 12:2", verse: "너희는 이 세대를 본받지 말고 오직 마음을 새롭게 함으로 변화를 받아 하나님의 선하시고 기뻐하시고 온전하신 뜻이 무엇인지 분별하도록 하라" },
      { date: "8월 26일", day: "수요일", reference: "이사야 1:18", verse: "여호와께서 말씀하시되 오라 우리가 서로 변론하자 너희의 죄가 주홍 같을지라도 눈과 같이 희어질 것이요 진홍 같이 붉을지라도 양털 같이 희게 되리라" },
      { date: "8월 27일", day: "목요일", reference: "시편 121:7-8", verse: "여호와께서 너를 지켜 모든 환난을 면하게 하시며 또 네 영혼을 지키시리로다 여호와께서 너의 출입을 지금부터 영원까지 지키시리로다" },
      { date: "8월 28일", day: "금요일", reference: "히브리서 11:6", verse: "믿음이 없이는 하나님을 기쁘시게 하지 못하나니 하나님께 나아가는 자는 반드시 그가 계신 것과 또한 그가 자기를 찾는 자들에게 상 주시는 이심을 믿어야 할지니라" },
      { date: "8월 29일", day: "토요일", reference: "신명기 32:4", verse: "그는 반석이시니 그가 하신 일이 완전하고 그의 모든 길이 정의롭고 진실하고 거짓이 없으신 하나님이시니 공의로우시고 바르시도다" },
      { date: "8월 30일", day: "주일", reference: "에베소서 5:18", verse: "술 취하지 말라 이는 방탕한 것이니 오직 성령으로 충만함을 받으라", theme: "성령" },
      { date: "8월 31일", day: "월요일", reference: "시편 4:8", verse: "내가 평안히 눕고 자기도 하리니 나를 안전히 살게 하시는 이는 오직 여호와이시니라" }
    ],
    "2026-9": [
      { date: "9월 1일", day: "화요일", reference: "잠언 1:7", verse: "여호와를 경외하는 것이 지식의 근본이거늘 미련한 자는 지혜와 훈계를 멸시하느니라" },
      { date: "9월 2일", day: "수요일", reference: "요한일서 1:9", verse: "만일 우리가 우리 죄를 자백하면 그는 미쁘시고 의로우사 우리 죄를 사하시며 우리를 모든 불의에서 깨끗하게 하실 것이요" },
      { date: "9월 3일", day: "목요일", reference: "로마서 5:5", verse: "소망이 우리를 부끄럽게 하지 아니함은 우리에게 주신 성령으로 말미암아 하나님의 사랑이 우리 마음에 부은 바 됨이니" },
      { date: "9월 4일", day: "금요일", reference: "베드로전서 1:22", verse: "너희가 진리를 순종함으로 너희 영혼을 깨끗하게 하여 거짓이 없이 형제를 사랑하기에 이르렀으니 뜨겁게 서로 사랑하라" },
      { date: "9월 5일", day: "토요일", reference: "이사야 43:25", verse: "나 곧 나는 나를 위하여 네 허물을 도말하는 자니 네 죄를 기억하지 아니하리라" },
      { date: "9월 6일", day: "주일", reference: "잠언 19:17", verse: "가난한 자를 불쌍히 여기는 것은 여호와께 꾸어 드리는 것이니 그의 선행을 그에게 갚아 주시리라", theme: "구제" },
      { date: "9월 7일", day: "월요일", reference: "시편 4:8", verse: "내가 평안히 눕고 자기도 하리니 나를 안전히 살게 하시는 이는 오직 여호와이시니라" },
      { date: "9월 8일", day: "화요일", reference: "잠언 27:1", verse: "너는 내일 일을 자랑하지 말라 하루 동안에 무슨 일이 일어날는지 네가 알 수 없음이니라" },
      { date: "9월 9일", day: "수요일", reference: "호세아 6:1", verse: "오라 우리가 여호와께로 돌아가자 여호와께서 우리를 찢으셨으나 도로 낫게 하실 것이요 우리를 치셨으나 싸매어 주실 것임이라" },
      { date: "9월 10일", day: "목요일", reference: "고린도후서 4:18", verse: "우리가 주목하는 것은 보이는 것이 아니요 보이지 않는 것이니 보이는 것은 잠깐이요 보이지 않는 것은 영원함이라" },
      { date: "9월 11일", day: "금요일", reference: "여호수아 1:8", verse: "이 율법책을 네 입에서 떠나지 말게 하며 주야로 그것을 묵상하여 그 안에 기록된 대로 다 지켜 행하라 그리하면 네 길이 평탄하게 될 것이며 네가 형통하리라" },
      { date: "9월 12일", day: "토요일", reference: "요한일서 4:8", verse: "사랑하지 아니하는 자는 하나님을 알지 못하나니 이는 하나님은 사랑이심이라" },
      { date: "9월 13일", day: "주일", reference: "마태복음 6:3-4", verse: "너는 구제할 때에 오른손이 하는 것을 왼손이 모르게 하여 네 구제함을 은밀하게 하라 은밀한 중에 보시는 너의 아버지께서 갚으시리라", theme: "구제" },
      { date: "9월 14일", day: "월요일", reference: "시편 37:4", verse: "또 여호와를 기뻐하라 그가 네 마음의 소원을 네게 이루어 주시리로다" },
      { date: "9월 15일", day: "화요일", reference: "빌립보서 2:3", verse: "아무 일에든지 다툼이나 허영으로 하지 말고 오직 겸손한 마음으로 각각 자기보다 남을 낫게 여기고" },
      { date: "9월 16일", day: "수요일", reference: "시편 51:17", verse: "하나님께서 구하시는 제사는 상한 심령이라 하나님이여 상하고 통회하는 마음을 주께서 멸시하지 아니하시리이다" },
      { date: "9월 17일", day: "목요일", reference: "이사야 58:11", verse: "여호와가 너를 항상 인도하여 메마른 곳에서도 네 영혼을 만족하게 하며 네 뼈를 견고하게 하리니 너는 물 댄 동산 같겠고 물이 끊어지지 아니하는 샘 같을 것이라" },
      { date: "9월 18일", day: "금요일", reference: "히브리서 11:1", verse: "믿음은 바라는 것들의 실상이요 보이지 않는 것들의 증거니" },
      { date: "9월 19일", day: "토요일", reference: "시편 103:8", verse: "여호와는 긍휼이 많으시고 은혜로우시며 노하기를 더디 하시고 인자하심이 풍부하시도다" },
      { date: "9월 20일", day: "주일", reference: "고린도후서 9:7", verse: "각각 그 마음에 정한 대로 할 것이요 인색함으로나 억지로 하지 말지니 하나님은 즐겨 내는 자를 사랑하시느니라", theme: "구제" },
      { date: "9월 21일", day: "월요일", reference: "시편 105:4", verse: "여호와와 그의 능력을 구할지어다 그의 얼굴을 항상 구할지어다" },
      { date: "9월 22일", day: "화요일", reference: "잠언 22:1", verse: "명예는 많은 재물보다 낫고 은총은 금이나 은보다 더 나으니라" },
      { date: "9월 23일", day: "수요일", reference: "이사야 55:7", verse: "악인은 그 길을, 불의한 자는 그 생각을 버리고 여호와께로 돌아오라 그리하면 그가 긍휼히 여기시리라 우리 하나님께로 돌아오라 그가 너그럽게 용서하시리라" },
      { date: "9월 24일", day: "목요일", reference: "이사야 41:10", verse: "두려워하지 말라 내가 너와 함께 함이라 놀라지 말라 나는 네 하나님이 됨이라 내가 너를 굳세게 하리라 참으로 너를 도와 주리라 참으로 나의 의로운 오른손으로 너를 붙들리라" },
      { date: "9월 25일", day: "금요일", reference: "로마서 1:5", verse: "그로 말미암아 우리가 은혜와 사도의 직분을 받아 그의 이름을 위하여 모든 이방인 중에서 믿어 순종하게 하나니" },
      { date: "9월 26일", day: "토요일", reference: "로마서 8:32", verse: "자기 아들을 아끼지 아니하시고 우리 모든 사람을 위하여 내주신 이가 어찌 그 아들과 함께 모든 것을 우리에게 주시지 아니하겠느냐" },
      { date: "9월 27일", day: "주일", reference: "누가복음 6:38", verse: "주라 그리하면 너희에게 줄 것이니 곧 후히 되어 누르고 흔들어 넘치도록 하여 너희에게 안겨 주리라 너희가 헤아리는 그 헤아림으로 너희도 헤아림을 도로 받을 것이니라", theme: "구제" },
      { date: "9월 28일", day: "월요일", reference: "시편 100:5", verse: "여호와는 선하시니 그의 인자하심이 영원하고 그의 성실하심이 대대에 이르리로다" },
      { date: "9월 29일", day: "화요일", reference: "로마서 12:10", verse: "형제를 사랑하여 서로 우애하고 존경하기를 서로 먼저 하며" },
      { date: "9월 30일", day: "수요일", reference: "미가 7:19", verse: "다시 우리를 불쌍히 여기셔서 우리의 죄악을 발로 밟으시고 우리의 모든 죄를 깊은 바다에 던지시리이다" }
    ],
    "2026-10": [
      { date: "10월 1일", day: "목요일", reference: "고린도후서 1:3-4", verse: "찬송하리로다 그는 우리 주 예수 그리스도의 아버지시요 자비의 아버지시요 모든 위로의 하나님이시며 우리의 모든 환난 중에서 우리를 위로하사 우리로 하여금 하나님께 받는 위로로써 모든 환난 중에 있는 자들을 능히 위로하게 하시는 이시로다" },
      { date: "10월 2일", day: "금요일", reference: "골로새서 2:6", verse: "그러므로 너희가 그리스도 예수를 주로 받았으니 그 안에서 행하되" },
      { date: "10월 3일", day: "토요일", reference: "로마서 8:39", verse: "높음이나 깊음이나 다른 어떤 피조물이라도 우리를 우리 주 그리스도 예수 안에 있는 하나님의 사랑에서 끊을 수 없으리라" },
      { date: "10월 4일", day: "주일", reference: "에베소서 2:8-9", verse: "너희는 그 은혜에 의하여 믿음으로 말미암아 구원을 받았으니 이것은 너희에게서 난 것이 아니요 하나님의 선물이라 행위에서 난 것이 아니니 이는 누구든지 자랑하지 못하게 함이라", theme: "은혜" },
      { date: "10월 5일", day: "월요일", reference: "시편 100:4", verse: "감사함으로 그의 문에 들어가며 찬송함으로 그의 궁정에 들어가서 그에게 감사하며 그의 이름을 송축할지어다" },
      { date: "10월 6일", day: "화요일", reference: "잠언 16:3", verse: "모든 일에 여호와께 맡기라 그리하면 네가 원하는 것이 이루어지리라" },
      { date: "10월 7일", day: "수요일", reference: "시편 32:5", verse: "내가 이르기를 내 허물을 여호와께 자백하리라 하고 주께 내 죄를 아뢰고 내 죄악을 숨기지 아니하였더니 곧 주께서 내 죄악을 사하셨나이다" },
      { date: "10월 8일", day: "목요일", reference: "데살로니가전서 5:16-18", verse: "항상 기뻐하라 쉬지 말고 기도하라 범사에 감사하라 이것이 그리스도 예수 안에서 너희를 향하신 하나님의 뜻이니라" },
      { date: "10월 9일", day: "금요일", reference: "로마서 10:17", verse: "그러므로 믿음은 들음에서 나며 들음은 그리스도의 말씀으로 말미암았느니라" },
      { date: "10월 10일", day: "토요일", reference: "말라기 3:6", verse: "나 여호와는 변하지 아니하나니 그러므로 야곱의 자손들아 너희가 소멸되지 아니하느니라" },
      { date: "10월 11일", day: "주일", reference: "디모데후서 1:9", verse: "하나님이 우리를 구원하사 거룩하신 소명으로 부르심은 우리의 행위대로 하심이 아니요 오직 자기의 뜻과 영원 전부터 그리스도 예수 안에서 우리에게 주신 은혜대로 하심이라", theme: "은혜" },
      { date: "10월 12일", day: "월요일", reference: "시편 103:1-2", verse: "내 영혼아 여호와를 송축하라 내 속에 있는 것들아 다 그의 거룩한 이름을 송축하라 내 영혼아 여호와를 송축하며 그의 모든 은택을 잊지 말지어다" },
      { date: "10월 13일", day: "화요일", reference: "잠언 3:5-6", verse: "너는 마음을 다하여 여호와를 신뢰하고 네 명철을 의지하지 말라 너는 범사에 그를 인정하라 그리하면 네 길을 지도하시리라" },
      { date: "10월 14일", day: "수요일", reference: "누가복음 15:7", verse: "내가 너희에게 이르노니 이와 같이 죄인 한 사람이 회개하면 하늘에서는 회개할 것 없는 의인 아흔아홉으로 말미암아 기뻐하는 것보다 더하리라" },
      { date: "10월 15일", day: "목요일", reference: "이사야 40:31", verse: "오직 여호와를 앙망하는 자는 새 힘을 얻으리니 독수리가 날개 치며 올라감 같을 것이요 달음박질하여도 곤비하지 아니하겠고 걸어가도 피곤하지 아니하리로다" },
      { date: "10월 16일", day: "금요일", reference: "히브리서 11:6", verse: "믿음이 없이는 하나님을 기쁘시게 하지 못하나니 하나님께 나아가는 자는 반드시 그가 계신 것과 또한 그가 자기를 찾는 자들에게 상 주시는 이심을 믿어야 할지니라" },
      { date: "10월 17일", day: "토요일", reference: "신명기 32:4", verse: "그는 반석이시니 그가 하신 일이 완전하고 그의 모든 길이 정의롭고 진실하고 거짓이 없으신 하나님이시니 공의로우시고 바르시도다" },
      { date: "10월 18일", day: "주일", reference: "로마서 5:2", verse: "또한 그로 말미암아 우리가 믿음으로 서 있는 이 은혜에 들어감을 얻었으며 하나님의 영광을 바라고 즐거워하느니라", theme: "은혜" },
      { date: "10월 19일", day: "월요일", reference: "시편 150:6", verse: "호흡이 있는 자마다 여호와를 찬양할지어다 할렐루야" },
      { date: "10월 20일", day: "화요일", reference: "로마서 12:10", verse: "형제를 사랑하여 서로 우애하고 존경하기를 서로 먼저 하며" },
      { date: "10월 21일", day: "수요일", reference: "골로새서 3:13", verse: "누가 누구에게 불만이 있거든 서로 용납하여 피차 용서하되 주께서 너희를 용서하신 것 같이 너희도 그리하고" },
      { date: "10월 22일", day: "목요일", reference: "로마서 8:28", verse: "우리가 알거니와 하나님을 사랑하는 자 곧 그의 뜻대로 부르심을 입은 자들에게는 모든 것이 합력하여 선을 이루느니라" },
      { date: "10월 23일", day: "금요일", reference: "마태복음 7:24-25", verse: "그러므로 누구든지 나의 이 말을 듣고 행하는 자는 그 집을 반석 위에 지은 지혜로운 사람 같으리니 비가 내리고 창수가 나고 바람이 불어 그 집에 부딪치되 무너지지 아니하나니 이는 주추를 반석 위에 놓은 까닭이요" },
      { date: "10월 24일", day: "토요일", reference: "이사야 55:9", verse: "이는 하늘이 땅보다 높음 같이 내 길은 너희의 길보다 높으며 내 생각은 너희의 생각보다 높음이니라" },
      { date: "10월 25일", day: "주일", reference: "고린도전서 15:10", verse: "그러나 내가 나 된 것은 하나님의 은혜로 된 것이니 내게 주신 그의 은혜가 헛되지 아니하여 내가 모든 사도보다 더 많이 수고하였으나 내가 한 것이 아니요 오직 나와 함께 하신 하나님의 은혜로라", theme: "은혜" },
      { date: "10월 26일", day: "월요일", reference: "시편 27:8", verse: "내가 주의 얼굴을 찾으오니 여호와여 이제 내가 주의 얼굴을 찾으리이다" },
      { date: "10월 27일", day: "화요일", reference: "잠언 4:23", verse: "모든 지킬 만한 것 중에 더욱 네 마음을 지키라 생명의 근원이 이에서 남이니라" },
      { date: "10월 28일", day: "수요일", reference: "이사야 1:18", verse: "여호와께서 말씀하시되 오라 우리가 서로 변론하자 너희의 죄가 주홍 같을지라도 눈과 같이 희어질 것이요 진홍 같이 붉을지라도 양털 같이 희게 되리라" },
      { date: "10월 29일", day: "목요일", reference: "요한복음 14:27", verse: "평안을 너희에게 끼치노니 곧 나의 평안을 너희에게 주노라 내가 너희에게 주는 것은 세상이 주는 것과 같지 아니하니라 너희는 마음에 근심하지도 말고 두려워하지도 말라" },
      { date: "10월 30일", day: "금요일", reference: "야고보서 4:7", verse: "그런즉 너희는 하나님께 복종할지어다 마귀를 대적하라 그리하면 너희를 피하리라" },
      { date: "10월 31일", day: "토요일", reference: "로마서 8:39", verse: "높음이나 깊음이나 다른 어떤 피조물이라도 우리를 우리 주 그리스도 예수 안에 있는 하나님의 사랑에서 끊을 수 없으리라" }
    ],
    "2026-11": [
      { date: "11월 1일", day: "주일", reference: "골로새서 3:17", verse: "또 무엇을 하든지 말에나 일에나 다 주 예수의 이름으로 하고 그를 힘입어 하나님 아버지께 감사하라", theme: "감사" },
      { date: "11월 2일", day: "월요일", reference: "시편 103:1-2", verse: "내 영혼아 여호와를 송축하라 내 속에 있는 것들아 다 그의 거룩한 이름을 송축하라 내 영혼아 여호와를 송축하며 그의 모든 은택을 잊지 말지어다" },
      { date: "11월 3일", day: "화요일", reference: "잠언 22:6", verse: "마땅히 행할 길을 아이에게 가르치라 그리하면 늙어서도 그것을 떠나지 아니하리라" },
      { date: "11월 4일", day: "수요일", reference: "시편 51:10", verse: "하나님이여 내 속에 정한 마음을 창조하시고 내 안에 정직한 영을 새롭게 하소서" },
      { date: "11월 5일", day: "목요일", reference: "로마서 15:13", verse: "소망의 하나님이 모든 기쁨과 평강을 믿음 안에서 너희에게 충만하게 하사 성령의 능력으로 소망이 넘치게 하시기를 원하노라" },
      { date: "11월 6일", day: "금요일", reference: "요한복음 15:5", verse: "나는 포도나무요 너희는 가지라 그가 내 안에, 내가 그 안에 거하면 사람이 열매를 많이 맺나니 나를 떠나서는 너희가 아무 것도 할 수 없음이라" },
      { date: "11월 7일", day: "토요일", reference: "시편 103:8", verse: "여호와는 긍휼이 많으시고 은혜로우시며 노하기를 더디 하시고 인자하심이 풍부하시도다" },
      { date: "11월 8일", day: "주일", reference: "시편 107:1", verse: "여호와께 감사하라 그는 선하시며 그 인자하심이 영원함이로다", theme: "감사" },
      { date: "11월 9일", day: "월요일", reference: "시편 145:18-19", verse: "여호와께서는 자기에게 간구하는 모든 자 곧 진실하게 간구하는 모든 자에게 가까이 하시는도다 그는 자기를 경외하는 자들의 소원을 이루시며 또 그들의 부르짖음을 들으사 구원하시리로다" },
      { date: "11월 10일", day: "화요일", reference: "잠언 16:9", verse: "사람이 마음으로 자기의 길을 계획할지라도 그의 걸음을 인도하시는 이는 여호와시니라" },
      { date: "11월 11일", day: "수요일", reference: "요한일서 1:9", verse: "만일 우리가 우리 죄를 자백하면 그는 미쁘시고 의로우사 우리 죄를 사하시며 우리를 모든 불의에서 깨끗하게 하실 것이요" },
      { date: "11월 12일", day: "목요일", reference: "이사야 26:3", verse: "주께서 심지가 견고한 자를 평강하고 평강하도록 지키시리니 이는 그가 주를 신뢰함이니이다" },
      { date: "11월 13일", day: "금요일", reference: "베드로전서 1:14-15", verse: "너희가 순종하는 자식처럼 전에 알지 못할 때에 따르던 너희 사욕을 본받지 말고 오직 너희를 부르신 거룩한 이처럼 너희도 모든 행실에 거룩한 자가 되라" },
      { date: "11월 14일", day: "토요일", reference: "요한복음 3:16", verse: "하나님이 세상을 이처럼 사랑하사 독생자를 주셨으니 이는 그를 믿는 자마다 멸망하지 않고 영생을 얻게 하려 하심이라" },
      { date: "11월 15일", day: "주일", reference: "시편 107:1", verse: "여호와께 감사하라 그는 선하시며 그 인자하심이 영원함이로다", theme: "감사" },
      { date: "11월 16일", day: "월요일", reference: "시편 27:8", verse: "내가 주의 얼굴을 찾으오니 여호와여 이제 내가 주의 얼굴을 찾으리이다" },
      { date: "11월 17일", day: "화요일", reference: "로마서 12:2", verse: "너희는 이 세대를 본받지 말고 오직 마음을 새롭게 함으로 변화를 받아 하나님의 선하시고 기뻐하시고 온전하신 뜻이 무엇인지 분별하도록 하라" },
      { date: "11월 18일", day: "수요일", reference: "미가 7:19", verse: "다시 우리를 불쌍히 여기셔서 우리의 죄악을 발로 밟으시고 우리의 모든 죄를 깊은 바다에 던지시리이다" },
      { date: "11월 19일", day: "목요일", reference: "이사야 26:3", verse: "주께서 심지가 견고한 자를 평강하고 평강하도록 지키시리니 이는 그가 주를 신뢰함이니이다" },
      { date: "11월 20일", day: "금요일", reference: "마태복음 7:24-25", verse: "그러므로 누구든지 나의 이 말을 듣고 행하는 자는 그 집을 반석 위에 지은 지혜로운 사람 같으리니 비가 내리고 창수가 나고 바람이 불어 그 집에 부딪치되 무너지지 아니하나니 이는 주추를 반석 위에 놓은 까닭이요" },
      { date: "11월 21일", day: "토요일", reference: "말라기 3:6", verse: "나 여호와는 변하지 아니하나니 그러므로 야곱의 자손들아 너희가 소멸되지 아니하느니라" },
      { date: "11월 22일", day: "주일", reference: "데살로니가전서 5:18", verse: "범사에 감사하라 이것이 그리스도 예수 안에서 너희를 향하신 하나님의 뜻이니라", theme: "감사" },
      { date: "11월 23일", day: "월요일", reference: "시편 150:6", verse: "호흡이 있는 자마다 여호와를 찬양할지어다 할렐루야" },
      { date: "11월 24일", day: "화요일", reference: "잠언 1:7", verse: "여호와를 경외하는 것이 지식의 근본이거늘 미련한 자는 지혜와 훈계를 멸시하느니라" },
      { date: "11월 25일", day: "수요일", reference: "시편 51:17", verse: "하나님께서 구하시는 제사는 상한 심령이라 하나님이여 상하고 통회하는 마음을 주께서 멸시하지 아니하시리이다" },
      { date: "11월 26일", day: "목요일", reference: "고린도후서 1:3-4", verse: "찬송하리로다 그는 우리 주 예수 그리스도의 아버지시요 자비의 아버지시요 모든 위로의 하나님이시며 우리의 모든 환난 중에서 우리를 위로하사 우리로 하여금 하나님께 받는 위로로써 모든 환난 중에 있는 자들을 능히 위로하게 하시는 이시로다" },
      { date: "11월 27일", day: "금요일", reference: "히브리서 11:1", verse: "믿음은 바라는 것들의 실상이요 보이지 않는 것들의 증거니" },
      { date: "11월 28일", day: "토요일", reference: "신명기 32:4", verse: "그는 반석이시니 그가 하신 일이 완전하고 그의 모든 길이 정의롭고 진실하고 거짓이 없으신 하나님이시니 공의로우시고 바르시도다" },
      { date: "11월 29일", day: "주일", reference: "빌립보서 4:6", verse: "아무 것도 염려하지 말고 다만 모든 일에 기도와 간구로, 너희 구할 것을 감사함으로 하나님께 아뢰라", theme: "감사" },
      { date: "11월 30일", day: "월요일", reference: "시편 92:1-2", verse: "지존자여 십현금과 비파와 수금으로 주께 노래함이 아름다움이니이다 아침마다 주의 인자하심을 알리며 밤마다 주의 성실하심을 베풂이 좋으니이다" }
    ],
    "2026-12": [
      { date: "12월 1일", day: "화요일", reference: "골로새서 3:16", verse: "그리스도의 말씀이 너희 속에 풍성히 거하여 모든 지혜로 피차 가르치며 권면하고 시와 찬송과 신령한 노래를 부르며 감사하는 마음으로 하나님을 찬양하고" },
      { date: "12월 2일", day: "수요일", reference: "호세아 6:1", verse: "오라 우리가 여호와께로 돌아가자 여호와께서 우리를 찢으셨으나 도로 낫게 하실 것이요 우리를 치셨으나 싸매어 주실 것임이라" },
      { date: "12월 3일", day: "목요일", reference: "데살로니가전서 5:16-17", verse: "항상 기뻐하라 쉬지 말고 기도하라" },
      { date: "12월 4일", day: "금요일", reference: "로마서 10:17", verse: "그러므로 믿음은 들음에서 나며 들음은 그리스도의 말씀으로 말미암았느니라" },
      { date: "12월 5일", day: "토요일", reference: "로마서 8:32", verse: "자기 아들을 아끼지 아니하시고 우리 모든 사람을 위하여 내주신 이가 어찌 그 아들과 함께 모든 것을 우리에게 주시지 아니하겠느냐" },
      { date: "12월 6일", day: "주일", reference: "이사야 9:6", verse: "이는 한 아기가 우리에게 났고 한 아들을 우리에게 주신 바 되었는데 그의 어깨에는 정사를 메었고 그의 이름은 기묘자라, 모사라, 전능하신 하나님이라, 영존하시는 아버지라, 평강의 왕이라 할 것임이라", theme: "예언과 기다림" },
      { date: "12월 7일", day: "월요일", reference: "시편 105:4", verse: "여호와와 그의 능력을 구할지어다 그의 얼굴을 항상 구할지어다" },
      { date: "12월 8일", day: "화요일", reference: "잠언 22:1", verse: "명예는 많은 재물보다 낫고 은총은 금이나 은보다 더 나으니라" },
      { date: "12월 9일", day: "수요일", reference: "이사야 55:7", verse: "악인은 그 길을, 불의한 자는 그 생각을 버리고 여호와께로 돌아오라 그리하면 그가 긍휼히 여기시리라 우리 하나님께로 돌아오라 그가 너그럽게 용서하시리라" },
      { date: "12월 10일", day: "목요일", reference: "이사야 41:10", verse: "두려워하지 말라 내가 너와 함께 함이라 놀라지 말라 나는 네 하나님이 됨이라 내가 너를 굳세게 하리라 참으로 너를 도와 주리라 참으로 나의 의로운 오른손으로 너를 붙들리라" },
      { date: "12월 11일", day: "금요일", reference: "히브리서 10:23", verse: "또 약속하신 이는 미쁘시니 우리가 믿는 도리의 소망을 움직이지 말고 굳게 잡고" },
      { date: "12월 12일", day: "토요일", reference: "이사야 55:9", verse: "이는 하늘이 땅보다 높음 같이 내 길은 너희의 길보다 높으며 내 생각은 너희의 생각보다 높음이니라" },
      { date: "12월 13일", day: "주일", reference: "누가복음 2:11", verse: "오늘 다윗의 동네에 너희를 위하여 구주가 나셨으니 곧 그리스도 주시니라", theme: "구원자" },
      { date: "12월 14일", day: "월요일", reference: "시편 37:4", verse: "또 여호와를 기뻐하라 그가 네 마음의 소원을 네게 이루어 주시리로다" },
      { date: "12월 15일", day: "화요일", reference: "잠언 3:5-6", verse: "너는 마음을 다하여 여호와를 신뢰하고 네 명철을 의지하지 말라 너는 범사에 그를 인정하라 그리하면 네 길을 지도하시리라" },
      { date: "12월 16일", day: "수요일", reference: "시편 51:17", verse: "하나님께서 구하시는 제사는 상한 심령이라 하나님이여 상하고 통회하는 마음을 주께서 멸시하지 아니하시리이다" },
      { date: "12월 17일", day: "목요일", reference: "로마서 5:5", verse: "소망이 우리를 부끄럽게 하지 아니함은 우리에게 주신 성령으로 말미암아 하나님의 사랑이 우리 마음에 부은 바 됨이니" },
      { date: "12월 18일", day: "금요일", reference: "히브리서 10:23", verse: "또 약속하신 이는 미쁘시니 우리가 믿는 도리의 소망을 움직이지 말고 굳게 잡고" },
      { date: "12월 19일", day: "토요일", reference: "신명기 32:4", verse: "그는 반석이시니 그가 하신 일이 완전하고 그의 모든 길이 정의롭고 진실하고 거짓이 없으신 하나님이시니 공의로우시고 바르시도다" },
      { date: "12월 20일", day: "주일", reference: "마태복음 1:23", verse: "보라 처녀가 잉태하여 아들을 낳을 것이요 그의 이름은 임마누엘이라 하리라 하셨으니 이를 번역한즉 하나님이 우리와 함께 계시다 함이라", theme: "임마누엘" },
      { date: "12월 21일", day: "월요일", reference: "시편 96:1-2", verse: "새 노래로 여호와께 노래하라 온 땅이여 여호와께 노래할지어다 여호와께 노래하여 그의 이름을 찬송하며 그의 구원을 날마다 전파할지어다" },
      { date: "12월 22일", day: "화요일", reference: "에베소서 5:15-16", verse: "그런즉 너희가 어떻게 행할지를 자세히 주의하여 지혜 없는 자 같이 하지 말고 오직 지혜 있는 자 같이 하여 세월을 아끼라 때가 악하니라" },
      { date: "12월 23일", day: "수요일", reference: "누가복음 6:37", verse: "비판하지 말라 그리하면 너희가 비판을 받지 않을 것이요 정죄하지 말라 그리하면 너희가 정죄를 받지 않을 것이요 용서하라 그리하면 너희가 용서를 받을 것이요" },
      { date: "12월 24일", day: "목요일", reference: "고린도후서 4:18", verse: "우리가 주목하는 것은 보이는 것이 아니요 보이지 않는 것이니 보이는 것은 잠깐이요 보이지 않는 것은 영원함이라" },
      { date: "12월 25일", day: "금요일", reference: "요한복음 3:16", verse: "하나님이 세상을 이처럼 사랑하사 독생자를 주셨으니 이는 그를 믿는 자마다 멸망하지 않고 영생을 얻게 하려 하심이라", theme: "성탄절" },
      { date: "12월 26일", day: "토요일", reference: "요한일서 4:8", verse: "사랑하지 아니하는 자는 하나님을 알지 못하나니 이는 하나님은 사랑이심이라" },
      { date: "12월 27일", day: "주일", reference: "요한복음 8:12", verse: "예수께서 또 말씀하여 이르시되 나는 세상의 빛이니 나를 따르는 자는 어둠에 다니지 아니하고 생명의 빛을 얻으리라", theme: "빛" },
      { date: "12월 28일", day: "월요일", reference: "시편 100:4", verse: "감사함으로 그의 문에 들어가며 찬송함으로 그의 궁정에 들어가서 그에게 감사하며 그의 이름을 송축할지어다" },
      { date: "12월 29일", day: "화요일", reference: "로마서 12:2", verse: "너희는 이 세대를 본받지 말고 오직 마음을 새롭게 함으로 변화를 받아 하나님의 선하시고 기뻐하시고 온전하신 뜻이 무엇인지 분별하도록 하라" },
      { date: "12월 30일", day: "수요일", reference: "미가 7:19", verse: "다시 우리를 불쌍히 여기셔서 우리의 죄악을 발로 밟으시고 우리의 모든 죄를 깊은 바다에 던지시리이다" },
      { date: "12월 31일", day: "목요일", reference: "시편 46:1", verse: "하나님은 우리의 피난처시요 힘이시니 환난 중에 만날 큰 도움이시라" }
    ],
    "2025-12": [
      { date: "12월 1일", day: "월요일", reference: "시편 5:3", verse: "여호와여 아침에 주께서 나의 소리를 들으시리니 아침에 내가 주께 기도하고 바라리이다" },
      { date: "12월 2일", day: "화요일", reference: "마태복음 7:12", verse: "그러므로 무엇이든지 남에게 대접을 받고자 하는 대로 너희도 남을 대접하라 이것이 율법이요 선지자니라" },
      { date: "12월 3일", day: "수요일", reference: "시편 51:17", verse: "하나님께서 구하시는 제사는 상한 심령이라 하나님이여 상하고 통회하는 마음을 주께서 멸시하지 아니하시리이다" },
      { date: "12월 4일", day: "목요일", reference: "베드로전서 5:7", verse: "너희 염려를 다 주께 맡기라 이는 그가 너희를 돌보심이라" },
      { date: "12월 5일", day: "금요일", reference: "여호수아 1:8", verse: "이 율법책을 네 입에서 떠나지 말게 하며 주야로 그것을 묵상하여 그 안에 기록된 대로 다 지켜 행하라 그리하면 네 길이 평탄하게 될 것이며 네가 형통하리라" },
      { date: "12월 6일", day: "토요일", reference: "요한일서 4:10", verse: "사랑은 여기 있으니 우리가 하나님을 사랑한 것이 아니요 하나님이 우리를 사랑하사 우리 죄를 속하기 위하여 화목 제물로 그 아들을 보내셨음이라" },
      { date: "12월 7일", day: "주일", reference: "이사야 9:6", verse: "이는 한 아기가 우리에게 났고 한 아들을 우리에게 주신 바 되었는데 그의 어깨에는 정사를 메었고 그의 이름은 기묘자라, 모사라, 전능하신 하나님이라, 영존하시는 아버지라, 평강의 왕이라 할 것임이라", theme: "평강의 왕" },
      { date: "12월 8일", day: "월요일", reference: "에베소서 6:18", verse: "모든 기도와 간구를 하되 항상 성령 안에서 기도하고 이를 위하여 깨어 구하기를 항상 힘쓰며 여러 성도를 위하여 구하라" },
      { date: "12월 9일", day: "화요일", reference: "잠언 3:5-6", verse: "너는 마음을 다하여 여호와를 신뢰하고 네 명철을 의지하지 말라 너는 범사에 그를 인정하라 그리하면 네 길을 지도하시리라" },
      { date: "12월 10일", day: "수요일", reference: "요한일서 1:9", verse: "만일 우리가 우리 죄를 자백하면 그는 미쁘시고 의로우사 우리 죄를 사하시며 우리를 모든 불의에서 깨끗하게 하실 것이요" },
      { date: "12월 11일", day: "목요일", reference: "이사야 41:10", verse: "두려워하지 말라 내가 너와 함께 함이라 놀라지 말라 나는 네 하나님이 됨이라 내가 너를 굳세게 하리라 참으로 너를 도와 주리라 참으로 나의 의로운 오른손으로 너를 붙들리라" },
      { date: "12월 12일", day: "금요일", reference: "히브리서 11:1", verse: "믿음은 바라는 것들의 실상이요 보이지 않는 것들의 증거니" },
      { date: "12월 13일", day: "토요일", reference: "시편 103:8", verse: "여호와는 긍휼이 많으시고 은혜로우시며 노하기를 더디 하시고 인자하심이 풍부하시도다" },
      { date: "12월 14일", day: "주일", reference: "누가복음 2:10-11", verse: "천사가 이르되 무서워하지 말라 보라 내가 온 백성에게 미칠 큰 기쁨의 좋은 소식을 너희에게 전하노라 오늘 다윗의 동네에 너희를 위하여 구주 곧 그리스도 주께서 나셨으니", theme: "큰 기쁨의 소식" },
      { date: "12월 15일", day: "월요일", reference: "시편 150:6", verse: "호흡이 있는 자마다 여호와를 찬양할지어다 할렐루야" },
      { date: "12월 16일", day: "화요일", reference: "로마서 12:2", verse: "너희는 이 세대를 본받지 말고 오직 마음을 새롭게 함으로 변화를 받아 하나님의 선하시고 기뻐하시고 온전하신 뜻이 무엇인지 분별하도록 하라" },
      { date: "12월 17일", day: "수요일", reference: "예레미야애가 3:40", verse: "우리가 우리의 행위를 조사하고 살피며 여호와께로 돌아가자" },
      { date: "12월 18일", day: "목요일", reference: "요한복음 16:33", verse: "이것을 너희에게 이르는 것은 너희로 내 안에서 평안을 누리게 하려 함이라 세상에서는 너희가 환난을 당하나 담대하라 내가 세상을 이기었노라" },
      { date: "12월 19일", day: "금요일", reference: "사무엘상 15:22", verse: "여호와께서 번제와 다른 제사를 그의 목소리 순종하는 것을 좋아하심 같이 좋아하시겠나이까 순종이 제사보다 낫고 듣는 것이 숫양의 기름보다 나으니" },
      { date: "12월 20일", day: "토요일", reference: "고린도후서 1:3-4", verse: "찬송하리로다 그는 우리 주 예수 그리스도의 하나님이시요 자비의 아버지시요 모든 위로의 하나님이시며 우리의 모든 환난 중에서 우리를 위로하사 우리로 하여금 하나님께 받는 위로로써 모든 환난 중에 있는 자들을 능히 위로하게 하시는 이시로다" },
      { date: "12월 21일", day: "주일", reference: "마태복음 1:21", verse: "아들을 낳으리니 이름을 예수라 하라 이는 그가 자기 백성을 그들의 죄에서 구원할 자이심이라 하니라", theme: "구원자 예수" },
      { date: "12월 22일", day: "월요일", reference: "골로새서 4:2", verse: "기도를 계속하고 기도에 감사함으로 깨어 있으라" },
      { date: "12월 23일", day: "화요일", reference: "잠언 22:1", verse: "많은 재물보다 명예를 택할 것이요 은이나 금보다 은총을 더욱 택할 것이니라" },
      { date: "12월 24일", day: "수요일", reference: "로마서 6:23", verse: "죄의 삯은 사망이요 하나님의 은사는 그리스도 예수 우리 주 안에 있는 영생이니라" },
      { date: "12월 25일", day: "목요일", reference: "요한복음 3:16", verse: "하나님이 세상을 이처럼 사랑하사 독생자를 주셨으니 이는 그를 믿는 자마다 멸망하지 않고 영생을 얻게 하려 하심이라" },
      { date: "12월 26일", day: "금요일", reference: "하박국 2:4", verse: "보라 그의 마음은 교만하여 그 속에서 정직하지 못하나 의인은 그의 믿음으로 말미암아 살리라" },
      { date: "12월 27일", day: "토요일", reference: "신명기 32:4", verse: "그는 반석이시니 그가 하신 일이 완전하고 그의 모든 길이 정의롭고 진실하고 거짓이 없으신 하나님이시니 공의로우시고 바르시도다" },
      { date: "12월 28일", day: "주일", reference: "누가복음 2:14", verse: "지극히 높은 곳에서는 하나님께 영광이요 땅에서는 하나님이 기뻐하신 사람들 중에 평화로다", theme: "하나님께 영광" },
      { date: "12월 29일", day: "월요일", reference: "시편 100:4", verse: "감사함으로 그의 문에 들어가며 찬송함으로 그의 궁정에 들어가서 그에게 감사하며 그의 이름을 송축할지어다" },
      { date: "12월 30일", day: "화요일", reference: "디모데후서 2:15", verse: "너는 진리의 말씀을 옳게 분별하며 부끄러울 것이 없는 일꾼으로 인정된 자로 자신을 하나님 앞에 드리기를 힘쓰라" },
      { date: "12월 31일", day: "수요일", reference: "요엘 2:13", verse: "너희는 옷을 찢지 말고 마음을 찢고 너희 하나님 여호와께로 돌아올지어다 그는 은혜로우시며 자비로우시며 더디 노하시며 인애가 크시사 뜻을 돌이켜 재앙을 내리지 아니하시나니" }
    ],
    "2026-1": [
      { date: "1월 1일", day: "목요일", reference: "시편 90:12", verse: "우리에게 우리 날 계수함을 가르치사 지혜로운 마음을 얻게 하소서" },
      { date: "1월 2일", day: "금요일", reference: "마태복음 6:33", verse: "그런즉 너희는 먼저 그의 나라와 그의 의를 구하라 그리하면 이 모든 것을 너희에게 더하시리라" },
      { date: "1월 3일", day: "토요일", reference: "이사야 43:1", verse: "오직 너는 두려워하지 말라 내가 너를 구속하였고 내가 너를 지명하여 불렀나니 너는 내 것이라" },
      { date: "1월 4일", day: "주일", reference: "로마서 12:1", verse: "그러므로 형제들아 내가 하나님의 모든 자비하심으로 너희를 권하노니 너희 몸을 하나님이 기뻐하시는 거룩한 산 제물로 드리라 이는 너희가 드릴 영적 예배니라", theme: "예배와 헌신" },
      { date: "1월 5일", day: "월요일", reference: "시편 19:1", verse: "하늘이 하나님의 영광을 선포하고 궁창이 그의 손으로 하신 일을 나타내는도다" },
      { date: "1월 6일", day: "화요일", reference: "야고보서 4:7", verse: "그런즉 너희는 하나님께 복종할지어다 마귀를 대적하라 그리하면 너희를 피하리라" },
      { date: "1월 7일", day: "수요일", reference: "요한복음 14:6", verse: "예수께서 이르시되 내가 곧 길이요 진리요 생명이니 나로 말미암지 않고는 아버지께로 올 자가 없느니라" },
      { date: "1월 8일", day: "목요일", reference: "빌립보서 4:13", verse: "내게 능력 주시는 자 안에서 내가 모든 것을 할 수 있느니라" },
      { date: "1월 9일", day: "금요일", reference: "베드로전서 2:9", verse: "그러나 너희는 택하신 족속이요 왕 같은 제사장들이요 거룩한 나라요 그의 소유가 된 백성이니 이는 너희를 어두운 데서 불러내어 그의 기이한 빛에 들어가게 하신 이의 아름다운 덕을 선포하게 하려 하심이라" },
      { date: "1월 10일", day: "토요일", reference: "에베소서 4:32", verse: "서로 친절하게 하며 불쌍히 여기며 서로 용서하기를 하나님이 그리스도 안에서 너희를 용서하심과 같이 하라" },
      { date: "1월 11일", day: "주일", reference: "잠언 16:3", verse: "너의 행사를 여호와께 맡기라 그리하면 네가 경영하는 것이 이루어지리라", theme: "계획과 위탁" },
      { date: "1월 12일", day: "월요일", reference: "시편 1:2", verse: "오직 여호와의 율법을 즐거워하여 그의 율법을 주야로 묵상하는도다" },
      { date: "1월 13일", day: "화요일", reference: "로마서 8:28", verse: "우리가 알거니와 하나님을 사랑하는 자 곧 그의 뜻대로 부르심을 입은 자들에게는 모든 것이 합력하여 선을 이루느니라" },
      { date: "1월 14일", day: "수요일", reference: "역대하 7:14", verse: "내 이름으로 일컫는 내 백성이 그들의 악한 길에서 떠나 스스로 낮추고 기도하여 내 얼굴을 찾으면 내가 하늘에서 듣고 그들의 죄를 사하고 그들의 땅을 고칠지라" },
      { date: "1월 15일", day: "목요일", reference: "히브리서 4:16", verse: "그러므로 우리는 긍휼하심을 받고 때를 따라 돕는 은혜를 얻기 위하여 은혜의 보좌 앞에 담대히 나아갈 것이니라" },
      { date: "1월 16일", day: "금요일", reference: "여호수아 1:9", verse: "내가 네게 명령한 것이 아니냐 강하고 담대하라 두려워하지 말며 놀라지 말라 네가 어디로 가든지 네 하나님 여호와가 너와 함께 하느니라 하시니라" },
      { date: "1월 17일", day: "토요일", reference: "고린도전서 10:31", verse: "그런즉 너희가 먹든지 마시든지 무엇을 하든지 다 하나님의 영광을 위하여 하라" },
      { date: "1월 18일", day: "주일", reference: "요한복음 4:24", verse: "하나님은 영이시니 예배하는 자가 영과 진리로 예배할지니라", theme: "예배의 정신" },
      { date: "1월 19일", day: "월요일", reference: "시편 23:1", verse: "여호와는 나의 목자시니 내게 부족함이 없으리로다" },
      { date: "1월 20일", day: "화요일", reference: "마가복음 11:24", verse: "그러므로 내가 너희에게 말하노니 무엇이든지 기도하고 구하는 것은 받은 줄로 믿으라 그리하면 너희에게 그대로 되리라" },
      { date: "1월 21일", day: "수요일", reference: "예레미야 29:13", verse: "너희가 온 마음으로 나를 구하면 나를 찾을 것이요 나를 만나리라" },
      { date: "1월 22일", day: "목요일", reference: "디모데후서 1:7", verse: "하나님이 우리에게 주신 것은 두려워하는 마음이 아니요 오직 능력과 사랑과 절제하는 마음이니" },
      { date: "1월 23일", day: "금요일", reference: "잠언 18:10", verse: "여호와의 이름은 견고한 망대라 의인은 그리로 달려가서 안전함을 얻느니라" },
      { date: "1월 24일", day: "토요일", reference: "갈라디아서 6:9", verse: "우리가 선을 행하되 낙심하지 말지니 때가 되매 거두리라" },
      { date: "1월 25일", day: "주일", reference: "빌립보서 3:13-14", verse: "형제들아 나는 아직 내가 잡은 줄로 여기지 아니하고 오직 한 일 곧 뒤에 있는 것은 잊어버리고 앞에 있는 것을 잡으려고 푯대를 향하여 그리스도 예수 안에서 하나님이 위에서 부르신 부름의 상을 위하여 달려가노라", theme: "푯대를 향한 비전" },
      { date: "1월 26일", day: "월요일", reference: "시편 46:1", verse: "하나님은 우리의 피난처시요 힘이시니 환난 중에 만날 큰 도움이시라" },
      { date: "1월 27일", day: "화요일", reference: "디도서 3:5", verse: "우리를 구원하시되 우리가 행한 바 의로운 행위로 말미암지 아니하고 오직 그의 긍휼하심을 따라 중생의 씻음과 성령의 새롭게 하심으로 하셨나니" },
      { date: "1월 28일", day: "수요일", reference: "이사야 40:31", verse: "오직 여호와를 앙망하는 자는 새 힘을 얻으리니 독수리가 날개치며 올라감 같을 것이요 달음박질하여도 곤비하지 아니하겠고 걸어가도 피곤하지 아니하리로다" },
      { date: "1월 29일", day: "목요일", reference: "고린도후서 5:17", verse: "그런즉 누구든지 그리스도 안에 있으면 새로운 피조물이라 이전 것은 지나갔으니 보라 새 것이 되었도다" },
      { date: "1월 30일", day: "금요일", reference: "히브리서 12:1", verse: "이러므로 우리에게 구름 같이 둘러싼 허다한 증인들이 있으니 모든 무거운 것과 얽매이기 쉬운 죄를 벗어 버리고 인내로써 우리 앞에 당한 경주를 하며" },
      { date: "1월 31일", day: "토요일", reference: "골로새서 3:2", verse: "위엣 것을 생각하고 땅엣 것을 생각하지 말라" }
    ],
    "2026-2": [
      { date: "2월 1일", day: "주일", reference: "로마서 5:8", verse: "우리가 아직 죄인 되었을 때에 그리스도께서 우리를 위하여 죽으심으로 하나님께서 우리에 대한 자기의 사랑을 확증하셨느니라", theme: "하나님의 확증된 사랑" },
      { date: "2월 2일", day: "월요일", reference: "시편 103:1-2", verse: "내 영혼아 여호와를 송축하라 내 속에 있는 것들아 다 그의 거룩한 이름을 송축하라 내 영혼아 여호와를 송축하며 그의 모든 은택을 잊지 말지어다" },
      { date: "2월 3일", day: "화요일", reference: "디모데전서 4:8", verse: "육체의 연습은 약간의 유익이 있으나 경건은 범사에 유익하니 금생과 내생에 약속이 있느니라" },
      { date: "2월 4일", day: "수요일", reference: "이사야 55:7", verse: "악인은 그의 길을, 불의한 자는 그의 생각을 버리고 여호와께로 돌아오라 그리하면 그가 긍휼히 여기시리라 우리 하나님께로 돌아오라 그가 너그럽게 용서하시리라" },
      { date: "2월 5일", day: "목요일", reference: "마태복음 7:7-8", verse: "구하라 그리하면 너희에게 주실 것이요 찾으라 그리하면 찾아낼 것이요 문을 두드리라 그리하면 너희에게 열릴 것이니 구하는 이마다 받을 것이요 찾는 이는 찾아낼 것이요 두드리는 이에게는 열릴 것이니라" },
      { date: "2월 6일", day: "금요일", reference: "신명기 6:5", verse: "너는 마음을 다하고 뜻을 다하고 힘을 다하여 네 하나님 여호와를 사랑하라" },
      { date: "2월 7일", day: "토요일", reference: "로마서 10:17", verse: "그러므로 믿음은 들음에서 나며 들음은 그리스도의 말씀으로 말미암았느니라" },
      { date: "2월 8일", day: "주일", reference: "로마서 5:3-4", verse: "다만 이뿐 아니라 우리가 환난 중에도 즐거워하나니 이는 환난은 인내를, 인내는 연단을, 연단은 소망을 이루는 줄 앎이로다", theme: "환난 속의 인내" },
      { date: "2월 9일", day: "월요일", reference: "시편 119:105", verse: "주의 말씀은 내 발에 등이요 내 길에 빛이니이다" },
      { date: "2월 10일", day: "화요일", reference: "갈라디아서 5:22-23", verse: "오직 성령의 열매는 사랑과 희락과 화평과 오래 참음과 자비와 양선과 충성과 온유와 절제니 이같은 것을 금지할 법이 없느니라" },
      { date: "2월 11일", day: "수요일", reference: "에베소서 4:26-27", verse: "분을 내어도 죄를 짓지 말며 해가 지도록 분을 품지 말고 마귀에게 틈을 주지 말라" },
      { date: "2월 12일", day: "목요일", reference: "시편 37:4", verse: "또 여호와를 기뻐하라 그가 네 마음의 소원을 네게 이루어 주시리로다" },
      { date: "2월 13일", day: "금요일", reference: "예레미야 33:3", verse: "너는 내게 부르짖으라 내가 네게 응답하겠고 네가 알지 못하는 크고 은밀한 일을 네게 보이리라" },
      { date: "2월 14일", day: "토요일", reference: "요한일서 4:7", verse: "사랑하는 자들아 우리가 서로 사랑하자 사랑은 하나님께 속한 것이니 사랑하는 자마다 하나님으로부터 나서 하나님을 알고" },
      { date: "2월 15일", day: "주일", reference: "고린도전서 13:4-7", verse: "사랑은 오래 참고 사랑은 온유하며 시기하지 아니하며 사랑은 자랑하지 아니하며 교만하지 아니하며 무례히 행하지 아니하며 자기의 유익을 구하지 아니하며 성내지 아니하며 악한 것을 생각하지 아니하며 불의를 기뻐하지 아니하며 진리와 함께 기뻐하고 모든 것을 참으며 모든 것을 믿으며 모든 것을 바라며 모든 것을 견디느니라", theme: "사랑의 참된 모습" },
      { date: "2월 16일", day: "월요일", reference: "시편 118:24", verse: "이 날은 여호와께서 정하신 것이라 이 날에 우리가 즐거워하고 기뻐하리로다" },
      { date: "2월 17일", day: "화요일", reference: "고린도후서 12:9", verse: "나에게 이르시기를 내 은혜가 네게 족하도다 이는 내 능력이 약한 데서 온전하여짐이라 하신지라 그러므로 도리어 크게 기뻐함으로 나의 여러 약한 것들에 대하여 자랑하리니 이는 그리스도의 능력이 내게 머물게 하려 함이라" },
      { date: "2월 18일", day: "수요일", reference: "스바냐 3:17", verse: "너의 하나님 여호와가 너의 가운데 계시니 그는 구원을 베푸실 전능자이시라 그가 너로 말미암아 기쁨을 이기지 못하시며 너를 잠잠히 사랑하시며 너로 말미암아 즐거이 부르며 기뻐하시리라 하리라" },
      { date: "2월 19일", day: "목요일", reference: "히브리서 10:24-25", verse: "서로 돌아보아 사랑과 선행을 격려하며 모이기를 폐하는 어떤 사람들의 습관과 같이 하지 말고 오직 권하여 그 날이 가까움을 볼수록 더욱 그리하자" },
      { date: "2월 20일", day: "금요일", reference: "신명기 28:1", verse: "네가 네 하나님 여호와의 말씀을 삼가 듣고 내가 오늘 네게 명령하는 그의 모든 명령을 지켜 행하면 네 하나님 여호와께서 너를 세계 모든 민족 위에 뛰어나게 하실 것이라" },
      { date: "2월 21일", day: "토요일", reference: "마가복음 10:45", verse: "인자가 온 것은 섬김을 받으려 함이 아니라 도리어 섬기려 하고 자기 목숨을 많은 사람의 대속물로 주려 함이니라" },
      { date: "2월 22일", day: "주일", reference: "고린도전서 9:24", verse: "운동장에서 달음질하는 자들이 다 달아날지라도 오직 상을 받는 사람은 한 사람인 줄을 너희가 알지 못하느냐 너희도 상을 받도록 이와 같이 달음질하라", theme: "상을 향한 달음질" },
      { date: "2월 23일", day: "월요일", reference: "시편 91:4", verse: "그가 너를 그의 깃으로 덮으시리니 네가 그의 날개 아래에 피하리로다 그의 진실함은 방패와 손 방패가 되시나니" },
      { date: "2월 24일", day: "화요일", reference: "골로새서 3:15", verse: "그리스도의 평강이 너희 마음을 주장하게 하라 너희는 평강을 위하여 한 몸으로 부르심을 받았나니 너희는 또한 감사하는 자가 되라" },
      { date: "2월 25일", day: "수요일", reference: "이사야 53:5", verse: "그가 찔림은 우리의 허물 때문이요 그가 상함은 우리의 죄악 때문이라 그가 징계를 받으므로 우리는 평화를 누리고 그가 채찍에 맞으므로 우리는 나음을 받았도다" },
      { date: "2월 26일", day: "목요일", reference: "누가복음 6:37", verse: "비판하지 말라 그리하면 너희가 비판을 받지 않을 것이요 정죄하지 말라 그리하면 너희가 정죄를 받지 않을 것이요 용서하라 그리하면 너희가 용서를 받을 것이요" },
      { date: "2월 27일", day: "금요일", reference: "히브리서 13:5", verse: "돈을 사랑하지 말고 있는 바를 족한 줄로 알라 그가 친히 말씀하시기를 내가 결코 너희를 버리지 아니하고 너희를 떠나지 아니하리라 하셨느니라" },
      { date: "2월 28일", day: "토요일", reference: "요한복음 13:34", verse: "새 계명을 너희에게 주노니 서로 사랑하라 내가 너희를 사랑한 것 같이 너희도 서로 사랑하라" }
    ]
  };



  // 현재 월의 성경구절 가져오기
  const getScriptures = () => {
    const key = `${currentYear}-${currentMonth}`;
    return customScriptures[key] || defaultScripturesByMonth[key] || [];
  };

  // 해당 월의 1일이 무슨 요일인지 계산 (0: 일요일)
  const getFirstDayOfMonth = (year, month) => {
    return new Date(year, month - 1, 1).getDay();
  };

  // 해당 월의 마지막 날짜
  const getDaysInMonth = (year, month) => {
    return new Date(year, month, 0).getDate();
  };



  const handleAdminClick = () => {
    setPasswordInput('');
    setPasswordAction('menu');
    setShowPasswordModal(true);
  };

  const handlePasswordSubmit = () => {
    if (!adminPassword) {
      if (passwordInput.length >= 4) {
        setAdminPassword(passwordInput);
        window.storage.set('admin-password', passwordInput, true);
        alert('관리자 비밀번호가 설정되었습니다!');
        openAdminAction();
      } else {
        alert('비밀번호는 최소 4자 이상이어야 합니다.');
      }
    } else {
      if (passwordInput === adminPassword) {
        openAdminAction();
      } else {
        alert('비밀번호가 틀렸습니다.');
        setPasswordInput('');
      }
    }
  };

  const openAdminAction = () => {
    setShowPasswordModal(false);
    setPasswordInput('');
    if (passwordAction === 'menu') {
      setShowAdminMenu(true);
    } else if (passwordAction === 'sermon') {
      openSermonEdit();
    } else if (passwordAction === 'newMonth') {
      setShowNewMonthEditor(true);
    }
  };



  // 새 월 데이터 생성
  const generateNewMonthData = () => {
    const daysInMonth = getDaysInMonth(newMonthYear, newMonthMonth);
    const data = [];
    for (let day = 1; day <= daysInMonth; day++) {
      const dayOfWeek = getDayOfWeek(newMonthYear, newMonthMonth, day);
      data.push({
        date: `${newMonthMonth}월 ${day}일`,
        day: dayOfWeek,
        reference: '',
        verse: '',
        theme: dayOfWeek === '주일' ? '' : undefined
      });
    }
    setNewMonthData(data);
  };



  // 새 월 데이터 저장
  const saveNewMonthData = async () => {
    const emptyFields = newMonthData.filter(d => !d.reference || !d.verse);
    if (emptyFields.length > 0) {
      const proceed = window.confirm(`${emptyFields.length}개의 날짜에 빈 칸이 있습니다. 그래도 저장하시겠습니까?`);
      if (!proceed) return;
    }

    const key = `${newMonthYear}-${newMonthMonth}`;
    const newCustomScriptures = { ...customScriptures, [key]: newMonthData };
    setCustomScriptures(newCustomScriptures);
    
    try {
      await window.storage.set('custom-scriptures-yearly', JSON.stringify(newCustomScriptures), true);
      alert('저장되었습니다! 해당 월로 이동합니다.');
      setShowNewMonthEditor(false);
      setCurrentYear(newMonthYear);
      setCurrentMonth(newMonthMonth);
      
      // 저장 후 즉시 데이터 다시 로드
      const result = await window.storage.get('custom-scriptures-yearly', true);
      if (result) setCustomScriptures(JSON.parse(result.value));
      
      setCurrentIndex(0);
      setShowMonthly(true);
    } catch (error) {
      console.error('저장 실패:', error);
      alert('저장에 실패했습니다.');
    }
  };

  // 새 월 데이터 업데이트
  const updateNewMonthData = (index, field, value) => {
    const updated = [...newMonthData];
    updated[index] = { ...updated[index], [field]: value };
    setNewMonthData(updated);
  };

  // 주간 데이터 파싱 함수
  const parseWeeklyText = () => {
    if (!weeklyInputText.trim()) {
      alert('텍스트를 입력해주세요.');
      return;
    }

    const lines = weeklyInputText.split('\n').map(line => line.trim());
    const results = [];
    let currentEntry = null;

    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      
      // 빈 줄 스킵
      if (!line) continue;
      
      // 날짜 범위 패턴: "2025.12.22 - 27" 또는 "2025.12.22 - 12.27"
      const dateRangeMatch = line.match(/(\d{4})\.(\d{1,2})\.(\d{1,2})\s*-\s*(?:(\d{1,2})\.)?(\d{1,2})/);
      
      if (dateRangeMatch) {
        // 이전 항목 저장
        if (currentEntry && currentEntry.reference) {
          results.push(currentEntry);
        }
        
        const year = parseInt(dateRangeMatch[1]);
        const startMonth = parseInt(dateRangeMatch[2]);
        const startDay = parseInt(dateRangeMatch[3]);
        const endMonth = dateRangeMatch[4] ? parseInt(dateRangeMatch[4]) : startMonth;
        const endDay = parseInt(dateRangeMatch[5]);
        
        // 시작 날짜로 주차 계산
        const startDate = new Date(year, startMonth - 1, startDay);
        const weekInfo = getWeekInfo(startDate);
        
        currentEntry = {
          year: year,
          weekNumber: weekInfo.weekNumber,
          weekKey: weekInfo.weekKey,
          weekLabel: `${startMonth}/${startDay} ~ ${endMonth}/${endDay}`,
          dateRange: `${startMonth}/${startDay} ~ ${endMonth}/${endDay}`,
          reference: '',
          verse: ''
        };
      } else if (currentEntry && !currentEntry.reference) {
        // 성경 구절 참조 (예: 창세기 1:1-10)
        if (line.match(/[가-힣a-zA-Z]+\s*\d+:\d+/)) {
          currentEntry.reference = line;
        }
      } else if (currentEntry && currentEntry.reference) {
        // 본문
        currentEntry.verse += (currentEntry.verse ? ' ' : '') + line;
      }
    }

    // 마지막 항목 저장
    if (currentEntry && currentEntry.reference) {
      results.push(currentEntry);
    }

    if (results.length === 0) {
      alert('파싱된 데이터가 없습니다. 형식을 확인해주세요.\n\n예시:\n2025.12.22 - 27\n창세기 1:1-10\n태초에 하나님이...');
      return;
    }

    setParsedWeeklyData(results);
    alert(`${results.length}개의 주간 데이터가 파싱되었습니다!`);
  };

  // 주간 데이터 저장
  const saveWeeklyData = async () => {
    if (parsedWeeklyData.length === 0) {
      alert('저장할 데이터가 없습니다.');
      return;
    }

    const newWeeklyScriptures = { ...weeklyScriptures };
    
    parsedWeeklyData.forEach(data => {
      newWeeklyScriptures[data.weekKey] = {
        year: data.year,
        weekNumber: data.weekNumber,
        weekLabel: data.weekLabel,
        dateRange: data.dateRange,
        reference: data.reference,
        verse: data.verse
      };
    });

    setWeeklyScriptures(newWeeklyScriptures);
    
    try {
      // 저장 완료 상태 먼저 표시
      setWeeklySaved(true);
      
      await window.storage.set('weekly-scriptures-yearly', JSON.stringify(newWeeklyScriptures), true);
      
      // 1.5초 후 alert 표시 및 화면 전환
      setTimeout(async () => {
        alert(`✅ ${parsedWeeklyData.length}개 주간 데이터가 저장되었습니다!`);
        
        // 저장 후 즉시 데이터 다시 로드
        const result = await window.storage.get('weekly-scriptures-yearly', true);
        if (result) setWeeklyScriptures(JSON.parse(result.value));
        
        // 모든 화면 state 초기화
        setShowWeeklyInput(false);
        setShowMonthly(false);
        setShowList(false);
        setWeeklyInputText('');
        setParsedWeeklyData([]);
        setWeeklySaved(false);
        
        // 관리자 메뉴로 돌아가기
        setShowAdminMenu(true);
      }, 1500);
      
    } catch (error) {
      console.error('저장 실패:', error);
      alert('저장에 실패했습니다.');
      setWeeklySaved(false);
    }
  };

  // 파싱된 주간 데이터 수정
  const updateParsedWeeklyData = (index, field, value) => {
    const updated = [...parsedWeeklyData];
    updated[index] = { ...updated[index], [field]: value };
    setParsedWeeklyData(updated);
  };


  // 텍스트 파싱 함수 - 다양한 형식 지원
  const parseImportText = () => {
    if (!importText.trim()) {
      alert('텍스트를 입력해주세요.');
      return;
    }

    const lines = importText.split('\n').map(line => line.trim());
    const results = [];
    let currentEntry = null;
    let detectedMonth = null;

    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      
      // 빈 줄 스킵
      if (!line) continue;
      
      // 패턴 1: "O월 O일 성경구절 본문" (한 줄에 모두)
      const oneLine1 = line.match(/^(\d{1,2})\s*월\s*(\d{1,2})\s*일\s+(월요일|화요일|수요일|목요일|금요일|토요일|주일)?\s*([가-힣a-zA-Z]+\s*\d+\s*:\s*[\d\-~]+)\s+(.+)$/);
      
      // 패턴 2: "O월 O일 성경구절" (본문은 다음 줄)
      const oneLine2 = line.match(/^(\d{1,2})\s*월\s*(\d{1,2})\s*일\s+(월요일|화요일|수요일|목요일|금요일|토요일|주일)?\s*([가-힣a-zA-Z]+\s*\d+\s*:\s*[\d\-~]+)\s*$/);
      
      // 패턴 3: "O월 O일 요일" (성경구절과 본문은 다음 줄들)
      const dateOnly = line.match(/^(\d{1,2})\s*월\s*(\d{1,2})\s*일\s*(월요일|화요일|수요일|목요일|금요일|토요일|주일)?\s*$/);
      
      if (oneLine1) {
        // 패턴 1: 한 줄에 모두 있는 경우
        if (currentEntry && currentEntry.reference) {
          results.push(currentEntry);
        }
        
        const month = parseInt(oneLine1[1]);
        const day = parseInt(oneLine1[2]);
        const dayOfWeek = oneLine1[3] || getDayOfWeek(importYear, month, day);
        
        if (detectedMonth === null) {
          detectedMonth = month;
        }
        
        currentEntry = {
          date: `${month}월 ${day}일`,
          day: dayOfWeek,
          reference: oneLine1[4].trim(),
          verse: oneLine1[5].trim(),
          theme: dayOfWeek === '주일' ? '' : undefined
        };
        
      } else if (oneLine2) {
        // 패턴 2: 날짜와 성경구절만 한 줄 (본문은 다음 줄)
        if (currentEntry && currentEntry.reference) {
          results.push(currentEntry);
        }
        
        const month = parseInt(oneLine2[1]);
        const day = parseInt(oneLine2[2]);
        const dayOfWeek = oneLine2[3] || getDayOfWeek(importYear, month, day);
        
        if (detectedMonth === null) {
          detectedMonth = month;
        }
        
        currentEntry = {
          date: `${month}월 ${day}일`,
          day: dayOfWeek,
          reference: oneLine2[4].trim(),
          verse: '',
          theme: dayOfWeek === '주일' ? '' : undefined
        };
        
      } else if (dateOnly) {
        // 패턴 3: 날짜만 있는 경우 (기존 방식)
        if (currentEntry && currentEntry.reference) {
          results.push(currentEntry);
        }
        
        const month = parseInt(dateOnly[1]);
        const day = parseInt(dateOnly[2]);
        const dayOfWeek = dateOnly[3] || getDayOfWeek(importYear, month, day);
        
        if (detectedMonth === null) {
          detectedMonth = month;
        }
        
        currentEntry = {
          date: `${month}월 ${day}일`,
          day: dayOfWeek,
          reference: '',
          verse: '',
          theme: dayOfWeek === '주일' ? '' : undefined
        };
        
      } else if (currentEntry && !currentEntry.reference) {
        // 성경구절 파싱
        const scriptureMatch = line.match(/^([가-힣a-zA-Z]+\s*\d+\s*:\s*[\d\-~]+)\s+(.+)$/);
        
        if (scriptureMatch) {
          currentEntry.reference = scriptureMatch[1].trim();
          currentEntry.verse = scriptureMatch[2].trim();
        } else {
          currentEntry.reference = line;
        }
        
      } else if (currentEntry && currentEntry.reference && !currentEntry.verse) {
        // 본문 파싱
        currentEntry.verse = line;
        
      } else if (currentEntry && currentEntry.verse) {
        // 본문이 여러 줄인 경우
        currentEntry.verse += ' ' + line;
      }
    }

    // 마지막 항목 저장
    if (currentEntry && currentEntry.reference) {
      results.push(currentEntry);
    }

    if (results.length === 0) {
      alert('파싱된 데이터가 없습니다. 형식을 확인해주세요.\n\n지원 형식:\n1) 1월 1일 시편 23:1 여호와는...\n2) 1월 1일 시편 23:1\\n여호와는...\n3) 1월 1일\\n시편 23:1 여호와는...\n4) 1월 1일\\n시편 23:1\\n여호와는...');
      return;
    }

    // 감지된 월 설정
    if (detectedMonth !== null) {
      setImportMonth(detectedMonth);
    }

    setParsedData(results);
    alert(`${results.length}개의 항목이 파싱되었습니다!`);
  };

  // 파싱된 데이터 저장
  const saveImportedData = async () => {
    if (parsedData.length === 0) {
      alert('저장할 데이터가 없습니다.');
      return;
    }

    const key = `${importYear}-${importMonth}`;
    const newCustomScriptures = { ...customScriptures, [key]: parsedData };
    setCustomScriptures(newCustomScriptures);
    
    try {
      await window.storage.set('custom-scriptures-yearly', JSON.stringify(newCustomScriptures), true);
      alert(`${importYear}년 ${importMonth}월 데이터가 저장되었습니다! (${parsedData.length}일)`);
      
      // 저장 후 즉시 데이터 다시 로드
      const result = await window.storage.get('custom-scriptures-yearly', true);
      if (result) setCustomScriptures(JSON.parse(result.value));
      
      // 모든 화면 state 초기화
      setShowTextImport(false);
      setShowMonthly(false);
      setShowList(false);
      setCurrentYear(importYear);
      setCurrentMonth(importMonth);
      setCurrentIndex(0);
      setImportText('');
      setParsedData([]);
      
      // 관리자 메뉴로 돌아가기
      setShowAdminMenu(true);
    } catch (error) {
      console.error('저장 실패:', error);
      alert('저장에 실패했습니다.');
    }
  };

  // 파싱된 데이터 수정
  const updateParsedData = (index, field, value) => {
    const updated = [...parsedData];
    updated[index] = { ...updated[index], [field]: value };
    setParsedData(updated);
  };



  // 사용 가능한 모든 월 목록 가져오기
  const getAllAvailableMonths = () => {
    const months = new Set();
    
    // 기본 데이터
    Object.keys(defaultScripturesByMonth).forEach(key => months.add(key));
    
    // 커스텀 데이터
    Object.keys(customScriptures).forEach(key => {
      if (customScriptures[key] && customScriptures[key].length > 0) {
        months.add(key);
      }
    });
    
    return Array.from(months).sort((a, b) => {
      const [yearA, monthA] = a.split('-').map(Number);
      const [yearB, monthB] = b.split('-').map(Number);
      if (yearA !== yearB) return yearA - yearB;
      return monthA - monthB;
    });
  };



  // 이전 달로 이동
  const goToPrevMonth = () => {
    if (currentMonth === 1) {
      setCurrentYear(currentYear - 1);
      setCurrentMonth(12);
    } else {
      setCurrentMonth(currentMonth - 1);
    }
    setCurrentIndex(0);
  };

  // 다음 달로 이동
  const goToNextMonth = () => {
    if (currentMonth === 12) {
      setCurrentYear(currentYear + 1);
      setCurrentMonth(1);
    } else {
      setCurrentMonth(currentMonth + 1);
    }
    setCurrentIndex(0);
  };

  // 이전/다음 달 정보 가져오기
  const getPrevMonthInfo = () => {
    if (currentMonth === 1) {
      return { year: currentYear - 1, month: 12 };
    }
    return { year: currentYear, month: currentMonth - 1 };
  };

  const getNextMonthInfo = () => {
    if (currentMonth === 12) {
      return { year: currentYear + 1, month: 1 };
    }
    return { year: currentYear, month: currentMonth + 1 };
  };

  // 해당 월에 데이터가 있는지 확인
  const hasMonthData = (year, month) => {
    const key = `${year}-${month}`;
    return (customScriptures[key] && customScriptures[key].length > 0) || 
           (defaultScripturesByMonth[key] && defaultScripturesByMonth[key].length > 0);
  };

  // 요일 계산 함수
  const getDayOfWeek = (year, month, day) => {
    const days = ['주일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];
    const date = new Date(year, month - 1, day);
    return days[date.getDay()];
  };

  // 주차 계산 함수 (연 단위, 일요일 기준)
  const getWeekInfo = (date = new Date()) => {
    const d = new Date(date);
    const year = d.getFullYear();
    
    // 해당 년도의 1월 1일
    const jan1 = new Date(year, 0, 1);
    
    // 1월 1일의 요일
    const jan1Day = jan1.getDay(); // 0=일요일
    
    // 1월 1일이 속한 주의 일요일 찾기
    const firstSunday = new Date(jan1);
    if (jan1Day !== 0) {
      firstSunday.setDate(jan1.getDate() - jan1Day);
    }
    
    // 현재 날짜가 속한 주의 일요일
    const currentDay = d.getDay();
    const currentSunday = new Date(d);
    currentSunday.setDate(d.getDate() - currentDay);
    
    // 주차 계산
    const diffMs = currentSunday - firstSunday;
    const weekNumber = Math.floor(diffMs / (7 * 24 * 60 * 60 * 1000)) + 1;
    
    // 토요일 계산
    const saturday = new Date(currentSunday);
    saturday.setDate(currentSunday.getDate() + 6);
    
    return {
      year: year,
      weekNumber: weekNumber,
      weekKey: `${year}-W${String(weekNumber).padStart(2, '0')}`,
      weekLabel: `${year}년 ${weekNumber}주차`,
      startDate: currentSunday,
      endDate: saturday,
      dateRange: `${currentSunday.getMonth() + 1}/${currentSunday.getDate()} ~ ${saturday.getMonth() + 1}/${saturday.getDate()}`
    };
  };

  // 현재 주차 정보
  const getCurrentWeekInfo = () => {
    const koreaTime = new Date(new Date().toLocaleString('en-US', { timeZone: 'Asia/Seoul' }));
    return getWeekInfo(koreaTime);
  };

  // 특정 년월의 주차 정보 가져오기
  const getWeekInfoForDate = (year, month, day) => {
    const date = new Date(year, month - 1, day);
    return getWeekInfo(date);
  };

  const dayColors = {
    '주일': { bg: '#FF6B9D', light: '#FFE5EF', dark: '#E85A8C', contrast: '#FFFFFF', complement: '#6BFFC4' },
    '월요일': { bg: '#FFA07A', light: '#FFE8DF', dark: '#FF8A5B', contrast: '#FFFFFF', complement: '#7AC4FF' },
    '화요일': { bg: '#98D8C8', light: '#E8F7F3', dark: '#2D6A5A', contrast: '#FFFFFF', complement: '#D898A8' },
    '수요일': { bg: '#A8C5FF', light: '#E8F0FF', dark: '#3D5A99', contrast: '#FFFFFF', complement: '#FFC5A8' },
    '목요일': { bg: '#C9A0DC', light: '#F2E8F7', dark: '#7B4A99', contrast: '#FFFFFF', complement: '#A0DC9B' },
    '금요일': { bg: '#FFB347', light: '#FFF0E0', dark: '#CC7A00', contrast: '#FFFFFF', complement: '#478EFF' },
    '토요일': { bg: '#9b87f5', light: '#f0edff', dark: '#5A3FD6', contrast: '#FFFFFF', complement: '#F5E387' }
  };

  // 카운트 단계별 색상 (10개 단위)
  const getCountColor = (count) => {
    if (count === 0) return { bg: '#E5E7EB', text: '#9CA3AF' }; // 회색
    if (count < 10) return { bg: '#3B82F6', text: '#FFFFFF' }; // 파란색
    if (count < 20) return { bg: '#10B981', text: '#FFFFFF' }; // 초록색
    if (count < 30) return { bg: '#F59E0B', text: '#FFFFFF' }; // 주황색
    if (count < 40) return { bg: '#EF4444', text: '#FFFFFF' }; // 빨간색
    if (count < 50) return { bg: '#8B5CF6', text: '#FFFFFF' }; // 보라색
    return { bg: 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)', text: '#FFFFFF', isGradient: true }; // 금색 그라데이션
  };

  // 요일별 특별 항목 설정
  const daySpecificSections = {
    '주일': {
      icon: '📖',
      title: '일주일 묵상을 돌아보며',
      placeholder: '이번 주 일주일 묵상을 돌아보며 느낀 점을 기록해보세요.',
      useArray: true,
      additionalSections: [
        { icon: '🔍', title: '이번 주 하나님과의 이야기', placeholder: '이번 주 하나님과 나눈 이야기를 적어보세요.', color: '#e0f2fe', buttonColor: '#0284c7', dataKey: 'personQuestions' },
        { icon: '🪞', title: '남기고 싶은 메모', placeholder: '이번 주 특별히 남기고 싶은 내용을 메모하세요.', color: '#d1fae5', buttonColor: '#10b981', dataKey: 'godQuestions' },
        { icon: '✨', title: '오늘의 교회 생활', placeholder: '오늘 교회에서의 경험과 느낌을 적어보세요.', color: '#dbeafe', buttonColor: '#3b82f6', dataKey: 'freeQuestions' },
        { icon: '🤝', title: '다음 주 메모', placeholder: '다음 주를 준비하며 계획이나 기도제목을 적어보세요.', color: '#f3e8ff', buttonColor: '#a855f7', dataKey: 'memos2' }
      ]
    },
    '월요일': {
      icon: '📖',
      title: '성경 본문에 물어보기',
      placeholder: '오늘 성경 본문을 읽으며 궁금했던 점이 있나요? 본문에 대한 질문을 자유롭게 적어보세요.',
      useArray: true,
      additionalSections: [
        { icon: '👤', title: '성경 인물에 물어보기', placeholder: '성경 속 인물에게 궁금한 점을 물어보세요.', color: '#d1fae5', buttonColor: '#10b981' },
        { icon: '🙏', title: '하나님께 물어보기', placeholder: '하나님께 궁금한 것을 솔직하게 물어보세요.', color: '#dbeafe', buttonColor: '#3b82f6' },
        { icon: '💭', title: '자유롭게 물어보기', placeholder: '신앙생활이나 삶에 대해 자유롭게 질문해보세요.', color: '#f3e8ff', buttonColor: '#a855f7' }
      ]
    },
    '화요일': {
      icon: '👥',
      title: '인물 따라잡기 (따들물이)',
      placeholder: '본문에 나오는 인물은 누구인가요? 그들을 따라가며 배워보세요.',
      useArray: true,
      additionalSections: [
        { icon: '🎬', title: '상황 속으로', placeholder: '본문의 상황과 배경을 상상해보세요.', color: '#d1fae5', buttonColor: '#10b981' },
        { icon: '⏰', title: '시간 속으로', placeholder: '이 사건의 시간적 배경과 흐름을 파악해보세요.', color: '#dbeafe', buttonColor: '#3b82f6' },
        { icon: '📝', title: '메모', placeholder: '추가로 기록하고 싶은 내용을 자유롭게 적어보세요.', color: '#f3e8ff', buttonColor: '#a855f7' }
      ]
    },
    '수요일': {
      icon: '🔍',
      title: '성경 인물 나 찾기',
      placeholder: '본문 속 인물 중에서 나와 비슷한 모습을 찾아보세요.',
      useArray: true,
      additionalSections: [
        { icon: '🪞', title: '내 모습 발견하기', placeholder: '본문 속에서 나의 모습을 발견해보세요.', color: '#d1fae5', buttonColor: '#10b981' },
        { icon: '✨', title: '하나님 찾기', placeholder: '본문에서 하나님의 모습을 찾아보세요.', color: '#dbeafe', buttonColor: '#3b82f6' },
        { icon: '🤝', title: '관계 속 모습 찾기', placeholder: '본문 속 관계에서 배울 점을 찾아보세요.', color: '#f3e8ff', buttonColor: '#a855f7' }
      ]
    },
    '목요일': {
      icon: '✅',
      title: '내가 받아들여야 할 일',
      placeholder: '오늘 말씀을 통해 내가 실천하고 받아들여야 할 것은 무엇인가요?',
      useArray: true,
      additionalSections: [
        { icon: '🙏', title: '하나님께 기도로 전달하기', placeholder: '받아들인 것을 기도로 고백해보세요.', color: '#d1fae5', buttonColor: '#10b981' },
        { icon: '💬', title: '나에게 주시는 말씀(레마)', placeholder: '하나님께서 특별히 나에게 주시는 말씀은?', color: '#dbeafe', buttonColor: '#3b82f6' },
        { icon: '⚠️', title: '예상되는 장애물은?', placeholder: '실천하는데 어려움은 무엇이며, 어떻게 극복할까요?', color: '#f3e8ff', buttonColor: '#a855f7' }
      ]
    },
    '금요일': {
      icon: '🪞',
      title: '현재 나의 모습은? (나찾기)',
      placeholder: '지금 나의 영적 상태는 어떤가요? 솔직하게 나를 돌아보세요.',
      useArray: true,
      additionalSections: [
        { icon: '💬', title: '나에게 주시는 말씀은', placeholder: '오늘 하나님께서 나에게 특별히 주시는 말씀은?', color: '#d1fae5', buttonColor: '#10b981', dataKey: 'personQuestions' },
        { icon: '✨', title: '말씀을 적용했을 때의 모습은?', placeholder: '이 말씀을 삶에 적용하면 어떻게 변화될까요?', color: '#dbeafe', buttonColor: '#3b82f6', dataKey: 'godQuestions' },
        { icon: '⚠️', title: '예상되는 장애물은?', placeholder: '말씀 실천에 어려움은 무엇인가요?', color: '#f3e8ff', buttonColor: '#a855f7', dataKey: 'freeQuestions' },
        { icon: '🎯', title: 'UP Story', placeholder: '이번 주 나를 성장시킨 이야기를 나눠보세요.', color: '#fef3c7', buttonColor: '#f59e0b', dataKey: 'upStories' }
      ]
    },
    '토요일': {
      icon: '📝',
      title: '나눔 - 글로 나누기',
      placeholder: '이번 주 말씀을 글로 정리하고 나눠보세요.',
      useArray: true,
      additionalSections: [
        { icon: '💬', title: '나에게 말하며 나누기', placeholder: '나 자신에게 이번 주 말씀을 어떻게 나누고 싶은가요?', color: '#d1fae5', buttonColor: '#10b981' },
        { icon: '👥', title: '우리에게 나누기 (셀/유튜브...)', placeholder: '공동체와 어떻게 나눌까요?', color: '#dbeafe', buttonColor: '#3b82f6' },
        { icon: '⏳', title: '시간 / 역사에 나누기', placeholder: '이 말씀이 내 인생에서 어떤 의미가 될까요?', color: '#f3e8ff', buttonColor: '#a855f7' }
      ]
    }
  };

  const [currentIndex, setCurrentIndex] = useState(0);
  const [showList, setShowList] = useState(false);
  const [showMonthly, setShowMonthly] = useState(false);
  const [showAdminMenu, setShowAdminMenu] = useState(false);
  const [showNewMonthEditor, setShowNewMonthEditor] = useState(false);
  const [showTextImport, setShowTextImport] = useState(false);
  const [importText, setImportText] = useState('');
  const [parsedData, setParsedData] = useState([]);
  const [importYear, setImportYear] = useState(2026);
  const [importMonth, setImportMonth] = useState(3);
  const [newMonthYear, setNewMonthYear] = useState(2026);
  const [newMonthMonth, setNewMonthMonth] = useState(3);
  const [newMonthData, setNewMonthData] = useState([]);
  const [copied, setCopied] = useState(false);
  const [checkCounts, setCheckCounts] = useState({});
  const [memos, setMemos] = useState({});
  const [currentMemo, setCurrentMemo] = useState('');
  const [praises, setPraises] = useState({});
  const [currentPraises, setCurrentPraises] = useState([{ text: '' }]);
  const [thanks, setThanks] = useState({});
  const [currentThanks, setCurrentThanks] = useState([{ text: '' }]);
  const [prayers, setPrayers] = useState({});
  const [currentPrayers, setCurrentPrayers] = useState([{ text: '' }]);
  const [memos2, setMemos2] = useState({});
  const [currentMemos2, setCurrentMemos2] = useState([{ text: '' }]);
  const [sundayWords, setSundayWords] = useState({});
  const [currentSundayWords, setCurrentSundayWords] = useState([{ text: '' }]);
  const [personQuestions, setPersonQuestions] = useState({});
  const [currentPersonQuestions, setCurrentPersonQuestions] = useState([{ text: '' }]);
  const [godQuestions, setGodQuestions] = useState({});
  const [currentGodQuestions, setCurrentGodQuestions] = useState([{ text: '' }]);
  const [freeQuestions, setFreeQuestions] = useState({});
  const [currentFreeQuestions, setCurrentFreeQuestions] = useState([{ text: '' }]);
  const [upStories, setUpStories] = useState({});
  const [currentUpStories, setCurrentUpStories] = useState([{ text: '' }]);
  const [todos, setTodos] = useState({});
  const [currentTodos, setCurrentTodos] = useState([{ text: '', completed: false }]);
  const [adminPassword, setAdminPassword] = useState('');
  const [showPasswordModal, setShowPasswordModal] = useState(false);
  const [passwordInput, setPasswordInput] = useState('');
  const [passwordAction, setPasswordAction] = useState('menu');
  const [showDeleteMonth, setShowDeleteMonth] = useState(false);
  const [selectedDeleteKey, setSelectedDeleteKey] = useState('');
  const [deleteDebugInfo, setDeleteDebugInfo] = useState('');
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
  const [showStats, setShowStats] = useState(false);
  const [statsFilter, setStatsFilter] = useState('summary'); // summary, praise, thanks, prayer, todo
  const [showDataManager, setShowDataManager] = useState(false);
  const [showImportGuide, setShowImportGuide] = useState(false);
  const [showWeeklyInput, setShowWeeklyInput] = useState(false);
  const [exportMessage, setExportMessage] = useState('');
  const [importMessage, setImportMessage] = useState('');
  const [isExporting, setIsExporting] = useState(false);
  const [isImporting, setIsImporting] = useState(false);
  const [weeklyInputText, setWeeklyInputText] = useState('');
  const [parsedWeeklyData, setParsedWeeklyData] = useState([]);
  const [weeklySaved, setWeeklySaved] = useState(false);
  const [showWeeklyManager, setShowWeeklyManager] = useState(false);
  const [statsStartYear, setStatsStartYear] = useState(2026);
  const [statsStartMonth, setStatsStartMonth] = useState(1);
  const [statsStartDay, setStatsStartDay] = useState(1);
  const [statsEndYear, setStatsEndYear] = useState(2026);
  const [statsEndMonth, setStatsEndMonth] = useState(1);
  const [statsEndDay, setStatsEndDay] = useState(31);
  const [statsCopied, setStatsCopied] = useState(false);
  const [loading, setLoading] = useState(true);
  const [loadingProgress, setLoadingProgress] = useState(0);
  const [loadingMessage, setLoadingMessage] = useState('데이터 준비 중...');
  const [weekCopied, setWeekCopied] = useState(false);
  const [showPdfMenu, setShowPdfMenu] = useState(false);
  const [editSaved, setEditSaved] = useState(false);
  const [showSearch, setShowSearch] = useState(false);
  const [searchKeyword, setSearchKeyword] = useState('');
  const [searchResults, setSearchResults] = useState([]);
  const [showScriptureSearch, setShowScriptureSearch] = useState(false);
  const [scriptureSearchKeyword, setScriptureSearchKeyword] = useState('');
  const [scriptureSearchResults, setScriptureSearchResults] = useState([]);
  const [tags, setTags] = useState({});
  const [currentTags, setCurrentTags] = useState([]);
  const [tagInput, setTagInput] = useState('');
  const [allTags, setAllTags] = useState([]);
  const [selectedTags, setSelectedTags] = useState([]);

  // 성경구절 검색 함수 (AND/OR/NOT 지원)
  const performScriptureSearch = useCallback((keyword) => {
    if (!keyword || keyword.trim().length === 0) {
      setScriptureSearchResults([]);
      return;
    }
    
    console.log('🔍 성경구절 검색 시작:', keyword);
    
    const results = [];
    
    // 검색어 파싱
    let searchMode = 'AND'; // 기본 AND 모드
    let keywords = [];
    let excludeKeywords = [];
    
    if (keyword.includes('|')) {
      // OR 모드: "창세기 | 출애굽기"
      searchMode = 'OR';
      keywords = keyword.split('|').map(k => k.trim().toLowerCase()).filter(Boolean);
    } else {
      // AND 모드 또는 NOT 포함
      const words = keyword.split(/\s+/).filter(Boolean);
      keywords = words.filter(w => !w.startsWith('-')).map(w => w.toLowerCase());
      excludeKeywords = words.filter(w => w.startsWith('-')).map(w => w.substring(1).toLowerCase());
    }
    
    console.log('검색 모드:', searchMode);
    console.log('키워드:', keywords);
    console.log('제외 키워드:', excludeKeywords);
    
    // 1. 일별 성경구절 검색
    const allMonths = getAllAvailableMonths();
    
    allMonths.forEach(monthKey => {
      const [year, month] = monthKey.split('-');
      const monthScriptures = customScriptures[monthKey] || defaultScripturesByMonth[monthKey] || [];
      
      monthScriptures.forEach((scripture, index) => {
        // 성경구절과 본문 검색
        const searchableContent = [
          scripture.reference,
          scripture.verse
        ].join(' ').toLowerCase();
        
        // 제외 키워드 체크
        const hasExcluded = excludeKeywords.some(kw => searchableContent.includes(kw));
        if (hasExcluded) return;
        
        // AND/OR 검색
        let match = false;
        if (searchMode === 'OR') {
          match = keywords.some(kw => searchableContent.includes(kw));
        } else {
          match = keywords.every(kw => searchableContent.includes(kw));
        }
        
        if (match) {
          console.log(`✅ 일별 성경 매칭: ${year}년 ${scripture.date}`);
          results.push({
            type: 'daily',
            year: parseInt(year),
            month: parseInt(month),
            date: scripture.date,
            day: scripture.day,
            theme: scripture.theme,
            reference: scripture.reference,
            verse: scripture.verse,
            index: index
          });
        }
      });
    });
    
    // 2. 주간 본문 검색
    Object.entries(weeklyScriptures).forEach(([weekKey, weekly]) => {
      const searchableContent = [
        weekly.reference,
        weekly.verse
      ].join(' ').toLowerCase();
      
      // 제외 키워드 체크
      const hasExcluded = excludeKeywords.some(kw => searchableContent.includes(kw));
      if (hasExcluded) return;
      
      // AND/OR 검색
      let match = false;
      if (searchMode === 'OR') {
        match = keywords.some(kw => searchableContent.includes(kw));
      } else {
        match = keywords.every(kw => searchableContent.includes(kw));
      }
      
      if (match) {
        console.log(`✅ 주간 본문 매칭: ${weekly.weekLabel}`);
        results.push({
          type: 'weekly',
          weekKey: weekKey,
          weekLabel: weekly.weekLabel,
          dateRange: weekly.dateRange,
          year: weekly.year,
          weekNumber: weekly.weekNumber,
          reference: weekly.reference,
          verse: weekly.verse
        });
      }
    });
    
    console.log(`🎯 성경구절 검색 완료: ${results.length}개 결과`);
    setScriptureSearchResults(results);
  }, [customScriptures, defaultScripturesByMonth, weeklyScriptures]);
  
  // 성경구절 검색 결과 클릭 핸들러
  const handleScriptureSearchResultClick = (result) => {
    if (result.type === 'daily') {
      setCurrentYear(result.year);
      setCurrentMonth(result.month);
      setCurrentIndex(result.index);
      setShowScriptureSearch(false);
      setShowMonthly(false);
      setShowList(false);
    } else if (result.type === 'weekly') {
      // 주간 본문의 경우 해당 주의 첫 날(주일)로 이동
      // dateRange에서 시작 날짜 추출 (예: "12/22 ~ 27" 또는 "12.29 - 1.4")
      const dateMatch = result.dateRange.match(/(\d+)[./](\d+)/);
      if (dateMatch) {
        const startMonth = parseInt(dateMatch[1]);
        const startDay = parseInt(dateMatch[2]);
        
        // 해당 월의 데이터 찾기
        const monthKey = `${result.year}-${startMonth}`;
        const monthScriptures = customScriptures[monthKey] || defaultScripturesByMonth[monthKey] || [];
        
        // 해당 날짜 찾기
        const index = monthScriptures.findIndex(s => {
          const dayMatch = s.date.match(/(\d+)일/);
          return dayMatch && parseInt(dayMatch[1]) === startDay;
        });
        
        if (index >= 0) {
          setCurrentYear(result.year);
          setCurrentMonth(startMonth);
          setCurrentIndex(index);
          setShowScriptureSearch(false);
          setShowMonthly(false);
          setShowList(false);
        } else {
          alert('해당 날짜를 찾을 수 없습니다.');
        }
      }
    }
  };
  
  // 전체 검색 함수 - AND/OR/NOT 지원
  const performSearch = useCallback((keyword) => {
    if (!keyword || keyword.trim().length === 0) {
      setSearchResults([]);
      return;
    }
    
    console.log('🔍 검색 시작:', keyword);
    console.log('📊 현재 todos 데이터:', todos);
    
    const results = [];
    
    // 검색어 파싱
    let searchMode = 'AND'; // 기본 AND 모드
    let keywords = [];
    let excludeKeywords = [];
    
    if (keyword.includes('|')) {
      // OR 모드: "키워드1 | 키워드2"
      searchMode = 'OR';
      keywords = keyword.split('|').map(k => k.trim().toLowerCase()).filter(Boolean);
    } else {
      // AND 모드 또는 NOT 포함
      const words = keyword.split(/\s+/).filter(Boolean);
      keywords = words.filter(w => !w.startsWith('-')).map(w => w.toLowerCase());
      excludeKeywords = words.filter(w => w.startsWith('-')).map(w => w.substring(1).toLowerCase());
    }
    
    console.log('검색 모드:', searchMode);
    console.log('키워드:', keywords);
    console.log('제외 키워드:', excludeKeywords);
    
    // 모든 월의 데이터 검색
    const allMonths = getAllAvailableMonths();
    
    allMonths.forEach(monthKey => {
      const [year, month] = monthKey.split('-');
      const monthScriptures = customScriptures[monthKey] || defaultScripturesByMonth[monthKey] || [];
      
      monthScriptures.forEach((scripture, index) => {
        const key = `${year}-${month}-${scripture.date}`;
        
        // 해당 날짜의 요일별 섹션 정보 가져오기
        const daySection = daySpecificSections[scripture.day];
        
        // 모든 데이터 수집
        const memo = memos[key] || '';
        const sundayWord = sundayWords[key] || [];
        const personQuestion = personQuestions[key] || [];
        const godQuestion = godQuestions[key] || [];
        const freeQuestion = freeQuestions[key] || [];
        const upStory = upStories[key] || [];
        const praise = praises[key] || [];
        const thank = thanks[key] || [];
        const prayer = prayers[key] || [];
        const memo2 = memos2[key] || [];
        const todo = todos[key] || [];
        const dateTags = tags[key] || [];
        
        // 할일 내용 확인
        if (todo && todo.length > 0) {
          console.log(`✅ ${key} 할일:`, todo);
        }
        
        // 모든 내용을 하나의 검색 가능한 문자열로 결합
        const searchableContent = [
          scripture.date,
          scripture.day,
          scripture.theme || '',
          memo,
          ...sundayWord.map(w => w.text || ''),
          ...personQuestion.map(q => q.text || ''),
          ...godQuestion.map(q => q.text || ''),
          ...freeQuestion.map(q => q.text || ''),
          ...upStory.map(s => s.text || ''),
          ...praise.map(p => p.text || ''),
          ...thank.map(t => t.text || ''),
          ...prayer.map(p => p.text || ''),
          ...memo2.map(m => m.text || ''),
          ...todo.map(t => t.text || ''),
          ...dateTags
        ].join(' ').toLowerCase();
        
        // 제외 키워드 체크
        const hasExcluded = excludeKeywords.some(kw => searchableContent.includes(kw));
        if (hasExcluded) return;
        
        // AND/OR 검색
        let match = false;
        if (searchMode === 'OR') {
          match = keywords.some(kw => searchableContent.includes(kw));
        } else {
          match = keywords.every(kw => searchableContent.includes(kw));
        }
        
        if (match) {
          console.log(`✅ 매칭됨: ${key}`);
          results.push({
            year: parseInt(year),
            month: parseInt(month),
            date: scripture.date,
            day: scripture.day,
            theme: scripture.theme,
            index: index,
            key: key,
            daySection: daySection,
            hasMemo: memo.length > 0,
            memo: memo,
            hasSundayWord: sundayWord.some(w => w.text),
            hasPersonQuestion: personQuestion.some(q => q.text),
            hasGodQuestion: godQuestion.some(q => q.text),
            hasFreeQuestion: freeQuestion.some(q => q.text),
            hasUpStory: upStory.some(s => s.text),
            hasPraise: praise.some(p => p.text),
            hasThank: thank.some(t => t.text),
            hasPrayer: prayer.some(p => p.text),
            hasMemo2: memo2.some(m => m.text),
            hasTodo: todo.some(t => t.text),
            tags: dateTags
          });
        }
      });
    });
    
    console.log(`🎯 검색 완료: ${results.length}개 결과`);
    setSearchResults(results);
  }, [customScriptures, defaultScripturesByMonth, sundayWords, personQuestions, godQuestions, freeQuestions, upStories, praises, thanks, prayers, memos2, todos, tags]);
  
  // 검색 결과 클릭 핸들러
  const handleSearchResultClick = (result) => {
    setCurrentYear(result.year);
    setCurrentMonth(result.month);
    setCurrentIndex(result.index);
    setShowSearch(false);
    setShowMonthly(false);
    setShowList(false);
  };
  const scriptures = getScriptures();
  const currentCard = scriptures[currentIndex] || { date: '', day: '월요일', reference: '', verse: '' };
  const currentColor = dayColors[currentCard.day] || dayColors['월요일'];
  const currentCount = checkCounts[`${currentYear}-${currentMonth}-${currentCard.date}`] || 0;
  const currentCountColor = getCountColor(currentCount);
  
  // textarea 자동 높이 조절 함수
  const autoResizeTextarea = (e) => {
    e.target.style.height = 'auto';
    e.target.style.height = e.target.scrollHeight + 'px';
  };
  
  // 현재 날짜의 주간 정보
  const currentWeekInfo = getWeekInfoForDate(currentYear, currentMonth, 
    parseInt(currentCard.date.match(/(\d+)일/)?.[1] || 1));
  const currentWeekScripture = weeklyScriptures[currentWeekInfo.weekKey];

  useEffect(() => {
    loadChecks();
    loadTags();
  }, []);

  const loadTags = async () => {
    try {
      const result = await window.storage.get('scripture-tags-yearly');
      if (result) {
        const loadedTags = JSON.parse(result.value);
        setTags(loadedTags);
        // 모든 태그 목록 추출
        const uniqueTags = [...new Set(Object.values(loadedTags).flat())].sort();
        setAllTags(uniqueTags);
      }
    } catch (error) {
      console.error('태그 로딩 실패:', error);
    }
  };

  const saveTags = async (newTags) => {
    setTags(newTags);
    try {
      await window.storage.set('scripture-tags-yearly', JSON.stringify(newTags));
      // 모든 태그 목록 업데이트
      const uniqueTags = [...new Set(Object.values(newTags).flat())].sort();
      setAllTags(uniqueTags);
    } catch (error) {
      console.error('태그 저장 실패:', error);
    }
  };

  useEffect(() => {
    // 현재 카드가 유효하지 않으면 리턴
    if (!currentCard || !currentCard.date) return;
    
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    
    // 메모 초기화
    setCurrentMemo(memos[key] || '');
    
    // 태그 초기화
    setCurrentTags(tags[key] || []);
    setTagInput('');
    
    // 찬송 초기화
    const savedPraises = praises[key];
    if (savedPraises && savedPraises.length > 0) {
      setCurrentPraises(savedPraises);
    } else {
      setCurrentPraises([{ text: '' }]);
    }
    
    const savedSundayWords = sundayWords[key];
    if (savedSundayWords && savedSundayWords.length > 0) {
      setCurrentSundayWords(savedSundayWords);
    } else {
      setCurrentSundayWords([{ text: '' }]);
    }
    
    const savedPersonQuestions = personQuestions[key];
    if (savedPersonQuestions && savedPersonQuestions.length > 0) {
      setCurrentPersonQuestions(savedPersonQuestions);
    } else {
      setCurrentPersonQuestions([{ text: '' }]);
    }
    
    const savedGodQuestions = godQuestions[key];
    if (savedGodQuestions && savedGodQuestions.length > 0) {
      setCurrentGodQuestions(savedGodQuestions);
    } else {
      setCurrentGodQuestions([{ text: '' }]);
    }
    
    const savedFreeQuestions = freeQuestions[key];
    if (savedFreeQuestions && savedFreeQuestions.length > 0) {
      setCurrentFreeQuestions(savedFreeQuestions);
    } else {
      setCurrentFreeQuestions([{ text: '' }]);
    }
    
    const savedUpStories = upStories[key];
    if (savedUpStories && savedUpStories.length > 0) {
      setCurrentUpStories(savedUpStories);
    } else {
      setCurrentUpStories([{ text: '' }]);
    }
    
    const savedThanks = thanks[key];
    if (savedThanks && savedThanks.length > 0) {
      setCurrentThanks(savedThanks);
    } else {
      setCurrentThanks([{ text: '' }]);
    }
    
    const savedPrayers = prayers[key];
    if (savedPrayers && savedPrayers.length > 0) {
      setCurrentPrayers(savedPrayers);
    } else {
      setCurrentPrayers([{ text: '' }]);
    }
    
    const savedMemos2 = memos2[key];
    if (savedMemos2 && savedMemos2.length > 0) {
      setCurrentMemos2(savedMemos2);
    } else {
      setCurrentMemos2([{ text: '' }]);
    }
    
    const savedTodos = todos[key];
    if (savedTodos && savedTodos.length > 0) {
      setCurrentTodos(savedTodos);
    } else {
      setCurrentTodos([{ text: '', completed: false }]);
    }
    
    // 데이터 로드 후 모든 textarea 높이 자동 조절
    setTimeout(() => {
      document.querySelectorAll('textarea').forEach(textarea => {
        textarea.style.height = 'auto';
        textarea.style.height = textarea.scrollHeight + 'px';
      });
    }, 50);
  }, [currentIndex, currentYear, currentMonth, memos, praises, sundayWords, personQuestions, godQuestions, freeQuestions, upStories, thanks, prayers, memos2, todos]);

  // 월이 변경될 때마다 오늘 날짜로 자동 이동 (초기 로딩 시에만)
  useEffect(() => {
    if (!loading) {
      const today = getTodayInfo();
      // 앱이 처음 로딩될 때 오늘 날짜의 월로 이동
      setCurrentYear(today.year);
      setCurrentMonth(today.month);
      
      const scriptures = getScriptures();
      if (scriptures.length > 0) {
        const todayIndex = scriptures.findIndex(s => {
          // "12월 13일"에서 "일" 앞의 숫자만 추출
          const match = s.date.match(/(\d+)일/);
          if (match) {
            const day = parseInt(match[1]);
            return day === today.day;
          }
          return false;
        });
        if (todayIndex >= 0) {
          setCurrentIndex(todayIndex);
        }
      }
    }
  }, [loading]);

  const loadChecks = async () => {
    try {
      // Phase 1: 필수 데이터만 먼저 로드 (체감 속도 개선)
      setLoadingProgress(10);
      setLoadingMessage('필수 데이터 로딩 중...');
      
      const [checksResult, scriptureResult, weeklyResult] = await Promise.all([
        window.storage.get('scripture-checks-yearly').catch(() => null),
        window.storage.get('custom-scriptures-yearly', true).catch(() => null),
        window.storage.get('weekly-scriptures-yearly', true).catch(() => null)
      ]);
      
      setLoadingProgress(40);
      
      if (checksResult) setCheckCounts(JSON.parse(checksResult.value));
      if (scriptureResult) setCustomScriptures(JSON.parse(scriptureResult.value));
      if (weeklyResult) setWeeklyScriptures(JSON.parse(weeklyResult.value));
      
      setLoadingProgress(60);
      setLoadingMessage('화면 준비 중...');
      
      // 필수 데이터 로드 완료 - 화면 먼저 표시
      setLoadingProgress(100);
      setLoading(false);
      
      // Phase 2: 나머지 데이터는 백그라운드에서 로드
      loadSecondaryData();
      
    } catch (error) { 
      console.error('필수 데이터 로딩 실패:', error);
      setLoading(false);
    }
  };
  
  // Phase 2: 나머지 데이터 병렬 로딩
  const loadSecondaryData = async () => {
    try {
      const [
        memoResult,
        praiseResult,
        sundayResult,
        personResult,
        godResult,
        freeResult,
        upStoryResult,
        thankResult,
        prayerResult,
        memo2Result,
        todoResult,
        passwordResult
      ] = await Promise.all([
        window.storage.get('scripture-memos-yearly').catch(() => null),
        window.storage.get('scripture-praises-yearly').catch(() => null),
        window.storage.get('scripture-sunday-words-yearly').catch(() => null),
        window.storage.get('scripture-person-questions-yearly').catch(() => null),
        window.storage.get('scripture-god-questions-yearly').catch(() => null),
        window.storage.get('scripture-free-questions-yearly').catch(() => null),
        window.storage.get('scripture-up-stories-yearly').catch(() => null),
        window.storage.get('scripture-thanks-yearly').catch(() => null),
        window.storage.get('scripture-prayers-yearly').catch(() => null),
        window.storage.get('scripture-memos2-yearly').catch(() => null),
        window.storage.get('scripture-todos-yearly').catch(() => null),
        window.storage.get('admin-password', true).catch(() => null)
      ]);
      
      if (memoResult) setMemos(JSON.parse(memoResult.value));
      if (praiseResult) setPraises(JSON.parse(praiseResult.value));
      if (sundayResult) setSundayWords(JSON.parse(sundayResult.value));
      if (personResult) setPersonQuestions(JSON.parse(personResult.value));
      if (godResult) setGodQuestions(JSON.parse(godResult.value));
      if (freeResult) setFreeQuestions(JSON.parse(freeResult.value));
      if (upStoryResult) setUpStories(JSON.parse(upStoryResult.value));
      if (thankResult) setThanks(JSON.parse(thankResult.value));
      if (prayerResult) setPrayers(JSON.parse(prayerResult.value));
      if (memo2Result) setMemos2(JSON.parse(memo2Result.value));
      if (todoResult) setTodos(JSON.parse(todoResult.value));
      if (passwordResult) setAdminPassword(passwordResult.value);
      
      console.log('✅ 모든 데이터 로딩 완료');
    } catch (error) {
      console.error('보조 데이터 로딩 실패:', error);
    }
  };

  const saveChecks = async (newCounts) => {
    setCheckCounts(newCounts);
    try {
      await window.storage.set('scripture-checks-yearly', JSON.stringify(newCounts));
    } catch (error) { 
      console.error('읊조리기 횟수 저장 실패:', error);
      alert('⚠️ 데이터 저장에 실패했습니다. 브라우저 저장소를 확인해주세요.');
    }
  };

  // 디바운싱을 위한 타이머 ref
  const memoTimerRef = useRef(null);
  const praiseTimerRef = useRef(null);
  const thankTimerRef = useRef(null);
  const prayerTimerRef = useRef(null);
  const memo2TimerRef = useRef(null);
  const todoTimerRef = useRef(null);

  const saveMemo = async (memo) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const newMemos = { ...memos, [key]: memo };
    setMemos(newMemos);
    
    // 디바운싱: 500ms 후에 저장
    if (memoTimerRef.current) clearTimeout(memoTimerRef.current);
    memoTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-memos-yearly', JSON.stringify(newMemos));
        console.log('메모 저장 완료');
      } catch (error) { console.error('메모 저장 실패:', error); }
    }, 500);
  };

  const handleMemoChange = (e) => {
    const value = e.target.value;
    setCurrentMemo(value);
    saveMemo(value);
  };

  const savePraise = async (newPraises) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allPraises = { ...praises, [key]: newPraises };
    setPraises(allPraises);
    
    if (praiseTimerRef.current) clearTimeout(praiseTimerRef.current);
    praiseTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-praises-yearly', JSON.stringify(allPraises));
        console.log('찬송 저장 완료');
      } catch (error) { console.error('찬송 저장 실패:', error); }
    }, 500);
  };

  const handlePraiseChange = (index, value) => {
    const newPraises = [...currentPraises];
    newPraises[index] = { text: value };
    setCurrentPraises(newPraises);
    savePraise(newPraises);
  };

  const addPraise = () => {
    const newPraises = [...currentPraises, { text: '' }];
    setCurrentPraises(newPraises);
    savePraise(newPraises);
  };

  const removePraise = (index) => {
    if (currentPraises.length > 1) {
      const newPraises = currentPraises.filter((_, i) => i !== index);
      setCurrentPraises(newPraises);
      savePraise(newPraises);
    }
  };

  const saveSundayWord = async (newSundayWords) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allSundayWords = { ...sundayWords, [key]: newSundayWords };
    setSundayWords(allSundayWords);
    
    if (thankTimerRef.current) clearTimeout(thankTimerRef.current);
    thankTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-sunday-words-yearly', JSON.stringify(allSundayWords));
        console.log('주일 말씀 저장 완료');
      } catch (error) { console.error('주일 말씀 저장 실패:', error); }
    }, 500);
  };

  const handleSundayWordChange = (index, value) => {
    const newSundayWords = [...currentSundayWords];
    newSundayWords[index] = { text: value };
    setCurrentSundayWords(newSundayWords);
    saveSundayWord(newSundayWords);
  };

  const addSundayWord = () => {
    const newSundayWords = [...currentSundayWords, { text: '' }];
    setCurrentSundayWords(newSundayWords);
    saveSundayWord(newSundayWords);
  };

  const removeSundayWord = (index) => {
    if (currentSundayWords.length > 1) {
      const newSundayWords = currentSundayWords.filter((_, i) => i !== index);
      setCurrentSundayWords(newSundayWords);
      saveSundayWord(newSundayWords);
    }
  };

  const savePersonQuestion = async (newQuestions) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allQuestions = { ...personQuestions, [key]: newQuestions };
    setPersonQuestions(allQuestions);
    
    if (thankTimerRef.current) clearTimeout(thankTimerRef.current);
    thankTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-person-questions-yearly', JSON.stringify(allQuestions));
        console.log('성경 인물 질문 저장 완료');
      } catch (error) { console.error('성경 인물 질문 저장 실패:', error); }
    }, 500);
  };

  const handlePersonQuestionChange = (index, value) => {
    const newQuestions = [...currentPersonQuestions];
    newQuestions[index] = { text: value };
    setCurrentPersonQuestions(newQuestions);
    savePersonQuestion(newQuestions);
  };

  const addPersonQuestion = () => {
    const newQuestions = [...currentPersonQuestions, { text: '' }];
    setCurrentPersonQuestions(newQuestions);
    savePersonQuestion(newQuestions);
  };

  const removePersonQuestion = (index) => {
    if (currentPersonQuestions.length > 1) {
      const newQuestions = currentPersonQuestions.filter((_, i) => i !== index);
      setCurrentPersonQuestions(newQuestions);
      savePersonQuestion(newQuestions);
    }
  };

  const saveGodQuestion = async (newQuestions) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allQuestions = { ...godQuestions, [key]: newQuestions };
    setGodQuestions(allQuestions);
    
    if (thankTimerRef.current) clearTimeout(thankTimerRef.current);
    thankTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-god-questions-yearly', JSON.stringify(allQuestions));
        console.log('하나님께 질문 저장 완료');
      } catch (error) { console.error('하나님께 질문 저장 실패:', error); }
    }, 500);
  };

  const handleGodQuestionChange = (index, value) => {
    const newQuestions = [...currentGodQuestions];
    newQuestions[index] = { text: value };
    setCurrentGodQuestions(newQuestions);
    saveGodQuestion(newQuestions);
  };

  const addGodQuestion = () => {
    const newQuestions = [...currentGodQuestions, { text: '' }];
    setCurrentGodQuestions(newQuestions);
    saveGodQuestion(newQuestions);
  };

  const removeGodQuestion = (index) => {
    if (currentGodQuestions.length > 1) {
      const newQuestions = currentGodQuestions.filter((_, i) => i !== index);
      setCurrentGodQuestions(newQuestions);
      saveGodQuestion(newQuestions);
    }
  };

  const saveFreeQuestion = async (newQuestions) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allQuestions = { ...freeQuestions, [key]: newQuestions };
    setFreeQuestions(allQuestions);
    
    if (thankTimerRef.current) clearTimeout(thankTimerRef.current);
    thankTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-free-questions-yearly', JSON.stringify(allQuestions));
        console.log('자유 질문 저장 완료');
      } catch (error) { console.error('자유 질문 저장 실패:', error); }
    }, 500);
  };

  const saveUpStory = async (newStories) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allStories = { ...upStories, [key]: newStories };
    setUpStories(allStories);
    
    if (thankTimerRef.current) clearTimeout(thankTimerRef.current);
    thankTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-up-stories-yearly', JSON.stringify(allStories));
        console.log('UP Story 저장 완료');
      } catch (error) { console.error('UP Story 저장 실패:', error); }
    }, 500);
  };

  const handleFreeQuestionChange = (index, value) => {
    const newQuestions = [...currentFreeQuestions];
    newQuestions[index] = { text: value };
    setCurrentFreeQuestions(newQuestions);
    saveFreeQuestion(newQuestions);
  };

  const addFreeQuestion = () => {
    const newQuestions = [...currentFreeQuestions, { text: '' }];
    setCurrentFreeQuestions(newQuestions);
    saveFreeQuestion(newQuestions);
  };

  const removeFreeQuestion = (index) => {
    if (currentFreeQuestions.length > 1) {
      const newQuestions = currentFreeQuestions.filter((_, i) => i !== index);
      setCurrentFreeQuestions(newQuestions);
      saveFreeQuestion(newQuestions);
    }
  };

  const saveThank = async (newThanks) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allThanks = { ...thanks, [key]: newThanks };
    setThanks(allThanks);
    
    if (thankTimerRef.current) clearTimeout(thankTimerRef.current);
    thankTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-thanks-yearly', JSON.stringify(allThanks));
        console.log('감사 저장 완료');
      } catch (error) { console.error('감사 저장 실패:', error); }
    }, 500);
  };

  const handleThankChange = (index, value) => {
    const newThanks = [...currentThanks];
    newThanks[index] = { text: value };
    setCurrentThanks(newThanks);
    saveThank(newThanks);
  };

  const addThank = () => {
    const newThanks = [...currentThanks, { text: '' }];
    setCurrentThanks(newThanks);
    saveThank(newThanks);
  };

  const removeThank = (index) => {
    if (currentThanks.length > 1) {
      const newThanks = currentThanks.filter((_, i) => i !== index);
      setCurrentThanks(newThanks);
      saveThank(newThanks);
    }
  };

  const savePrayer = async (newPrayers) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allPrayers = { ...prayers, [key]: newPrayers };
    setPrayers(allPrayers);
    
    if (prayerTimerRef.current) clearTimeout(prayerTimerRef.current);
    prayerTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-prayers-yearly', JSON.stringify(allPrayers));
        console.log('기도 저장 완료');
      } catch (error) { console.error('기도 저장 실패:', error); }
    }, 500);
  };

  const handlePrayerChange = (index, value) => {
    const newPrayers = [...currentPrayers];
    newPrayers[index] = { text: value };
    setCurrentPrayers(newPrayers);
    savePrayer(newPrayers);
  };

  const addPrayer = () => {
    const newPrayers = [...currentPrayers, { text: '' }];
    setCurrentPrayers(newPrayers);
    savePrayer(newPrayers);
  };

  const removePrayer = (index) => {
    if (currentPrayers.length > 1) {
      const newPrayers = currentPrayers.filter((_, i) => i !== index);
      setCurrentPrayers(newPrayers);
      savePrayer(newPrayers);
    }
  };

  const saveMemo2 = async (newMemos2) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allMemos2 = { ...memos2, [key]: newMemos2 };
    setMemos2(allMemos2);
    
    if (memo2TimerRef.current) clearTimeout(memo2TimerRef.current);
    memo2TimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-memos2-yearly', JSON.stringify(allMemos2));
        console.log('오늘의메모 저장 완료');
      } catch (error) { console.error('오늘의메모 저장 실패:', error); }
    }, 500);
  };

  const handleMemo2Change = (index, value) => {
    const newMemos2 = [...currentMemos2];
    newMemos2[index] = { text: value };
    setCurrentMemos2(newMemos2);
    saveMemo2(newMemos2);
  };

  const addMemo2 = () => {
    const newMemos2 = [...currentMemos2, { text: '' }];
    setCurrentMemos2(newMemos2);
    saveMemo2(newMemos2);
  };

  const removeMemo2 = (index) => {
    if (currentMemos2.length > 1) {
      const newMemos2 = currentMemos2.filter((_, i) => i !== index);
      setCurrentMemos2(newMemos2);
      saveMemo2(newMemos2);
    }
  };

  const saveTodos = async (newTodos) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const allTodos = { ...todos, [key]: newTodos };
    setTodos(allTodos);
    
    if (todoTimerRef.current) clearTimeout(todoTimerRef.current);
    todoTimerRef.current = setTimeout(async () => {
      try {
        await window.storage.set('scripture-todos-yearly', JSON.stringify(allTodos));
        console.log('할일 저장 완료');
      } catch (error) { console.error('할 일 저장 실패:', error); }
    }, 500);
  };

  const handleTodoChange = (index, value) => {
    const newTodos = [...currentTodos];
    newTodos[index] = { ...newTodos[index], text: value };
    setCurrentTodos(newTodos);
    saveTodos(newTodos);
  };

  const handleTodoToggle = (index) => {
    const newTodos = [...currentTodos];
    newTodos[index] = { ...newTodos[index], completed: !newTodos[index].completed };
    setCurrentTodos(newTodos);
    saveTodos(newTodos);
  };

  const addTodo = () => {
    const newTodos = [...currentTodos, { text: '', completed: false }];
    setCurrentTodos(newTodos);
    saveTodos(newTodos);
  };

  const removeTodo = (index) => {
    if (currentTodos.length > 1) {
      const newTodos = currentTodos.filter((_, i) => i !== index);
      setCurrentTodos(newTodos);
      saveTodos(newTodos);
    }
  };

  const addTag = () => {
    if (!tagInput.trim()) return;
    
    const newTag = tagInput.trim();
    if (currentTags.includes(newTag)) {
      alert('이미 추가된 태그입니다.');
      return;
    }
    
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const newTags = [...currentTags, newTag];
    setCurrentTags(newTags);
    setTagInput('');
    
    const allNewTags = { ...tags, [key]: newTags };
    saveTags(allNewTags);
  };

  const removeTag = (tagToRemove) => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const newTags = currentTags.filter(t => t !== tagToRemove);
    setCurrentTags(newTags);
    
    const allNewTags = { ...tags, [key]: newTags };
    saveTags(allNewTags);
  };

  const filterByTags = (selectedTags) => {
    if (selectedTags.length === 0) {
      setSearchResults([]);
      return;
    }
    
    const results = [];
    const allMonths = getAllAvailableMonths();
    
    allMonths.forEach(monthKey => {
      const [year, month] = monthKey.split('-');
      const monthScriptures = customScriptures[monthKey] || defaultScripturesByMonth[monthKey] || [];
      
      monthScriptures.forEach((scripture, index) => {
        const key = `${year}-${month}-${scripture.date}`;
        const dateTags = tags[key] || [];
        
        // 선택된 태그 중 하나라도 포함되면 결과에 추가
        const hasTag = selectedTags.some(st => dateTags.includes(st));
        
        if (hasTag) {
          const daySection = daySpecificSections[scripture.day];
          const memo = memos[key] || '';
          const sundayWord = sundayWords[key] || [];
          const personQuestion = personQuestions[key] || [];
          const godQuestion = godQuestions[key] || [];
          const freeQuestion = freeQuestions[key] || [];
          const upStory = upStories[key] || [];
          const praise = praises[key] || [];
          const thank = thanks[key] || [];
          const prayer = prayers[key] || [];
          const memo2 = memos2[key] || [];
          const todo = todos[key] || [];
          
          results.push({
            year: parseInt(year),
            month: parseInt(month),
            date: scripture.date,
            day: scripture.day,
            theme: scripture.theme,
            index: index,
            key: key,
            daySection: daySection,
            hasMemo: memo.length > 0,
            memo: memo,
            hasSundayWord: sundayWord.some(w => w.text),
            hasPersonQuestion: personQuestion.some(q => q.text),
            hasGodQuestion: godQuestion.some(q => q.text),
            hasFreeQuestion: freeQuestion.some(q => q.text),
            hasUpStory: upStory.some(s => s.text),
            hasPraise: praise.some(p => p.text),
            hasThank: thank.some(t => t.text),
            hasPrayer: prayer.some(p => p.text),
            hasMemo2: memo2.some(m => m.text),
            hasTodo: todo.some(t => t.text),
            tags: dateTags
          });
        }
      });
    });
    
    setSearchResults(results);
  };

  const handlePrevious = () => {
    if (currentIndex > 0) {
      setCurrentIndex(currentIndex - 1);
    } else {
      // 이전 달로 이동
      goToPrevMonth();
      // 이전 달의 마지막 날짜로 설정
      setTimeout(() => {
        const prevScriptures = getScriptures();
        if (prevScriptures.length > 0) {
          setCurrentIndex(prevScriptures.length - 1);
        }
      }, 100);
    }
  };

  const handleNext = () => {
    const scriptures = getScriptures();
    if (currentIndex < scriptures.length - 1) {
      setCurrentIndex(currentIndex + 1);
    } else {
      // 다음 달로 이동
      goToNextMonth();
      // 다음 달의 첫 날짜로 설정
      setTimeout(() => {
        setCurrentIndex(0);
      }, 100);
    }
  };

  const handleCardSelect = (index) => {
    setCurrentIndex(index);
    setShowList(false);
    setShowMonthly(false);
  };

  const incrementCheck = () => {
    const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
    const newCounts = { ...checkCounts, [key]: currentCount + 1 };
    saveChecks(newCounts);
  };

  const decrementCheck = () => {
    if (currentCount > 0) {
      const key = `${currentYear}-${currentMonth}-${currentCard.date}`;
      const newCounts = { ...checkCounts, [key]: currentCount - 1 };
      saveChecks(newCounts);
    }
  };

  const copyToClipboard = () => {
    const daySection = daySpecificSections[currentCard.day];
    
    // 각 섹션을 배열에 담기 (내용이 있을 때만)
    const sections = [];
    
    // 기본 정보 (날짜, 요일, 성경구절, 본문)
    sections.push(`${currentYear}년 ${currentCard.date} ${currentCard.day}`);
    sections.push(`${currentCard.reference}`);
    sections.push(`${currentCard.verse}`);
    
    // 요일별 묵상
    const sundayWordsText = currentSundayWords
      .map((word, i) => word.text ? `${i + 1}. ${word.text}` : '')
      .filter(Boolean)
      .join('\n');
    
    if (sundayWordsText) {
      sections.push(`\n${daySection.icon} ${daySection.title}:\n${sundayWordsText}`);
    }
    
    // 추가 섹션들
    if (['월요일', '화요일', '수요일', '목요일', '금요일', '토요일'].includes(currentCard.day) && daySection.additionalSections) {
      daySection.additionalSections.forEach((section, sectionIndex) => {
        let sectionData = [];
        if (sectionIndex === 0) sectionData = currentPersonQuestions;
        else if (sectionIndex === 1) sectionData = currentGodQuestions;
        else if (sectionIndex === 2) sectionData = currentFreeQuestions;
        else if (sectionIndex === 3) sectionData = currentUpStories;
        else if (sectionIndex === 3) sectionData = currentUpStories;
        
        const sectionText = sectionData
          .map((item, i) => item.text ? `${i + 1}. ${item.text}` : '')
          .filter(Boolean)
          .join('\n');
        
        if (sectionText) {
          sections.push(`\n${section.icon} ${section.title}:\n${sectionText}`);
        }
      });
    }
    
    // 묵상 메모
    if (currentMemo) {
      sections.push(`\n📝 ${currentCard.day === '주일' ? '주간 돌아보기' : '지금, 읊조리기'}:\n${currentMemo}`);
    }
    
    // 찬송
    const praisesText = currentPraises
      .map((praise, i) => praise.text ? `${i + 1}. ${praise.text}` : '')
      .filter(Boolean)
      .join('\n');
    
    if (praisesText) {
      sections.push(`\n🙌 지금, 하나님 찬송하기:\n${praisesText}`);
    }
    
    // 감사
    const thanksText = currentThanks
      .map((thank, i) => thank.text ? `${i + 1}. ${thank.text}` : '')
      .filter(Boolean)
      .join('\n');
    
    if (thanksText) {
      sections.push(`\n💝 지금, 감사하기:\n${thanksText}`);
    }
    
    // 기도
    const prayersText = currentPrayers
      .map((prayer, i) => prayer.text ? `${i + 1}. ${prayer.text}` : '')
      .filter(Boolean)
      .join('\n');
    
    if (prayersText) {
      sections.push(`\n🙏 지금, 기도하기:\n${prayersText}`);
    }
    
    // 할일
    const todosText = currentTodos
      .map((todo, i) => todo.text ? `${todo.completed ? '✅' : '⬜'} ${i + 1}. ${todo.text}` : '')
      .filter(Boolean)
      .join('\n');
    
    if (todosText) {
      sections.push(`\n✅ 오늘의 할 일 / 일정:\n${todosText}`);
    }
    
    // 오늘의 메모
    const memos2Text = currentMemos2
      .map((memo, i) => memo.text ? `${i + 1}. ${memo.text}` : '')
      .filter(Boolean)
      .join('\n');
    
    if (memos2Text) {
      sections.push(`\n📝 오늘의 메모:\n${memos2Text}`);
    }
    
    const text = sections.join('\n');

    navigator.clipboard.writeText(text).then(() => {
      setCopied(true);
      alert('✅ 오늘의 묵상이 복사되었습니다!\n\n메모장이나 메신저에 붙여넣기(Ctrl+V) 하세요.');
      setTimeout(() => setCopied(false), 3000);
    });
  };

  // PDF 다운로드 함수
  const downloadAsPdf = (type) => {
    let content = '';
    let filename = '';
    
    if (type === 'today') {
      // 오늘의 묵상 PDF
      const daySection = daySpecificSections[currentCard.day];
      const sundayWordsText = currentSundayWords.map((word, i) => word.text ? `${i + 1}. ${word.text}` : '').filter(Boolean).join('\n');
      
      let additionalSectionsText = '';
      if (['월요일', '화요일', '수요일', '목요일', '금요일', '토요일'].includes(currentCard.day) && daySection.additionalSections) {
        daySection.additionalSections.forEach((section, sectionIndex) => {
          let sectionData = [];
          if (sectionIndex === 0) sectionData = currentPersonQuestions;
          else if (sectionIndex === 1) sectionData = currentGodQuestions;
          else if (sectionIndex === 2) sectionData = currentFreeQuestions;
          
          const sectionText = sectionData.map((item, i) => item.text ? `${i + 1}. ${item.text}` : '').filter(Boolean).join('\n');
          if (sectionText) {
            additionalSectionsText += `\n\n${section.icon} ${section.title}:\n${sectionText}`;
          }
        });
      }
      
      const todosText = currentTodos.map((todo, i) => todo.text ? `${todo.completed ? '✅' : '⬜'} ${i + 1}. ${todo.text}` : '').filter(Boolean).join('\n');
      const praisesText = currentPraises.map((praise, i) => praise.text ? `${i + 1}. ${praise.text}` : '').filter(Boolean).join('\n');
      const thanksText = currentThanks.map((thank, i) => thank.text ? `${i + 1}. ${thank.text}` : '').filter(Boolean).join('\n');
      const prayersText = currentPrayers.map((prayer, i) => prayer.text ? `${i + 1}. ${prayer.text}` : '').filter(Boolean).join('\n');
      const upStoriesText = currentUpStories.map((story, i) => story.text ? `${i + 1}. ${story.text}` : '').filter(Boolean).join('\n');
      const memos2Text = currentMemos2.map((memo, i) => memo.text ? `${i + 1}. ${memo.text}` : '').filter(Boolean).join('\n');
      
      content = `${currentYear}년 ${currentCard.date} ${currentCard.day}\n\n${currentCard.reference}\n${currentCard.verse}\n\n오늘의 실천: ${currentCount}회\n\n${daySection.icon} ${daySection.title}:\n${sundayWordsText || '(작성된 내용 없음)'}${additionalSectionsText}\n\n📝 오늘 읊조리기 묵상:\n${currentMemo || '(작성된 메모 없음)'}\n\n🙌 하나님 찬송하기:\n${praisesText || '(작성된 내용 없음)'}\n\n💝 감사하기:\n${thanksText || '(작성된 내용 없음)'}\n\n🙏 기도적기:\n${prayersText || '(작성된 내용 없음)'}\n\n✅오늘의 할 일:\n${todosText || '(작성된 내용 없음)'}\n\n🎯 UP Story:\n${upStoriesText || '(작성된 내용 없음)'}\n\n📝 오늘의 메모:\n${memos2Text || '(작성된 내용 없음)'}`;
      filename = `오늘의삶_${currentYear}년_${currentCard.date.replace(/월 |일/g, '_')}.txt`;
      
    } else if (type === 'week') {
      // 일주일 묵상 PDF
      const dayThemes = {
        '월요일': '성경 속으로',
        '화요일': '인물 속으로',
        '수요일': '나찾기 속으로',
        '목요일': '적용 속으로',
        '금요일': 'UP Story 속으로',
        '토요일': '나눔 속으로',
        '주일': '주일 말씀'
      };
      
      const currentDate = scriptures[currentIndex];
      if (!currentDate) return;
      
      const currentDayMatch = currentDate.date.match(/(\d+)일/);
      if (!currentDayMatch) return;
      const currentDayNum = parseInt(currentDayMatch[1]);
      
      const dayNames = ['주일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];
      const currentDayIndex = dayNames.indexOf(currentDate.day);
      
      let mondayYear = currentYear;
      let mondayMonth = currentMonth;
      let mondayDay = currentDayNum;
      
      if (currentDayIndex === 0) {
        mondayDay -= 6;
      } else {
        mondayDay -= (currentDayIndex - 1);
      }
      
      if (mondayDay < 1) {
        mondayMonth--;
        if (mondayMonth < 1) {
          mondayMonth = 12;
          mondayYear--;
        }
        mondayDay += getDaysInMonth(mondayYear, mondayMonth);
      }
      
      const weekData = [];
      
      for (let dayOffset = 0; dayOffset < 7; dayOffset++) {
        let targetYear = mondayYear;
        let targetMonth = mondayMonth;
        let targetDay = mondayDay + dayOffset;
        
        const daysInMonth = getDaysInMonth(targetYear, targetMonth);
        if (targetDay > daysInMonth) {
          targetDay -= daysInMonth;
          targetMonth++;
          if (targetMonth > 12) {
            targetMonth = 1;
            targetYear++;
          }
        }
        
        const monthKey = `${targetYear}-${targetMonth}`;
        const monthScriptures = customScriptures[monthKey] || defaultScripturesByMonth[monthKey] || [];
        const scripture = monthScriptures.find(s => {
          const match = s.date.match(/(\d+)일/);
          return match && parseInt(match[1]) === targetDay;
        });
        
        if (!scripture) continue;
        
        const key = `${targetYear}-${targetMonth}-${scripture.date}`;
        const daySection = daySpecificSections[scripture.day];
        
        const dayWords = sundayWords[key] || [];
        const personQuestionsData = personQuestions[key] || [];
        const godQuestionsData = godQuestions[key] || [];
        const freeQuestionsData = freeQuestions[key] || [];
        const upStoriesData = upStories[key] || [];
        
        const sections = [];
        
        if (dayWords.length > 0 && dayWords.some(w => w.text)) {
          let sectionText = `${daySection.icon} ${daySection.title}:\n`;
          dayWords.forEach((w, idx) => {
            if (w.text) sectionText += `${idx + 1}. ${w.text}\n`;
          });
          sections.push(sectionText);
        }
        
        if (['월요일', '화요일', '수요일', '목요일', '금요일', '토요일'].includes(scripture.day) && daySection.additionalSections) {
          daySection.additionalSections.forEach((section, sectionIndex) => {
            let sectionData = [];
            if (sectionIndex === 0) sectionData = personQuestionsData;
            else if (sectionIndex === 1) sectionData = godQuestionsData;
            else if (sectionIndex === 2) sectionData = freeQuestionsData;
            else if (sectionIndex === 3) sectionData = upStoriesData;
            
            if (sectionData.length > 0 && sectionData.some(q => q.text)) {
              let sectionText = `\n${section.icon} ${section.title}:\n`;
              sectionData.forEach((q, idx) => {
                if (q.text) sectionText += `${idx + 1}. ${q.text}\n`;
              });
              sections.push(sectionText);
            }
          });
        }
        
        if (sections.length > 0) {
          const dayTheme = dayThemes[scripture.day] || '';
          let dayText = `\n━━━━━━━━━━━━━━━━━━━━━━\n${targetYear}년 ${targetMonth}월 ${targetDay}일 ${scripture.day} - ${dayTheme}\n━━━━━━━━━━━━━━━━━━━━━━\n\n`;
          dayText += sections.join('');
          weekData.push(dayText);
        }
      }
      
      if (weekData.length === 0) {
        alert('이번 주에 작성된 일주일 묵상 내용이 없습니다.');
        return;
      }
      
      content = `╔════════════════════════════════════╗\n║   일주일 묵상   ║\n╚════════════════════════════════════╝\n${weekData.join('\n')}\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`;
      filename = `일주일묵상_${mondayYear}년_${mondayMonth}월_${mondayDay}일주차.txt`;
      
    } else if (type === 'stats') {
      // 통계 PDF
      const toDateNum = (year, month, day) => year * 10000 + month * 100 + day;
      const startNum = toDateNum(statsStartYear, statsStartMonth, statsStartDay);
      const endNum = toDateNum(statsEndYear, statsEndMonth, statsEndDay);
      
      const isInRange = (key) => {
        const parts = key.split('-');
        if (parts.length < 3) return false;
        const year = parseInt(parts[0]);
        const month = parseInt(parts[1]);
        const dayMatch = parts[2].match(/(\d+)일/);
        if (!dayMatch) return false;
        const day = parseInt(dayMatch[1]);
        const dateNum = toDateNum(year, month, day);
        return dateNum >= startNum && dateNum <= endNum;
      };
      
      const recitationStats = Object.entries(checkCounts).filter(([key]) => isInRange(key)).reduce((sum, [, count]) => sum + count, 0);
      const recitationDays = Object.entries(checkCounts).filter(([key, count]) => isInRange(key) && count > 0).length;
      
      const memoData = Object.entries(memos).filter(([key, value]) => isInRange(key) && value && value.length > 0).map(([key, value]) => {
        const parts = key.split('-');
        return { date: `${parts[1]}월 ${parts[2]}`, text: value };
      }).sort((a, b) => a.date.localeCompare(b.date));
      
      content = `📊 신앙생활 기록\n${statsStartYear}년 ${statsStartMonth}월 ${statsStartDay}일 ~ ${statsEndYear}년 ${statsEndMonth}월 ${statsEndDay}일\n━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n읊조리기: ${recitationStats}회 (${recitationDays}일)\n\n`;
      
      if (memoData.length > 0) {
        content += `📝 묵상메모 (${memoData.length}일)\n──────────────────────────\n`;
        memoData.forEach(d => {
          content += `[${d.date}]\n${d.text}\n\n`;
        });
      }
      
      content += `━━━━━━━━━━━━━━━━━━━━━━━━━━\n생성일: ${new Date().toLocaleDateString('ko-KR')}`;
      filename = `통계_${statsStartYear}년${statsStartMonth}월${statsStartDay}일_${statsEndYear}년${statsEndMonth}월${statsEndDay}일.txt`;
    }
    
    // TXT 파일로 다운로드
    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = filename;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
    
    setShowPdfMenu(false);
    alert('✅ 파일이 다운로드되었습니다!\n\n다운로드 폴더를 확인하세요.');
  };

  // 일주일 복사 함수 (월요일~일요일)
  const copyWeekToClipboard = () => {
    // 요일별 주제
    const dayThemes = {
      '월요일': '성경 속으로',
      '화요일': '인물 속으로',
      '수요일': '나찾기 속으로',
      '목요일': '적용 속으로',
      '금요일': 'UP Story 속으로',
      '토요일': '나눔 속으로',
      '주일': '주일 말씀'
    };
    
    // 현재 날짜가 속한 주의 월요일 찾기 (월 경계 고려)
    const currentDate = scriptures[currentIndex];
    if (!currentDate) return;
    
    // 현재 날짜의 날짜 번호 추출
    const currentDayMatch = currentDate.date.match(/(\d+)일/);
    if (!currentDayMatch) return;
    const currentDayNum = parseInt(currentDayMatch[1]);
    
    // 현재 요일의 인덱스 (0=일요일)
    const dayNames = ['주일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];
    const currentDayIndex = dayNames.indexOf(currentDate.day);
    
    // 월요일까지 거슬러 올라가기 (월 경계 고려)
    let mondayYear = currentYear;
    let mondayMonth = currentMonth;
    let mondayDay = currentDayNum;
    
    if (currentDayIndex === 0) {
      // 일요일이면 6일 전이 월요일
      mondayDay -= 6;
    } else {
      // 그 외는 (현재요일-1)일 전이 월요일
      mondayDay -= (currentDayIndex - 1);
    }
    
    // 월 경계 처리
    if (mondayDay < 1) {
      mondayMonth--;
      if (mondayMonth < 1) {
        mondayMonth = 12;
        mondayYear--;
      }
      mondayDay += getDaysInMonth(mondayYear, mondayMonth);
    }
    
    // 일주일 데이터 수집 (월~일, 월 경계 고려)
    const weekData = [];
    
    for (let dayOffset = 0; dayOffset < 7; dayOffset++) {
      let targetYear = mondayYear;
      let targetMonth = mondayMonth;
      let targetDay = mondayDay + dayOffset;
      
      // 월 경계 처리
      const daysInMonth = getDaysInMonth(targetYear, targetMonth);
      if (targetDay > daysInMonth) {
        targetDay -= daysInMonth;
        targetMonth++;
        if (targetMonth > 12) {
          targetMonth = 1;
          targetYear++;
        }
      }
      
      // 해당 월의 데이터 가져오기
      const monthKey = `${targetYear}-${targetMonth}`;
      const monthScriptures = customScriptures[monthKey] || defaultScripturesByMonth[monthKey] || [];
      const scripture = monthScriptures.find(s => {
        const match = s.date.match(/(\d+)일/);
        return match && parseInt(match[1]) === targetDay;
      });
      
      if (!scripture) continue;
      
      const key = `${targetYear}-${targetMonth}-${scripture.date}`;
      const daySection = daySpecificSections[scripture.day];
      
      const dayWords = sundayWords[key] || [];
      const personQuestionsData = personQuestions[key] || [];
      const godQuestionsData = godQuestions[key] || [];
      const freeQuestionsData = freeQuestions[key] || [];
      const upStoriesData = upStories[key] || [];
      
      // 각 섹션별로 내용 수집
      const sections = [];
      
      // 메인 섹션 (요일별 특별 묵상) - 내용이 있을 때만
      if (dayWords.length > 0 && dayWords.some(w => w.text)) {
        let sectionText = `${daySection.icon} ${daySection.title}:\n`;
        dayWords.forEach((w, idx) => {
          if (w.text) sectionText += `${idx + 1}. ${w.text}\n`;
        });
        sections.push(sectionText);
      }
      
      // 월요일~토요일: 추가 섹션들 - 내용이 있을 때만
      if (['월요일', '화요일', '수요일', '목요일', '금요일', '토요일'].includes(scripture.day) && daySection.additionalSections) {
        daySection.additionalSections.forEach((section, sectionIndex) => {
          let sectionData = [];
          if (sectionIndex === 0) sectionData = personQuestionsData;
          else if (sectionIndex === 1) sectionData = godQuestionsData;
          else if (sectionIndex === 2) sectionData = freeQuestionsData;
          else if (sectionIndex === 3) sectionData = upStoriesData;
          
          if (sectionData.length > 0 && sectionData.some(q => q.text)) {
            let sectionText = `\n${section.icon} ${section.title}:\n`;
            sectionData.forEach((q, idx) => {
              if (q.text) sectionText += `${idx + 1}. ${q.text}\n`;
            });
            sections.push(sectionText);
          }
        });
      }
      
      // 내용이 있는 날짜만 추가
      if (sections.length > 0) {
        const dayTheme = dayThemes[scripture.day] || '';
        let dayText = `
━━━━━━━━━━━━━━━━━━━━━━
${targetYear}년 ${targetMonth}월 ${targetDay}일 ${scripture.day} - ${dayTheme}
━━━━━━━━━━━━━━━━━━━━━━

`;
        dayText += sections.join('');
        weekData.push(dayText);
      }
    }
    
    if (weekData.length === 0) {
      alert('이번 주에 작성된 일주일 묵상 내용이 없습니다.');
      return;
    }
    
    const weekText = `
╔════════════════════════════════════╗
║   일주일 묵상   ║
╚════════════════════════════════════╝
${weekData.join('\n')}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
`;
    
    navigator.clipboard.writeText(weekText).then(() => {
      setWeekCopied(true);
      alert('✅ 일주일 묵상이 복사되었습니다!\n\n메모장이나 메신저에 붙여넣기(Ctrl+V) 하세요.');
      setTimeout(() => setWeekCopied(false), 3000);
    });
  };

  // 월간 달력용 데이터 생성 (일요일 시작)
  const getCalendarData = () => {
    const calendarDays = [];
    const firstDay = getFirstDayOfMonth(currentYear, currentMonth);
    
    // 첫째 날 전 빈칸 추가
    for (let i = 0; i < firstDay; i++) {
      calendarDays.push(null);
    }
    
    // 실제 날짜 데이터 추가
    scriptures.forEach(s => calendarDays.push(s));
    
    return calendarDays;
  };

  const monthNames = ['', '1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'];

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="text-center px-4">
          {/* 로고 애니메이션 */}
          <div className="mb-6 animate-bounce">
            <div className="text-7xl mb-2">📖</div>
          </div>
          
          {/* 타이틀 */}
          <h1 className="text-white text-3xl font-bold mb-2">
            나의 일주일 묵상
          </h1>
          <p className="text-white text-opacity-80 text-sm mb-8">
            서서울성서침례교회
          </p>
          
          {/* 프로그레스 바 */}
          <div className="w-80 max-w-full mx-auto">
            <div className="h-3 bg-white bg-opacity-20 rounded-full overflow-hidden mb-3 backdrop-blur-sm">
              <div 
                className="h-full bg-gradient-to-r from-yellow-400 to-amber-500 transition-all duration-500 ease-out"
                style={{ width: `${loadingProgress}%` }}
              />
            </div>
            
            {/* 로딩 메시지 */}
            <div className="text-white text-sm font-semibold">
              {loadingMessage}
            </div>
            <div className="text-white text-opacity-70 text-xs mt-1">
              {loadingProgress}%
            </div>
          </div>
          
          {/* 로딩 스피너 */}
          <div className="mt-6 flex justify-center gap-2">
            <div className="w-2 h-2 bg-white rounded-full animate-pulse" style={{ animationDelay: '0ms' }}></div>
            <div className="w-2 h-2 bg-white rounded-full animate-pulse" style={{ animationDelay: '150ms' }}></div>
            <div className="w-2 h-2 bg-white rounded-full animate-pulse" style={{ animationDelay: '300ms' }}></div>
          </div>
        </div>
      </div>
    );
  }

  // 데이터가 없는 월일 때
  if (scriptures.length === 0) {
    const prevMonth = getPrevMonthInfo();
    const nextMonth = getNextMonthInfo();
    
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-4xl mx-auto">
          <div className="text-center mb-8">
            <h1 className="text-4xl md:text-5xl font-bold text-white mb-3">
              {currentYear}년 {monthNames[currentMonth]}
            </h1>
          </div>
          
          <div className="bg-white rounded-3xl shadow-2xl p-8 text-center">
            <div className="text-6xl mb-4">📖</div>
            <h2 className="text-2xl font-bold text-gray-800 mb-4">
              아직 말씀이 준비되지 않았습니다
            </h2>
            <p className="text-gray-600 mb-8">
              이 달의 성경구절 데이터가 없습니다.<br/>
              다른 달을 선택하거나 관리자 메뉴에서 추가해 주세요.
            </p>
            
            <div className="flex justify-center gap-4 flex-wrap">
              <button
              onClick={() => {
                setShowAdminMenu(false);
                setShowWeeklyManager(true);
              }}
              className="w-full px-6 py-4 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-2xl hover:from-teal-600 hover:to-teal-700 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg"
            >
              📚 주간 본문 관리
            </button>
            
            <button
                onClick={goToPrevMonth}
                className={`px-6 py-3 rounded-2xl font-semibold transition-all ${
                  hasMonthData(prevMonth.year, prevMonth.month)
                    ? 'bg-purple-500 text-white hover:bg-purple-600'
                    : 'bg-gray-300 text-gray-500'
                }`}
              >
                ← {prevMonth.year}년 {monthNames[prevMonth.month]}
              </button>
              <button
                onClick={handleAdminClick}
                className="px-6 py-3 bg-amber-500 text-white rounded-2xl font-semibold hover:bg-amber-600 transition-all"
              >
                ⚙️ 관리자
              </button>
              <button
                onClick={goToNextMonth}
                className={`px-6 py-3 rounded-2xl font-semibold transition-all ${
                  hasMonthData(nextMonth.year, nextMonth.month)
                    ? 'bg-purple-500 text-white hover:bg-purple-600'
                    : 'bg-gray-300 text-gray-500'
                }`}
              >
                {nextMonth.year}년 {monthNames[nextMonth.month]} →
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // 비밀번호 입력 모달
  if (showPasswordModal) {
    return (
      <div className="min-h-screen flex items-center justify-center p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full">
          <h2 className="text-2xl font-bold text-gray-800 mb-4">
            {adminPassword ? '관리자 비밀번호 입력' : '관리자 비밀번호 설정'}
          </h2>
          <p className="text-gray-600 mb-6">
            {adminPassword 
              ? '관리자 메뉴에 접근하려면 비밀번호를 입력하세요.' 
              : '처음 사용하시는 것 같습니다. 관리자 비밀번호를 설정해주세요. (최소 4자)'}
          </p>
          <input
            type="password"
            value={passwordInput}
            onChange={(e) => setPasswordInput(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && handlePasswordSubmit()}
            placeholder="비밀번호 입력"
            className="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 mb-4"
            autoFocus
          />
          <div className="flex gap-3">
            <button
              onClick={() => {
                setShowPasswordModal(false);
                setPasswordInput('');
              }}
              className="flex-1 px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
            >
              취소
            </button>
            <button
              onClick={handlePasswordSubmit}
              className="flex-1 px-6 py-3 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all font-semibold"
            >
              확인
            </button>
          </div>
        </div>
      </div>
    );
  }

  // 관리자 메뉴
  if (showAdminMenu) {
    // 삭제 가능한 월 목록 (커스텀 데이터만)
    const deletableMonths = Object.keys(customScriptures).filter(key => customScriptures[key] && customScriptures[key].length > 0);
    
    return (
      <div className="min-h-screen flex items-center justify-center p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full">
          <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">⚙️ 관리자 메뉴</h2>
          
          <div className="space-y-4">
            <button
              onClick={() => {
                setShowAdminMenu(false);
                setShowTextImport(true);
                setImportText('');
                setParsedData([]);
              }}
              className="w-full px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl hover:from-green-600 hover:to-green-700 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg"
            >
              📝 텍스트로 월 추가하기
            </button>
            
            <button
              onClick={() => {
                setShowAdminMenu(false);
                setWeeklyInputText('');
                setParsedWeeklyData([]);
                setShowWeeklyInput(true);
              }}
              className="w-full px-6 py-4 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-2xl hover:from-indigo-600 hover:to-indigo-700 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg"
            >
              📖 주간 본문 추가하기
            </button>
            
            <button
              onClick={() => {
                setShowAdminMenu(false);
                setShowWeeklyManager(true);
              }}
              className="w-full px-6 py-4 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-2xl hover:from-teal-600 hover:to-teal-700 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg"
            >
              📚 주간 본문 관리 (수정/삭제)
            </button>
            
            <button
              onClick={() => {
                setShowAdminMenu(false);
                setNewMonthData([]);
                setShowNewMonthEditor(true);
              }}
              className="w-full px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl hover:from-blue-600 hover:to-blue-700 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg"
            >
              <Calendar size={24} />
              ✏️ 현재 월 날짜별 수정
            </button>
            
            <button
              onClick={() => {
                setShowAdminMenu(false);
                setShowDeleteMonth(true);
              }}
              className="w-full px-6 py-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl hover:from-red-600 hover:to-red-700 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg"
            >
              🗑️ 월 데이터 삭제
            </button>
            
            <button
              onClick={() => {
                setShowAdminMenu(false);
                setShowDataManager(true);
              }}
              className="w-full px-6 py-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-2xl hover:from-purple-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg"
            >
              💾 데이터 관리 (내보내기/가져오기)
            </button>
            
            <button
              onClick={() => {
                setShowAdminMenu(false);
                setShowMonthly(true);
                setShowList(false);
              }}
              className="w-full px-6 py-4 bg-gray-500 text-white rounded-2xl hover:bg-gray-600 transition-all font-semibold"
            >
              닫기
            </button>
          </div>
        </div>
      </div>
    );
  }

  // 주간 본문 삭제 함수
  const handleDeleteWeekly = async (keyToDelete) => {
    const weekly = weeklyScriptures[keyToDelete];
    if (!weekly) {
      alert('❌ 삭제할 데이터를 찾을 수 없습니다.');
      return;
    }
    
    if (!window.confirm(`${weekly.weekLabel || weekly.dateRange} 주간 본문을 삭제하시겠습니까?\n\n이 작업은 되돌릴 수 없습니다.`)) {
      return;
    }
    
    try {
      const newWeeklyScriptures = { ...weeklyScriptures };
      delete newWeeklyScriptures[keyToDelete];
      
      // 먼저 storage에 저장
      await window.storage.set('weekly-scriptures-yearly', JSON.stringify(newWeeklyScriptures), true);
      
      // 그 다음 state 업데이트
      setWeeklyScriptures(newWeeklyScriptures);
      
      alert('✅ 삭제되었습니다.');
    } catch (error) {
      console.error('삭제 실패:', error);
      alert('❌ 삭제에 실패했습니다: ' + error.message);
    }
  };

  // 주간 본문 관리 화면
  if (showWeeklyManager) {
    const weeklyKeys = Object.keys(weeklyScriptures).sort();
    
    return (
      <div className="min-h-screen flex items-center justify-center p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto">
          <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">📚 주간 본문 관리</h2>
          
          {weeklyKeys.length === 0 ? (
            <div className="text-center py-8">
              <p className="text-gray-500 mb-4">저장된 주간 본문이 없습니다.</p>
              <button
                onClick={() => {
                  setShowWeeklyManager(false);
                  setWeeklyInputText('');
                  setParsedWeeklyData([]);
                  setShowWeeklyInput(true);
                }}
                className="px-6 py-3 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-all font-semibold"
              >
                주간 본문 추가하러 가기
              </button>
            </div>
          ) : (
            <div className="space-y-3">
              {weeklyKeys.map((key) => {
                const weekly = weeklyScriptures[key];
                return (
                  <div key={key} className="border-2 border-indigo-200 rounded-xl p-4 bg-indigo-50 hover:bg-indigo-100 transition-all">
                    <div className="flex items-center justify-between gap-3">
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 mb-1">
                          <span className="font-bold text-indigo-800 text-base">
                            {weekly.weekLabel || weekly.dateRange}
                          </span>
                          <span className="text-xs bg-indigo-200 text-indigo-700 px-2 py-0.5 rounded-full">
                            {key}
                          </span>
                        </div>
                        <p className="font-semibold text-gray-700 text-sm truncate">{weekly.reference}</p>
                      </div>
                      <div className="flex gap-2 flex-shrink-0">
                        <button
                          onClick={() => {
                            setParsedWeeklyData([{
                              year: weekly.year,
                              weekNumber: weekly.weekNumber,
                              weekKey: key,
                              weekLabel: weekly.weekLabel,
                              dateRange: weekly.dateRange,
                              reference: weekly.reference,
                              verse: weekly.verse
                            }]);
                            setShowWeeklyManager(false);
                            setShowWeeklyInput(true);
                          }}
                          className="px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all font-semibold text-sm"
                        >
                          ✏️ 수정
                        </button>
                        <button
                          onClick={() => handleDeleteWeekly(key)}
                          className="px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all font-semibold text-sm"
                        >
                          🗑️ 삭제
                        </button>
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          )}
          
          <button
            onClick={() => {
              setShowWeeklyManager(false);
              setShowMonthly(false);
              setShowList(false);
              setShowAdminMenu(true);
            }}
            className="w-full mt-6 px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
          >
            닫기
          </button>
        </div>
      </div>
    );
  }

  // 데이터 관리 화면 (내보내기/가져오기)
  if (showDataManager) {
    // 전체 데이터 내보내기
    const exportAllData = () => {
      setIsExporting(true);
      setExportMessage('📦 데이터를 수집하는 중...');
      
      try {
        // 빈 데이터 필터링
        const filterEmpty = (obj) => {
          if (!obj) return {};
          const filtered = {};
          for (const [key, value] of Object.entries(obj)) {
            if (value && (
              (typeof value === 'string' && value.length > 0) ||
              (typeof value === 'number' && value > 0) ||
              (Array.isArray(value) && value.length > 0 && value.some(v => v && v.text)) ||
              (typeof value === 'object' && Object.keys(value).length > 0)
            )) {
              filtered[key] = value;
            }
          }
          return filtered;
        };
        
        setExportMessage('🔄 데이터를 정리하는 중...');
        
        const allData = {
          version: APP_VERSION,
          exportDate: new Date().toISOString(),
          checkCounts: filterEmpty(checkCounts),
          memos: filterEmpty(memos),
          praises: filterEmpty(praises),
          sundayWords: filterEmpty(sundayWords),
          personQuestions: filterEmpty(personQuestions),
          godQuestions: filterEmpty(godQuestions),
          freeQuestions: filterEmpty(freeQuestions),
          upStories: filterEmpty(upStories),
          thanks: filterEmpty(thanks),
          prayers: filterEmpty(prayers),
          todos: filterEmpty(todos),
          customScriptures: filterEmpty(customScriptures),
          weeklyScriptures: filterEmpty(weeklyScriptures)
        };
        
        setExportMessage('💾 파일을 생성하는 중...');
        
        const dataStr = JSON.stringify(allData, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `scripture-backup-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        // URL 정리를 조금 늦게 실행
        setTimeout(() => URL.revokeObjectURL(url), 100);
        
        setExportMessage('✅ 다운로드 완료!');
        setTimeout(() => {
          setIsExporting(false);
          setExportMessage('');
          alert('✅ 데이터가 성공적으로 다운로드되었습니다!\n\n빈 기록은 자동으로 제외되었습니다.\n안전한 곳에 백업 파일을 보관하세요.');
          // 내보내기 후에는 데이터 관리 화면 유지 (자동으로 관리자 메뉴로 가지 않음)
        }, 1000);
        
      } catch (error) {
        console.error('내보내기 오류:', error);
        setExportMessage('❌ 내보내기 실패');
        setTimeout(() => {
          setIsExporting(false);
          setExportMessage('');
          alert('❌ 데이터 내보내기 실패\n\n오류: ' + error.message + '\n\n브라우저의 다운로드 권한을 확인하거나\n개발자 도구 콘솔을 확인해주세요.');
        }, 1000);
      }
    };
    
    // 데이터 가져오기 (병합 방식) - 개선된 버전
    const importData = (event) => {
      const file = event.target.files?.[0];
      if (!file) return;
      
      setIsImporting(true);
      setImportMessage('📂 파일을 읽는 중...');
      
      const reader = new FileReader();
      reader.onload = async (e) => {
        try {
          setImportMessage('🔍 데이터를 분석하는 중...');
          const importedData = JSON.parse(e.target?.result);
          
          // 데이터 유효성 검사
          if (!importedData.version) {
            throw new Error('올바른 백업 파일이 아닙니다.');
          }
          
          // 가져올 데이터 통계
          const stats = {
            checkCounts: Object.keys(importedData.checkCounts || {}).length,
            memos: Object.keys(importedData.memos || {}).length,
            praises: Object.keys(importedData.praises || {}).length,
            sundayWords: Object.keys(importedData.sundayWords || {}).length,
            personQuestions: Object.keys(importedData.personQuestions || {}).length,
            godQuestions: Object.keys(importedData.godQuestions || {}).length,
            freeQuestions: Object.keys(importedData.freeQuestions || {}).length,
            thanks: Object.keys(importedData.thanks || {}).length,
            prayers: Object.keys(importedData.prayers || {}).length,
            todos: Object.keys(importedData.todos || {}).length,
            customScriptures: Object.keys(importedData.customScriptures || {}).length,
            weeklyScriptures: Object.keys(importedData.weeklyScriptures || {}).length
          };
          
          const confirmMsg = `데이터를 병합하시겠습니까?\n\n` +
            `백업 날짜: ${importedData.exportDate ? new Date(importedData.exportDate).toLocaleString('ko-KR') : '알 수 없음'}\n` +
            `버전: ${importedData.version}\n\n` +
            `📊 가져올 데이터:\n` +
            `- 읊조리기: ${stats.checkCounts}개\n` +
            `- 묵상메모: ${stats.memos}개\n` +
            `- 찬송: ${stats.praises}개\n` +
            `- 일주일묵상: ${stats.sundayWords}개\n` +
            `- 감사: ${stats.thanks}개\n` +
            `- 기도: ${stats.prayers}개\n` +
            `- 할일: ${stats.todos}개\n` +
            `- 커스텀월: ${stats.customScriptures}개\n` +
            `- 주간본문: ${stats.weeklyScriptures}개\n\n` +
            `📌 병합 방식: 기존 데이터는 유지되고, 가져온 데이터가 추가/업데이트됩니다.`;
          
          if (!window.confirm(confirmMsg)) {
            setIsImporting(false);
            setImportMessage('');
            return;
          }
          
          setImportMessage('🔄 데이터를 병합하는 중...');
          let successCount = 0;
          let errorCount = 0;
          
          // 읊조리기 병합
          if (importedData.checkCounts) {
            try {
              const merged = { ...checkCounts, ...importedData.checkCounts };
              setCheckCounts(merged);
              await window.storage.set('scripture-checks-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('읊조리기 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('💾 묵상 메모를 저장하는 중...');
          if (importedData.memos) {
            try {
              const merged = { ...memos, ...importedData.memos };
              setMemos(merged);
              await window.storage.set('scripture-memos-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('묵상메모 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('💾 찬송을 저장하는 중...');
          if (importedData.praises) {
            try {
              const merged = { ...praises, ...importedData.praises };
              setPraises(merged);
              await window.storage.set('scripture-praises-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('찬송 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('💾 일주일 묵상을 저장하는 중...');
          if (importedData.sundayWords) {
            try {
              const merged = { ...sundayWords, ...importedData.sundayWords };
              setSundayWords(merged);
              await window.storage.set('scripture-sunday-words-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('일주일묵상 병합 실패:', e);
              errorCount++;
            }
          }
          
          if (importedData.personQuestions) {
            try {
              const merged = { ...personQuestions, ...importedData.personQuestions };
              setPersonQuestions(merged);
              await window.storage.set('scripture-person-questions-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('인물질문 병합 실패:', e);
              errorCount++;
            }
          }
          
          if (importedData.godQuestions) {
            try {
              const merged = { ...godQuestions, ...importedData.godQuestions };
              setGodQuestions(merged);
              await window.storage.set('scripture-god-questions-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('하나님질문 병합 실패:', e);
              errorCount++;
            }
          }
          
          if (importedData.freeQuestions) {
            try {
              const merged = { ...freeQuestions, ...importedData.freeQuestions };
              setFreeQuestions(merged);
              await window.storage.set('scripture-free-questions-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('자유질문 병합 실패:', e);
              errorCount++;
            }
          }
          
          if (importedData.upStories) {
            try {
              const merged = { ...upStories, ...importedData.upStories };
              setUpStories(merged);
              await window.storage.set('scripture-up-stories-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('UP Story 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('💾 감사를 저장하는 중...');
          if (importedData.thanks) {
            try {
              const merged = { ...thanks, ...importedData.thanks };
              setThanks(merged);
              await window.storage.set('scripture-thanks-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('감사 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('💾 기도를 저장하는 중...');
          if (importedData.prayers) {
            try {
              const merged = { ...prayers, ...importedData.prayers };
              setPrayers(merged);
              await window.storage.set('scripture-prayers-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('기도 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('💾 할일을 저장하는 중...');
          if (importedData.todos) {
            try {
              const merged = { ...todos, ...importedData.todos };
              setTodos(merged);
              await window.storage.set('scripture-todos-yearly', JSON.stringify(merged));
              successCount++;
            } catch (e) {
              console.error('할일 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('💾 커스텀 월 데이터를 저장하는 중...');
          if (importedData.customScriptures) {
            try {
              const merged = { ...customScriptures, ...importedData.customScriptures };
              setCustomScriptures(merged);
              await window.storage.set('custom-scriptures-yearly', JSON.stringify(merged), true);
              successCount++;
            } catch (e) {
              console.error('커스텀월 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('💾 주간 본문을 저장하는 중...');
          if (importedData.weeklyScriptures) {
            try {
              const merged = { ...weeklyScriptures, ...importedData.weeklyScriptures };
              setWeeklyScriptures(merged);
              await window.storage.set('weekly-scriptures-yearly', JSON.stringify(merged), true);
              successCount++;
            } catch (e) {
              console.error('주간본문 병합 실패:', e);
              errorCount++;
            }
          }
          
          setImportMessage('🔄 데이터를 다시 불러오는 중...');
          // 모든 데이터 다시 로드
          await loadChecks();
          
          setImportMessage('✅ 가져오기 완료!');
          setTimeout(() => {
            setIsImporting(false);
            setImportMessage('');
            
            const resultMsg = `✅ 데이터 가져오기 완료!\n\n` +
              `📊 결과:\n` +
              `- 성공: ${successCount}개 카테고리\n` +
              (errorCount > 0 ? `- 실패: ${errorCount}개 카테고리\n\n` : '\n') +
              `🔄 병합된 데이터:\n` +
              `- 읊조리기: ${stats.checkCounts}개\n` +
              `- 묵상메모: ${stats.memos}개\n` +
              `- 찬송: ${stats.praises}개\n` +
              `- 일주일묵상: ${stats.sundayWords}개\n` +
              `- 감사: ${stats.thanks}개\n` +
              `- 기도: ${stats.prayers}개\n` +
              `- 할일: ${stats.todos}개\n` +
              `- 커스텀월: ${stats.customScriptures}개월\n` +
              `- 주간본문: ${stats.weeklyScriptures}개\n\n` +
              `💡 화면을 새로고침하여 변경사항을 확인하세요.`;
            
            alert(resultMsg);
            setShowDataManager(false);
            setShowMonthly(false);
            setShowList(false);
            // 관리자 메뉴로 돌아가기
            setShowAdminMenu(true);
          }, 1000);
          
        } catch (error) {
          console.error('가져오기 오류:', error);
          setImportMessage('❌ 가져오기 실패');
          setTimeout(() => {
            setIsImporting(false);
            setImportMessage('');
            alert('❌ 데이터 가져오기 실패\n\n오류: ' + error.message + '\n\n올바른 백업 파일인지 확인해주세요.\nJSON 형식이 손상되었을 수 있습니다.');
          }, 1000);
        }
      };
      
      reader.readAsText(file);
    };
    
    return (
      <div className="min-h-screen flex items-center justify-center p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full">
          <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">💾 데이터 관리</h2>
          
          {/* 진행 상태 메시지 */}
          {(exportMessage || importMessage) && (
            <div className="mb-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-300 rounded-xl">
              <p className="text-center font-bold text-blue-800 animate-pulse">
                {exportMessage || importMessage}
              </p>
            </div>
          )}
          
          <div className="space-y-4">
            {/* 데이터 내보내기 */}
            <div className="bg-blue-50 rounded-xl p-4">
              <h3 className="font-bold text-blue-800 mb-2">📤 데이터 내보내기</h3>
              <p className="text-sm text-gray-600 mb-3">
                현재 저장된 모든 데이터를 JSON 파일로 다운로드합니다.
              </p>
              <button
                onClick={exportAllData}
                disabled={isExporting || isImporting}
                className={`w-full px-4 py-3 rounded-xl font-semibold transition-all ${
                  isExporting || isImporting
                    ? 'bg-gray-400 cursor-not-allowed'
                    : 'bg-blue-600 text-white hover:bg-blue-700'
                }`}
              >
                {isExporting ? '⏳ 내보내는 중...' : '💾 모든 데이터 내보내기'}
              </button>
            </div>
            
            {/* 데이터 가져오기 */}
            <div className="bg-green-50 rounded-xl p-4">
              <h3 className="font-bold text-green-800 mb-2">📥 데이터 가져오기 (병합)</h3>
              <p className="text-sm text-gray-600 mb-3">
                이전에 내보낸 JSON 파일의 데이터를 현재 데이터와 병합합니다.<br/>
                <span className="text-green-700 font-semibold">기존 데이터는 유지되고, 새로운 데이터가 추가/업데이트됩니다.</span>
              </p>
              <label className={`w-full px-4 py-3 rounded-xl font-semibold cursor-pointer block text-center transition-all ${
                isExporting || isImporting
                  ? 'bg-gray-400 cursor-not-allowed'
                  : 'bg-green-600 text-white hover:bg-green-700'
              }`}>
                {isImporting ? '⏳ 가져오는 중...' : '📁 파일 선택하기'}
                <input
                  key={importMessage ? 'importing' : 'ready'}
                  type="file"
                  accept=".json"
                  onChange={importData}
                  disabled={isExporting || isImporting}
                  className="hidden"
                />
              </label>
            </div>
            
            {/* 데이터 백업 안내 */}
            <div className="bg-amber-50 rounded-xl p-4 border-2 border-amber-300">
              <h3 className="font-bold text-amber-800 mb-2">💡 백업 팁</h3>
              <p className="text-sm text-gray-600">
                <strong>정기적인 백업을 권장합니다!</strong><br/>
                • 매월 1회 데이터 내보내기 하세요<br/>
                • 파일명에 날짜를 포함하면 관리가 쉽습니다<br/>
                • 안전한 곳(클라우드, USB)에 보관하세요
              </p>
            </div>
          </div>
          
          <button
            onClick={() => {
              if (!isExporting && !isImporting) {
                setShowDataManager(false);
                setShowMonthly(false);
                setShowList(false);
                setShowAdminMenu(true);
              }
            }}
            disabled={isExporting || isImporting}
            className={`w-full mt-6 px-6 py-3 rounded-xl font-semibold transition-all ${
              isExporting || isImporting
                ? 'bg-gray-400 cursor-not-allowed'
                : 'bg-gray-500 text-white hover:bg-gray-600'
            }`}
          >
            {isExporting || isImporting ? '작업 진행 중...' : '닫기'}
          </button>
        </div>
      </div>
    );
  }
  
  // 이전 버전 데이터 추출 가이드
  if (showImportGuide) {
    return (
      <div key={statsKey} className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-3xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <h1 className="text-2xl font-bold text-white">📖 이전 버전 데이터 추출 가이드</h1>
            <button
              onClick={() => {
                setShowImportGuide(false);
                setShowDataManager(true);
              }}
              className="px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
            >
              닫기
            </button>
          </div>
          
          <div className="bg-white rounded-3xl shadow-2xl p-6 space-y-6">
            <div className="bg-blue-50 border-2 border-blue-300 rounded-xl p-4">
              <h2 className="font-bold text-blue-800 mb-2">💡 좋은 소식!</h2>
              <p className="text-gray-700 mb-2">
                이전 버전에 내보내기 기능이 없어도 브라우저의 개발자 도구를 통해 **모든 데이터를 하나의 JSON 파일로** 통합하여 추출할 수 있습니다!
              </p>
              <div className="bg-green-100 border border-green-300 rounded-lg p-3 mt-2">
                <p className="text-sm text-green-800 font-semibold">
                  ✅ 수백 개 파일 문제 완전 해결!<br/>
                  ✅ 단 하나의 통합 JSON 파일로 다운로드!<br/>
                  ✅ 빈 기록은 자동으로 제외!
                </p>
              </div>
            </div>
            
            <div className="space-y-4">
              <h3 className="text-lg font-bold text-gray-800">🔧 단계별 가이드</h3>
              
              {/* 1단계 */}
              <div className="bg-gray-50 rounded-xl p-4">
                <div className="flex items-start gap-3">
                  <div className="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">1</div>
                  <div className="flex-1">
                    <h4 className="font-bold text-gray-800 mb-2">이전 버전 앱 열기</h4>
                    <p className="text-sm text-gray-600">
                      데이터를 추출할 이전 버전의 앱을 브라우저에서 엽니다.
                    </p>
                  </div>
                </div>
              </div>
              
              {/* 2단계 */}
              <div className="bg-gray-50 rounded-xl p-4">
                <div className="flex items-start gap-3">
                  <div className="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">2</div>
                  <div className="flex-1">
                    <h4 className="font-bold text-gray-800 mb-2">개발자 도구 열기</h4>
                    <p className="text-sm text-gray-600 mb-2">
                      다음 중 하나의 방법으로 개발자 도구를 엽니다:
                    </p>
                    <ul className="text-sm text-gray-600 list-disc list-inside space-y-1">
                      <li><kbd className="px-2 py-1 bg-gray-200 rounded">F12</kbd> 키 누르기</li>
                      <li><kbd className="px-2 py-1 bg-gray-200 rounded">Ctrl</kbd> + <kbd className="px-2 py-1 bg-gray-200 rounded">Shift</kbd> + <kbd className="px-2 py-1 bg-gray-200 rounded">I</kbd> (Windows)</li>
                      <li><kbd className="px-2 py-1 bg-gray-200 rounded">Cmd</kbd> + <kbd className="px-2 py-1 bg-gray-200 rounded">Option</kbd> + <kbd className="px-2 py-1 bg-gray-200 rounded">I</kbd> (Mac)</li>
                      <li>우클릭 → "검사" 또는 "Inspect"</li>
                    </ul>
                  </div>
                </div>
              </div>
              
              {/* 3단계 */}
              <div className="bg-gray-50 rounded-xl p-4">
                <div className="flex items-start gap-3">
                  <div className="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">3</div>
                  <div className="flex-1">
                    <h4 className="font-bold text-gray-800 mb-2">Console 탭 선택</h4>
                    <p className="text-sm text-gray-600">
                      개발자 도구 상단의 "Console" 탭을 클릭합니다.
                    </p>
                  </div>
                </div>
              </div>
              
              {/* 4단계 */}
              <div className="bg-gray-50 rounded-xl p-4">
                <div className="flex items-start gap-3">
                  <div className="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">4</div>
                  <div className="flex-1">
                    <h4 className="font-bold text-gray-800 mb-2">🔥 통합 데이터 추출 코드 실행</h4>
                    <p className="text-sm text-gray-600 mb-2">
                      아래 **개선된 코드**를 복사하여 Console에 붙여넣고 <kbd className="px-2 py-1 bg-gray-200 rounded">Enter</kbd>를 누르면<br/>
                      <span className="font-bold text-green-600">모든 데이터가 하나의 JSON 파일로 통합되어 다운로드됩니다!</span><br/>
                      <span className="text-purple-600 font-semibold">12개 카테고리(읊조리기, 묵상, 찬송, 요일별묵상, 인물/하나님/자유질문, 감사, 기도, 할일, 커스텀월, 주간본문)의 모든 데이터가 포함됩니다.</span><br/>
                      <span className="text-purple-600 font-semibold">빈 기록은 자동으로 제외되어 파일 크기도 최적화됩니다.</span>
                    </p>
                    <div className="bg-gray-800 text-green-400 p-3 rounded-lg font-mono text-xs overflow-x-auto">
                      <pre>{`(async () => {
  console.log('🚀 데이터 통합 추출을 시작합니다...');
  console.log('⏳ 모든 데이터를 하나의 JSON 파일로 통합합니다...');
  
  const data = {};
  const keys = [
    'scripture-checks-yearly',
    'scripture-memos-yearly',
    'scripture-praises-yearly',
    'scripture-sunday-words-yearly',
    'scripture-person-questions-yearly',
    'scripture-god-questions-yearly',
    'scripture-free-questions-yearly',
    'scripture-thanks-yearly',
    'scripture-prayers-yearly',
    'scripture-todos-yearly',
    'custom-scriptures-yearly',
    'weekly-scriptures-yearly'
  ];
  
  console.log('📦 12개 카테고리 데이터 수집 중...');
  
  for (const key of keys) {
    try {
      const isShared = key.includes('custom') || key.includes('admin');
      const result = await window.storage.get(key, isShared);
      if (result && result.value) {
        data[key] = result.value;
        console.log('✅ ' + key + ' 수집 완료');
      }
    } catch(e) {
      console.log('⚠️ ' + key + ' 없음 (정상)');
    }
  }
  
  console.log('🔄 데이터 통합 및 정리 중...');
  
  // 빈 데이터 필터링 함수
  const filterEmpty = (obj) => {
    if (!obj) return {};
    const filtered = {};
    for (const [key, value] of Object.entries(obj)) {
      if (value && (
        (typeof value === 'string' && value.length > 0) ||
        (typeof value === 'number' && value > 0) ||
        (Array.isArray(value) && value.length > 0 && value.some(v => v && v.text)) ||
        (typeof value === 'object' && Object.keys(value).length > 0)
      )) {
        filtered[key] = value;
      }
    }
    return filtered;
  };
  
  const backup = {
    version: "서서울성서침례교회",
    exportDate: new Date().toISOString(),
    checkCounts: filterEmpty(data['scripture-checks-yearly'] ? JSON.parse(data['scripture-checks-yearly']) : {}),
    memos: filterEmpty(data['scripture-memos-yearly'] ? JSON.parse(data['scripture-memos-yearly']) : {}),
    praises: filterEmpty(data['scripture-praises-yearly'] ? JSON.parse(data['scripture-praises-yearly']) : {}),
    sundayWords: filterEmpty(data['scripture-sunday-words-yearly'] ? JSON.parse(data['scripture-sunday-words-yearly']) : {}),
    personQuestions: filterEmpty(data['scripture-person-questions-yearly'] ? JSON.parse(data['scripture-person-questions-yearly']) : {}),
    godQuestions: filterEmpty(data['scripture-god-questions-yearly'] ? JSON.parse(data['scripture-god-questions-yearly']) : {}),
    freeQuestions: filterEmpty(data['scripture-free-questions-yearly'] ? JSON.parse(data['scripture-free-questions-yearly']) : {}),
    thanks: filterEmpty(data['scripture-thanks-yearly'] ? JSON.parse(data['scripture-thanks-yearly']) : {}),
    prayers: filterEmpty(data['scripture-prayers-yearly'] ? JSON.parse(data['scripture-prayers-yearly']) : {}),
    todos: filterEmpty(data['scripture-todos-yearly'] ? JSON.parse(data['scripture-todos-yearly']) : {}),
    customScriptures: filterEmpty(data['custom-scriptures-yearly'] ? JSON.parse(data['custom-scriptures-yearly']) : {}),
    weeklyScriptures: filterEmpty(data['weekly-scriptures-yearly'] ? JSON.parse(data['weekly-scriptures-yearly']) : {})
  };
  
  console.log('💾 단일 통합 파일 생성 중...');
  console.log('✨ 빈 기록은 자동으로 제외됩니다');
  
  const blob = new Blob([JSON.stringify(backup, null, 2)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'scripture-backup-' + new Date().toISOString().split('T')[0] + '.json';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  
  console.log('✅ 완료! 하나의 통합 JSON 파일이 다운로드되었습니다!');
  console.log('📊 포함된 데이터 (빈 기록 제외):');
  console.log('  - 읊조리기 횟수:', Object.keys(backup.checkCounts).length + '개');
  console.log('  - 묵상 메모:', Object.keys(backup.memos).length + '개');
  console.log('  - 주일 말씀:', Object.keys(backup.sundayWords).length + '개');
  console.log('  - 감사:', Object.keys(backup.thanks).length + '개');
  console.log('  - 기도:', Object.keys(backup.prayers).length + '개');
  console.log('  - 할 일:', Object.keys(backup.todos).length + '개');
  console.log('  - 커스텀 월 데이터:', Object.keys(backup.customScriptures).length + '개월');
  console.log('');
  console.log('🎉 이제 새 버전의 "데이터 가져오기"에서 이 파일을 불러오세요!');
})()`}</pre>
                    </div>
                    <button
                      onClick={() => {
                        const code = `(async () => {
  console.log('🚀 데이터 통합 추출을 시작합니다...');
  console.log('⏳ 모든 데이터를 하나의 JSON 파일로 통합합니다...');
  
  const data = {};
  const keys = [
    'scripture-checks-yearly',
    'scripture-memos-yearly',
    'scripture-praises-yearly',
    'scripture-sunday-words-yearly',
    'scripture-thanks-yearly',
    'scripture-prayers-yearly',
    'scripture-todos-yearly',
    'custom-scriptures-yearly'
  ];
  
  console.log('📦 8개 카테고리 데이터 수집 중...');
  
  for (const key of keys) {
    try {
      const isShared = key.includes('custom') || key.includes('admin');
      const result = await window.storage.get(key, isShared);
      if (result && result.value) {
        data[key] = result.value;
        console.log('✅ ' + key + ' 수집 완료');
      }
    } catch(e) {
      console.log('⚠️ ' + key + ' 없음 (정상)');
    }
  }
  
  console.log('🔄 데이터 통합 및 정리 중...');
  
  // 빈 데이터 필터링 함수
  const filterEmpty = (obj) => {
    if (!obj) return {};
    const filtered = {};
    for (const [key, value] of Object.entries(obj)) {
      if (value && (
        (typeof value === 'string' && value.length > 0) ||
        (typeof value === 'number' && value > 0) ||
        (Array.isArray(value) && value.length > 0 && value.some(v => v && v.text)) ||
        (typeof value === 'object' && Object.keys(value).length > 0)
      )) {
        filtered[key] = value;
      }
    }
    return filtered;
  };
  
  const backup = {
    version: "서서울성서침례교회",
    exportDate: new Date().toISOString(),
    checkCounts: filterEmpty(data['scripture-checks-yearly'] ? JSON.parse(data['scripture-checks-yearly']) : {}),
    memos: filterEmpty(data['scripture-memos-yearly'] ? JSON.parse(data['scripture-memos-yearly']) : {}),
    praises: filterEmpty(data['scripture-praises-yearly'] ? JSON.parse(data['scripture-praises-yearly']) : {}),
    sundayWords: filterEmpty(data['scripture-sunday-words-yearly'] ? JSON.parse(data['scripture-sunday-words-yearly']) : {}),
    thanks: filterEmpty(data['scripture-thanks-yearly'] ? JSON.parse(data['scripture-thanks-yearly']) : {}),
    prayers: filterEmpty(data['scripture-prayers-yearly'] ? JSON.parse(data['scripture-prayers-yearly']) : {}),
    todos: filterEmpty(data['scripture-todos-yearly'] ? JSON.parse(data['scripture-todos-yearly']) : {}),
    customScriptures: filterEmpty(data['custom-scriptures-yearly'] ? JSON.parse(data['custom-scriptures-yearly']) : {})
  };
  
  console.log('💾 단일 통합 파일 생성 중...');
  console.log('✨ 빈 기록은 자동으로 제외됩니다');
  
  const blob = new Blob([JSON.stringify(backup, null, 2)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'scripture-backup-' + new Date().toISOString().split('T')[0] + '.json';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  
  console.log('✅ 완료! 하나의 통합 JSON 파일이 다운로드되었습니다!');
  console.log('📊 포함된 데이터 (빈 기록 제외):');
  console.log('  - 읊조리기 횟수:', Object.keys(backup.checkCounts).length + '개');
  console.log('  - 묵상 메모:', Object.keys(backup.memos).length + '개');
  console.log('  - 찬송:', Object.keys(backup.praises).length + '개');
  console.log('  - 요일별 묵상:', Object.keys(backup.sundayWords).length + '개');
  console.log('  - 인물 질문:', Object.keys(backup.personQuestions).length + '개');
  console.log('  - 하나님께 질문:', Object.keys(backup.godQuestions).length + '개');
  console.log('  - 자유 질문:', Object.keys(backup.freeQuestions).length + '개');
  console.log('  - 감사:', Object.keys(backup.thanks).length + '개');
  console.log('  - 기도:', Object.keys(backup.prayers).length + '개');
  console.log('  - 할 일:', Object.keys(backup.todos).length + '개');
  console.log('  - 커스텀 월 데이터:', Object.keys(backup.customScriptures).length + '개월');
  console.log('  - 주간 본문:', Object.keys(backup.weeklyScriptures).length + '개');
  console.log('');
  console.log('🎉 이제 새 버전의 "데이터 가져오기"에서 이 파일을 불러오세요!');
})()`;
                        navigator.clipboard.writeText(code);
                        alert('✅ 개선된 통합 추출 코드가 클립보드에 복사되었습니다!');
                      }}
                      className="mt-2 w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all font-semibold text-sm"
                    >
                      📋 통합 추출 코드 복사하기
                    </button>
                    <div className="mt-2 p-2 bg-green-50 border border-green-300 rounded-lg">
                      <p className="text-xs text-green-700 font-semibold">
                        ✨ 이 코드는 개선되어 다음과 같이 작동합니다:<br/>
                        • 12개 카테고리의 모든 데이터를 하나의 JSON 파일로 통합<br/>
                        • 빈 기록은 자동으로 제외<br/>
                        • 수백 개 파일 문제 완전 해결!
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              
              {/* 5단계 */}
              <div className="bg-gray-50 rounded-xl p-4">
                <div className="flex items-start gap-3">
                  <div className="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">5</div>
                  <div className="flex-1">
                    <h4 className="font-bold text-gray-800 mb-2">파일 다운로드 확인</h4>
                    <p className="text-sm text-gray-600">
                      <code className="bg-gray-200 px-2 py-1 rounded">scripture-backup-YYYY-MM-DD.json</code> 파일이 다운로드됩니다.
                    </p>
                  </div>
                </div>
              </div>
              
              {/* 6단계 */}
              <div className="bg-gray-50 rounded-xl p-4">
                <div className="flex items-start gap-3">
                  <div className="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">6</div>
                  <div className="flex-1">
                    <h4 className="font-bold text-gray-800 mb-2">새 버전에서 가져오기</h4>
                    <p className="text-sm text-gray-600">
                      다운로드한 JSON 파일을 새 버전의 "데이터 가져오기" 기능을 통해 불러오면 완료!
                    </p>
                  </div>
                </div>
              </div>
            </div>
            
            <div className="bg-amber-50 border-2 border-amber-300 rounded-xl p-4">
              <h3 className="font-bold text-amber-800 mb-2">💡 팁</h3>
              <ul className="text-sm text-gray-600 space-y-1">
                <li>• 코드 실행 후 Console에 에러가 나타나면 새로고침 후 다시 시도하세요.</li>
                <li>• 다운로드된 파일을 안전한 곳에 백업해두세요.</li>
                <li>• <span className="font-semibold text-green-600">12개 카테고리(읊조리기, 묵상, 찬송, 요일별묵상, 인물질문, 하나님질문, 자유질문, 감사, 기도, 할일, 커스텀월, 주간본문)가 모두 포함됩니다.</span></li>
                <li>• <span className="font-semibold text-green-600">빈 기록은 자동으로 제외되어 실제로 작성한 내용만 포함됩니다.</span></li>
                <li>• 단 하나의 JSON 파일만 다운로드되므로 수백 개 파일 문제가 발생하지 않습니다!</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // 월 삭제 화면 - 2단계: 선택 후 삭제
  if (showDeleteMonth) {
    const customMonthKeys = Object.keys(customScriptures)
      .filter(key => customScriptures[key] && customScriptures[key].length > 0)
      .sort((a, b) => {
        const [yearA, monthA] = a.split('-').map(Number);
        const [yearB, monthB] = b.split('-').map(Number);
        if (yearA !== yearB) return yearA - yearB;
        return monthA - monthB;
      });
    
    const debugInfo = `삭제 가능한 월: ${customMonthKeys.length}개\n${customMonthKeys.join(', ')}`;
    
    // 삭제 확인 모달
    if (showDeleteConfirm && selectedDeleteKey) {
      const [year, month] = selectedDeleteKey.split('-');
      const dataCount = customScriptures[selectedDeleteKey]?.length || 0;
      
      return (
        <div className="min-h-screen flex items-center justify-center p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
          <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full">
            <h2 className="text-2xl font-bold text-red-600 mb-6 text-center">⚠️ 삭제 확인</h2>
            
            <div className="bg-red-50 border-2 border-red-300 rounded-xl p-6 mb-6">
              <p className="text-center text-lg font-bold text-gray-800 mb-4">
                정말로 삭제하시겠습니까?
              </p>
              <div className="space-y-2 text-gray-700">
                <p>📅 <strong>{year}년 {month}월</strong></p>
                <p>📊 <strong>{dataCount}일</strong> 분량의 데이터</p>
              </div>
              <p className="text-red-600 font-bold text-center mt-4">
                ⚠️ 이 작업은 되돌릴 수 없습니다!
              </p>
            </div>
            
            <div className="grid grid-cols-2 gap-4">
              <button
                onClick={() => {
                  setShowDeleteConfirm(false);
                  setDeleteDebugInfo('❌ 삭제가 취소되었습니다.');
                }}
                className="px-6 py-4 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold text-lg"
              >
                취소
              </button>
              <button
                onClick={async () => {
                  setShowDeleteConfirm(false);
                  setDeleteDebugInfo('✅ 삭제를 시작합니다...');
                  
                  try {
                    const newCustomScriptures = { ...customScriptures };
                    delete newCustomScriptures[selectedDeleteKey];
                    
                    setDeleteDebugInfo(prev => prev + '\n삭제 전: ' + Object.keys(customScriptures).length + '개');
                    setDeleteDebugInfo(prev => prev + '\n삭제 후: ' + Object.keys(newCustomScriptures).length + '개');
                    
                    setCustomScriptures(newCustomScriptures);
                    
                    setDeleteDebugInfo(prev => prev + '\n\nStorage 저장 중...');
                    await window.storage.set('custom-scriptures-yearly', JSON.stringify(newCustomScriptures), true);
                    setDeleteDebugInfo(prev => prev + '\n✅ 저장 완료!');
                    
                    alert(`✅ ${year}년 ${month}월 데이터가 삭제되었습니다.`);
                    
                    // 현재 보고 있는 월이 삭제된 경우 다른 월로 이동
                    if (`${currentYear}-${currentMonth}` === selectedDeleteKey) {
                      const remainingKeys = Object.keys(newCustomScriptures);
                      const defaultKeys = Object.keys(defaultScripturesByMonth);
                      const allKeys = [...new Set([...remainingKeys, ...defaultKeys])];
                      
                      if (allKeys.length > 0) {
                        const [newYear, newMonth] = allKeys[0].split('-');
                        setCurrentYear(parseInt(newYear));
                        setCurrentMonth(parseInt(newMonth));
                        setCurrentIndex(0);
                      }
                    }
                    
                    setSelectedDeleteKey('');
                    
                    // 데이터 재로드
                    const result = await window.storage.get('custom-scriptures-yearly', true);
                    if (result) {
                      setCustomScriptures(JSON.parse(result.value));
                    }
                    
                    setTimeout(() => {
                      setShowDeleteMonth(false);
                      setDeleteDebugInfo('');
                      setShowMonthly(false);
                      setShowList(false);
                      // 관리자 메뉴로 돌아가기
                      setShowAdminMenu(true);
                    }, 2000);
                    
                  } catch (error) {
                    const errorMsg = `❌ 오류!\n${error.message}`;
                    setDeleteDebugInfo(prev => prev + '\n\n' + errorMsg);
                    alert('삭제 실패: ' + error.message);
                  }
                }}
                className="px-6 py-4 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all font-semibold text-lg"
              >
                삭제
              </button>
            </div>
          </div>
        </div>
      );
    }
    

    
    return (
      <div className="min-h-screen flex items-center justify-center p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto">
          <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">🗑️ 월 데이터 삭제</h2>
          
          {/* 디버그 정보 표시 */}
          <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
            <p className="text-xs text-blue-700 font-mono whitespace-pre-wrap">{debugInfo}</p>
          </div>
          
          {deleteDebugInfo && (
            <div className="mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
              <p className="text-xs text-yellow-800 font-mono whitespace-pre-wrap">{deleteDebugInfo}</p>
            </div>
          )}
          
          {customMonthKeys.length === 0 ? (
            <div className="text-center py-8">
              <p className="text-gray-500 mb-4">삭제할 수 있는 커스텀 데이터가 없습니다.</p>
              <p className="text-sm text-gray-400">기본 데이터(2025년 12월)는 삭제할 수 없습니다.</p>
            </div>
          ) : (
            <div className="space-y-4">
              {/* 경고 */}
              <div className="p-3 bg-red-100 border-2 border-red-300 rounded-lg">
                <p className="text-red-700 font-bold text-center">⚠️ 삭제된 데이터는 복구할 수 없습니다!</p>
              </div>
              
              {/* 1단계: 월 선택 */}
              <div>
                <label className="block text-sm font-semibold text-gray-700 mb-2">1단계: 삭제할 월 선택</label>
                <select
                  value={selectedDeleteKey}
                  onChange={(e) => {
                    const value = e.target.value;
                    setSelectedDeleteKey(value);
                    setDeleteDebugInfo(`선택된 키: ${value || '(없음)'}`);
                  }}
                  className="w-full px-4 py-3 border-2 border-gray-300 rounded-xl text-lg"
                >
                  <option value="">-- 선택하세요 --</option>
                  {customMonthKeys.map(key => {
                    const [year, month] = key.split('-');
                    const dataCount = customScriptures[key]?.length || 0;
                    return (
                      <option key={key} value={key}>
                        {year}년 {month}월 ({dataCount}일)
                      </option>
                    );
                  })}
                </select>
              </div>
              
              {/* 선택된 월 표시 */}
              {selectedDeleteKey && (
                <div className="p-4 bg-red-50 border-2 border-red-300 rounded-xl">
                  <p className="text-center text-red-700 font-bold">
                    선택됨: {selectedDeleteKey.split('-')[0]}년 {selectedDeleteKey.split('-')[1]}월
                  </p>
                  <p className="text-center text-red-600 text-sm mt-1">
                    ({customScriptures[selectedDeleteKey]?.length || 0}일 분량의 데이터)
                  </p>
                </div>
              )}
              
              {/* 2단계: 삭제 버튼 */}
              <div>
                <label className="block text-sm font-semibold text-gray-700 mb-2">2단계: 삭제 실행</label>
                <button
                  type="button"
                  onClick={() => {
                    if (!selectedDeleteKey || selectedDeleteKey === '') {
                      alert('삭제할 월을 선택해주세요.');
                      return;
                    }
                    
                    // 커스텀 확인 화면 표시
                    setShowDeleteConfirm(true);
                  }}
                  disabled={!selectedDeleteKey}
                  className={`w-full p-4 rounded-xl font-bold text-lg transition-all ${
                    selectedDeleteKey 
                      ? 'bg-red-600 text-white hover:bg-red-700 active:bg-red-800' 
                      : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                  }`}
                >
                  🗑️ 선택한 월 삭제하기
                </button>
              </div>
            </div>
          )}
          
          <button
            type="button"
            onClick={() => {
              setSelectedDeleteKey('');
              setDeleteDebugInfo('');
              setShowDeleteConfirm(false);
              setShowDeleteMonth(false);
              setShowMonthly(false);
              setShowList(false);
              setShowAdminMenu(true);
            }}
            className="w-full mt-6 px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
          >
            닫기
          </button>
        </div>
      </div>
    );
  }

  // 주간 본문 입력 화면
  if (showWeeklyInput) {
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <h1 className="text-2xl font-bold text-white">📖 주간 본문 추가하기</h1>
            <button
              onClick={() => {
                setShowWeeklyInput(false);
                setShowMonthly(false);
                setShowList(false);
                setWeeklyInputText('');
                setParsedWeeklyData([]);
                setShowAdminMenu(true);
              }}
              className="px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
            >
              닫기
            </button>
          </div>

          <div className="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div className="mb-4">
              <label className="block text-sm font-semibold text-gray-700 mb-2">
                텍스트 붙여넣기
              </label>
              <textarea
                value={weeklyInputText}
                onChange={(e) => setWeeklyInputText(e.target.value)}
                placeholder={`아래 형식으로 붙여넣으세요:

2025.12.22 - 27
창세기 1:1-10
태초에 하나님이 천지를 창조하시니라 땅이 혼돈하고...

2025.12.29 - 1.4
창세기 1:11-25
하나님이 이르시되 땅은 풀과...`}
                className="w-full h-64 p-4 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-indigo-500 resize-none font-mono text-sm text-left"
              />
            </div>

            <button
              onClick={parseWeeklyText}
              className="w-full px-6 py-3 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-all font-semibold"
            >
              🔍 파싱하기
            </button>
          </div>

          {/* 파싱 결과 미리보기 */}
          {parsedWeeklyData.length > 0 && (
            <div className="bg-white rounded-2xl shadow-lg p-6 mb-6">
              <div className="flex items-center justify-between mb-4">
                <h2 className="text-lg font-bold text-gray-800">
                  미리보기 ({parsedWeeklyData.length}개)
                </h2>
              </div>
              
              <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                <p className="text-blue-700 text-sm">💡 <strong>팁:</strong> 아래 입력칸을 클릭하면 성경구절이나 본문을 직접 수정할 수 있습니다.</p>
              </div>
              
              <div className="space-y-3 max-h-96 overflow-y-auto pr-2">
                {parsedWeeklyData.map((item, index) => (
                  <div 
                    key={index} 
                    className="border-2 rounded-xl p-4"
                    style={{ borderColor: '#6366f1', backgroundColor: '#e0e7ff' }}
                  >
                    <div className="flex items-center gap-3 mb-3">
                      <span className="font-bold text-gray-800 text-lg">{item.weekLabel}</span>
                      <span className="text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full">
                        키: {item.weekKey}
                      </span>
                    </div>
                    <div className="space-y-2">
                      <div>
                        <label className="text-xs text-gray-500 mb-1 block">성경구절</label>
                        <input
                          type="text"
                          value={item.reference}
                          onChange={(e) => updateParsedWeeklyData(index, 'reference', e.target.value)}
                          placeholder="예: 창세기 1:1-10"
                          className="w-full px-3 py-2 rounded-lg border-2 focus:outline-none focus:border-indigo-500 text-sm font-semibold"
                          style={{ borderColor: '#6366f1' }}
                        />
                      </div>
                      <div>
                        <label className="text-xs text-gray-500 mb-1 block">본문</label>
                        <textarea
                          value={item.verse}
                          onChange={(e) => updateParsedWeeklyData(index, 'verse', e.target.value)}
                          placeholder="본문 내용을 입력하세요"
                          rows={9}
                          className="w-full px-3 py-2 rounded-lg border-2 focus:outline-none focus:border-indigo-500 text-sm resize-none leading-relaxed"
                          style={{ borderColor: '#6366f1', lineHeight: '1.8' }}
                        />
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <div className="flex justify-center gap-4 mt-6">
                <button
                  onClick={() => setParsedWeeklyData([])}
                  className="px-8 py-3 bg-gray-500 text-white rounded-2xl hover:bg-gray-600 transition-all font-semibold"
                >
                  초기화
                </button>
                <button
                  onClick={saveWeeklyData}
                  className={`px-8 py-3 rounded-2xl transition-all font-semibold shadow-lg ${
                    weeklySaved 
                      ? 'bg-green-600 text-white cursor-default' 
                      : 'bg-green-500 text-white hover:bg-green-600'
                  }`}
                  disabled={weeklySaved}
                >
                  {weeklySaved ? '✅ 저장 완료!' : '💾 저장하기'}
                </button>
              </div>
            </div>
          )}

          {/* 형식 안내 */}
          <div className="bg-white bg-opacity-90 rounded-2xl p-6">
            <h3 className="font-bold text-gray-800 mb-3">📋 형식 안내</h3>
            <div className="text-sm text-gray-600 space-y-2">
              <p>• 첫 줄: <strong>"년.월.일 - 일"</strong> (예: 2025.12.22 - 27)</p>
              <p>• 다음 줄: <strong>"성경구절"</strong> (예: 창세기 1:1-10)</p>
              <p>• 다음 줄: <strong>"본문 내용"</strong></p>
              <p>• 주간 사이에 빈 줄이 있어도 됩니다</p>
              <p className="text-indigo-600 font-semibold">💡 월이 바뀌는 경우: 2025.12.29 - 1.4 (12월 29일~1월 4일)</p>
            </div>
            <div className="mt-4 p-3 bg-gray-100 rounded-lg">
              <p className="text-xs text-gray-500 mb-2">예시:</p>
              <pre className="text-xs text-gray-700 whitespace-pre-wrap">2025.12.22 - 27
창세기 1:1-10
태초에 하나님이 천지를 창조하시니라 땅이 혼돈하고...

2025.12.29 - 1.4
창세기 1:11-25
하나님이 이르시되 땅은 풀과 씨 맺는 채소와...</pre>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // 텍스트 import 화면
  if (showTextImport) {
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <h1 className="text-2xl font-bold text-white">📝 텍스트로 월 추가하기</h1>
            <button
              onClick={() => {
                setShowTextImport(false);
                setShowMonthly(false);
                setShowList(false);
                setImportText('');
                setParsedData([]);
                setShowAdminMenu(true);
              }}
              className="px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
            >
              닫기
            </button>
          </div>

          {/* 년도 선택 */}
          <div className="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div className="flex items-center gap-4 mb-4">
              <div>
                <label className="block text-sm font-semibold text-gray-600 mb-1">년도</label>
                <select
                  value={importYear}
                  onChange={(e) => setImportYear(parseInt(e.target.value))}
                  className="px-4 py-2 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500"
                >
                  {[2025, 2026, 2027, 2028, 2029, 2030].map(y => (
                    <option key={y} value={y}>{y}년</option>
                  ))}
                </select>
              </div>
              <p className="text-gray-600 text-sm mt-5">* 월은 텍스트에서 자동으로 감지됩니다</p>
            </div>

            <div className="mb-4">
              <label className="block text-sm font-semibold text-gray-700 mb-2">
                워드/텍스트 내용 붙여넣기
              </label>
              <textarea
                value={importText}
                onChange={(e) => setImportText(e.target.value)}
                placeholder={`아래 4가지 형식 중 원하는 방식으로 붙여넣으세요:

[형식 1] 1월 1일 시편 23:1 여호와는 나의 목자시니...

[형식 2] 1월 2일 시편 23:2
그가 나를 푸른 풀밭에 누이시며...

[형식 3] 1월 3일
요한복음 3:16 하나님이 세상을 이처럼...

[형식 4] 1월 4일
요한복음 3:17
하나님이 그 아들을 세상에...`}
                className="w-full h-64 p-4 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 resize-none font-mono text-sm text-left"
              />
            </div>

            <button
              onClick={parseImportText}
              className="w-full px-6 py-3 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all font-semibold"
            >
              🔍 파싱하기
            </button>
          </div>

          {/* 파싱 결과 미리보기 */}
          {parsedData.length > 0 && (
            <div className="bg-white rounded-2xl shadow-lg p-6 mb-6">
              <div className="flex items-center justify-between mb-4">
                <h2 className="text-lg font-bold text-gray-800">
                  미리보기: {importYear}년 {importMonth}월 ({parsedData.length}일)
                </h2>
                {hasMonthData(importYear, importMonth) && (
                  <span className="text-amber-600 font-semibold text-sm">⚠️ 기존 데이터 덮어쓰기</span>
                )}
              </div>
              
              <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                <p className="text-blue-700 text-sm">💡 <strong>팁:</strong> 아래 입력칸을 클릭하면 성경구절이나 본문을 직접 수정할 수 있습니다.</p>
              </div>
              
              <div className="space-y-3 max-h-96 overflow-y-auto pr-2">
                {parsedData.map((item, index) => {
                  const color = dayColors[item.day];
                  return (
                    <div 
                      key={index} 
                      className="border-2 rounded-xl p-4"
                      style={{ borderColor: color.bg, backgroundColor: color.light }}
                    >
                      <div className="flex items-center gap-3 mb-3">
                        <span className="font-bold text-gray-800">{item.date}</span>
                        <span 
                          className="px-3 py-1 rounded-full text-white text-sm font-semibold"
                          style={{ backgroundColor: color.bg }}
                        >
                          {item.day}
                        </span>
                      </div>
                      <div className="space-y-2">
                        <div>
                          <label className="text-xs text-gray-500 mb-1 block">성경구절</label>
                          <input
                            type="text"
                            value={item.reference}
                            onChange={(e) => updateParsedData(index, 'reference', e.target.value)}
                            placeholder="예: 로마서 5:8"
                            className="w-full px-3 py-2 rounded-lg border-2 focus:outline-none focus:border-purple-500 text-sm font-semibold"
                            style={{ color: color.dark, borderColor: color.bg }}
                          />
                        </div>
                        <div>
                          <label className="text-xs text-gray-500 mb-1 block">본문</label>
                          <textarea
                            value={item.verse}
                            onChange={(e) => updateParsedData(index, 'verse', e.target.value)}
                            placeholder="본문 내용을 입력하세요"
                            rows={2}
                            className="w-full px-3 py-2 rounded-lg border-2 focus:outline-none focus:border-purple-500 text-sm resize-none"
                            style={{ borderColor: color.bg }}
                          />
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>

              <div className="flex justify-center gap-4 mt-6">
                <button
                  onClick={() => setParsedData([])}
                  className="px-8 py-3 bg-gray-500 text-white rounded-2xl hover:bg-gray-600 transition-all font-semibold"
                >
                  초기화
                </button>
                <button
                  onClick={saveImportedData}
                  className="px-8 py-3 bg-green-500 text-white rounded-2xl hover:bg-green-600 transition-all font-semibold shadow-lg"
                >
                  💾 저장하기
                </button>
              </div>
            </div>
          )}

          {/* 형식 안내 */}
          <div className="bg-white bg-opacity-90 rounded-2xl p-6">
            <h3 className="font-bold text-gray-800 mb-3">📋 지원되는 형식 (4가지)</h3>
            <div className="text-sm text-gray-600 space-y-3">
              <div className="bg-blue-50 p-3 rounded-lg">
                <p className="font-bold text-blue-800 mb-1">✅ 형식 1: 한 줄에 모두</p>
                <code className="text-xs">1월 1일 시편 23:1 여호와는 나의 목자시니...</code>
              </div>
              <div className="bg-green-50 p-3 rounded-lg">
                <p className="font-bold text-green-800 mb-1">✅ 형식 2: 날짜+성경구절 / 본문 분리</p>
                <code className="text-xs">1월 1일 시편 23:1<br/>여호와는 나의 목자시니...</code>
              </div>
              <div className="bg-purple-50 p-3 rounded-lg">
                <p className="font-bold text-purple-800 mb-1">✅ 형식 3: 날짜 / 성경구절+본문</p>
                <code className="text-xs">1월 1일<br/>시편 23:1 여호와는 나의 목자시니...</code>
              </div>
              <div className="bg-amber-50 p-3 rounded-lg">
                <p className="font-bold text-amber-800 mb-1">✅ 형식 4: 모두 분리</p>
                <code className="text-xs">1월 1일<br/>시편 23:1<br/>여호와는 나의 목자시니...</code>
              </div>
              <p className="text-xs text-gray-500 mt-3">💡 요일은 선택사항입니다. 없으면 자동 계산됩니다.</p>
              <p className="text-xs text-gray-500">💡 날짜 사이에 빈 줄이 있어도 됩니다.</p>
            </div>
            <div className="mt-4 p-3 bg-gray-100 rounded-lg">
              <p className="text-xs text-gray-500 mb-2">예시 (혼합 사용 가능):</p>
              <pre className="text-xs text-gray-700 whitespace-pre-wrap">1월 1일 시편 23:1 여호와는 나의 목자시니 내게 부족함이 없으리로다

1월 2일 시편 23:2
그가 나를 푸른 풀밭에 누이시며 쉴 만한 물 가로 인도하시는도다

1월 3일
요한복음 3:16 하나님이 세상을 이처럼 사랑하사...</pre>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // 날짜별 수정 화면
  if (showNewMonthEditor) {
    const scriptures = getScriptures();
    
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <h1 className="text-2xl font-bold text-white">✏️ {currentYear}년 {currentMonth}월 날짜별 수정</h1>
            <button
              onClick={() => setShowNewMonthEditor(false)}
              className="px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
            >
              닫기
            </button>
          </div>

          <div className="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
              <p className="text-blue-700 text-sm">💡 수정할 날짜를 찾아 성경구절이나 본문을 직접 수정하세요. 수정 후 아래 저장 버튼을 눌러주세요.</p>
            </div>
            
            <div className="space-y-4 max-h-[60vh] overflow-y-auto pr-2">
              {scriptures.map((item, index) => {
                const color = dayColors[item.day];
                return (
                  <div 
                    key={index} 
                    className="border-2 rounded-xl p-4"
                    style={{ borderColor: color.bg, backgroundColor: color.light }}
                  >
                    <div className="flex items-center gap-3 mb-3">
                      <span className="font-bold text-gray-800 text-lg">{item.date}</span>
                      <span 
                        className="px-3 py-1 rounded-full text-white text-sm font-semibold"
                        style={{ backgroundColor: color.bg }}
                      >
                        {item.day}
                      </span>
                      {item.day === '주일' && (
                        <input
                          type="text"
                          value={item.theme || ''}
                          onChange={(e) => {
                            const updated = [...scriptures];
                            updated[index] = { ...updated[index], theme: e.target.value };
                            setNewMonthData(updated);
                          }}
                          placeholder="주일 테마"
                          className="flex-1 px-3 py-1 rounded-lg border text-sm"
                        />
                      )}
                    </div>
                    <div className="space-y-2">
                      <div>
                        <label className="text-xs text-gray-500 mb-1 block">성경구절</label>
                        <input
                          type="text"
                          value={newMonthData[index]?.reference ?? item.reference}
                          onChange={(e) => {
                            const updated = scriptures.map((s, i) => 
                              i === index ? { ...s, reference: e.target.value } : s
                            );
                            setNewMonthData(updated);
                          }}
                          placeholder="예: 로마서 5:8"
                          className="w-full px-3 py-2 rounded-lg border-2 focus:outline-none focus:border-purple-500 font-semibold"
                          style={{ borderColor: color.bg }}
                        />
                      </div>
                      <div>
                        <label className="text-xs text-gray-500 mb-1 block">본문</label>
                        <textarea
                          value={newMonthData[index]?.verse ?? item.verse}
                          onChange={(e) => {
                            const updated = scriptures.map((s, i) => 
                              i === index ? { ...s, verse: e.target.value } : s
                            );
                            setNewMonthData(updated);
                          }}
                          placeholder="본문 내용"
                          rows={2}
                          className="w-full px-3 py-2 rounded-lg border-2 focus:outline-none focus:border-purple-500 resize-none"
                          style={{ borderColor: color.bg }}
                        />
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          </div>

          <div className="flex justify-center gap-4">
            <button
              onClick={() => {
                setNewMonthData([]);
                setEditSaved(false);
                setShowNewMonthEditor(false);
                setShowMonthly(false);
                setShowList(false);
                setShowAdminMenu(true);
              }}
              disabled={editSaved}
              className={`px-8 py-3 rounded-2xl transition-all font-semibold ${
                editSaved
                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                  : 'bg-gray-500 text-white hover:bg-gray-600'
              }`}
            >
              취소
            </button>
            <button
              onClick={async () => {
                if (newMonthData.length === 0) {
                  alert('수정된 내용이 없습니다.');
                  return;
                }
                
                setEditSaved(true);
                const key = `${currentYear}-${currentMonth}`;
                const newCustomScriptures = { ...customScriptures, [key]: newMonthData };
                setCustomScriptures(newCustomScriptures);
                
                try {
                  await window.storage.set('custom-scriptures-yearly', JSON.stringify(newCustomScriptures), true);
                  
                  // 저장 후 즉시 데이터 다시 로드
                  const result = await window.storage.get('custom-scriptures-yearly', true);
                  if (result) setCustomScriptures(JSON.parse(result.value));
                  
                  setTimeout(() => {
                    alert('✅ 저장되었습니다!');
                    
                    // 모든 화면 state 초기화
                    setNewMonthData([]);
                    setEditSaved(false);
                    setShowNewMonthEditor(false);
                    setShowMonthly(false);
                    setShowList(false);
                    
                    // 관리자 메뉴로 돌아가기
                    setShowAdminMenu(true);
                  }, 500);
                } catch (e) {
                  console.log('Storage error:', e);
                  alert('❌ 저장 실패');
                  setEditSaved(false);
                }
              }}
              disabled={newMonthData.length === 0 || editSaved}
              className={`px-8 py-3 rounded-2xl transition-all font-semibold shadow-lg ${
                editSaved
                  ? 'bg-green-600 text-white cursor-default'
                  : newMonthData.length > 0 
                    ? 'bg-green-500 text-white hover:bg-green-600' 
                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'
              }`}
            >
              {editSaved ? '✅ 저장 완료!' : '💾 저장하기'}
            </button>
          </div>
        </div>
      </div>
    );
  }



  // 성경구절 검색 화면
  if (showScriptureSearch) {
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-4xl mx-auto">
          {/* 헤더 */}
          <div className="flex items-center justify-between mb-6">
            <h1 className="text-2xl font-bold text-white">📖 성경구절 검색</h1>
            <button
              onClick={() => {
                setShowScriptureSearch(false);
                setScriptureSearchKeyword('');
                setScriptureSearchResults([]);
              }}
              className="px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
            >
              닫기
            </button>
          </div>

          {/* 검색 입력 */}
          <div className="bg-white rounded-2xl shadow-lg p-3 mb-6">
            <input
              type="text"
              value={scriptureSearchKeyword}
              onChange={(e) => {
                setScriptureSearchKeyword(e.target.value);
                performScriptureSearch(e.target.value);
              }}
              placeholder="성경 이름, 장절, 본문 내용 검색 (공백=AND, |=OR, -제외)"
              className="w-full px-3 py-2 border-2 border-blue-300 rounded-xl focus:outline-none focus:border-blue-500 text-base mb-2"
              autoFocus
            />
            <button
              onClick={() => performScriptureSearch(scriptureSearchKeyword)}
              className="w-full py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all font-semibold"
            >
              검색
            </button>
            
            {/* 검색 팁 */}
            <div className="mt-3 p-3 bg-blue-50 rounded-xl">
              <p className="text-xs font-bold text-blue-800 mb-2">💡 검색 팁</p>
              <div className="text-xs text-gray-700 space-y-1">
                <p>• <strong>AND</strong>: "창세기 믿음" → 창세기와 믿음 모두 포함</p>
                <p>• <strong>OR</strong>: "창세기 | 출애굽기" → 창세기 또는 출애굽기</p>
                <p>• <strong>NOT</strong>: "창세기 -믿음" → 창세기 포함, 믿음 제외</p>
              </div>
            </div>
            
            {scriptureSearchKeyword && (
              <div className="mt-3 text-sm text-gray-600">
                "{scriptureSearchKeyword}" 검색 결과: {scriptureSearchResults.length}개
              </div>
            )}
          </div>

          {/* 검색 결과 */}
          {scriptureSearchResults.length > 0 ? (
            <div className="space-y-4">
              {scriptureSearchResults.map((result, index) => {
                if (result.type === 'daily') {
                  const color = dayColors[result.day];
                  return (
                    <div
                      key={`daily-${index}`}
                      onClick={() => handleScriptureSearchResultClick(result)}
                      className="bg-white rounded-2xl shadow-lg p-6 cursor-pointer hover:shadow-2xl transition-all transform hover:-translate-y-1"
                      style={{ borderTop: `6px solid ${color.bg}` }}
                    >
                      <div className="flex items-start justify-between mb-3">
                        <div>
                          <div className="flex items-center gap-2 mb-2">
                            <span className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-semibold">
                              일별 성경
                            </span>
                            <h3 className="text-xl font-bold text-gray-800">
                              {result.year}년 {result.date}
                            </h3>
                            <span 
                              className="px-3 py-1 rounded-full text-sm font-semibold text-white"
                              style={{ backgroundColor: color.bg }}
                            >
                              {result.day}
                            </span>
                            {result.theme && (
                              <span className="px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800">
                                {result.theme}
                              </span>
                            )}
                          </div>
                        </div>
                      </div>
                      
                      <div className="mt-3 space-y-2">
                        <div className="p-3 bg-blue-50 rounded-lg">
                          <p className="font-bold text-blue-800 mb-1">{result.reference}</p>
                          <p className="text-sm text-gray-700 leading-relaxed">{result.verse}</p>
                        </div>
                      </div>
                    </div>
                  );
                } else if (result.type === 'weekly') {
                  return (
                    <div
                      key={`weekly-${index}`}
                      onClick={() => handleScriptureSearchResultClick(result)}
                      className="bg-white rounded-2xl shadow-lg p-6 cursor-pointer hover:shadow-2xl transition-all transform hover:-translate-y-1"
                      style={{ borderTop: '6px solid #6366f1' }}
                    >
                      <div className="flex items-start justify-between mb-3">
                        <div>
                          <div className="flex items-center gap-2 mb-2">
                            <span className="text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full font-semibold">
                              주간 본문
                            </span>
                            <h3 className="text-xl font-bold text-gray-800">
                              {result.weekLabel || result.dateRange}
                            </h3>
                          </div>
                        </div>
                      </div>
                      
                      <div className="mt-3 space-y-2">
                        <div className="p-3 bg-indigo-50 rounded-lg">
                          <p className="font-bold text-indigo-800 mb-1">{result.reference}</p>
                          <p className="text-sm text-gray-700 leading-relaxed">{result.verse}</p>
                        </div>
                      </div>
                    </div>
                  );
                }
                return null;
              })}
            </div>
          ) : (
            <div className="bg-white rounded-2xl shadow-lg p-6 text-center">
              <div className="text-4xl mb-3">📖</div>
              <p className="text-base text-gray-600 mb-1">성경구절을 검색하세요</p>
              <p className="text-xs text-gray-500">일별 성경구절과 주간 본문 검색</p>
            </div>
          )}
        </div>
      </div>
    );
  }

  // 검색 화면
  if (showSearch) {
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-4xl mx-auto">
          {/* 헤더 */}
          <div className="flex items-center justify-between mb-6">
            <h1 className="text-2xl font-bold text-white">📝 기록 검색</h1>
            <button
              onClick={() => {
                setShowSearch(false);
                setSearchKeyword('');
                setSearchResults([]);
                setSelectedTags([]);
              }}
              className="px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
            >
              닫기
            </button>
          </div>

          {/* 검색 입력 */}
          <div className="bg-white rounded-2xl shadow-lg p-3 mb-4">
            <input
              type="text"
              value={searchKeyword}
              onChange={(e) => {
                setSearchKeyword(e.target.value);
                performSearch(e.target.value);
              }}
              placeholder="키워드 검색 (공백=AND, |=OR, -제외)"
              className="w-full px-3 py-2 border-2 border-purple-300 rounded-xl focus:outline-none focus:border-purple-500 text-base mb-2"
              autoFocus
            />
            <button
              onClick={() => performSearch(searchKeyword)}
              className="w-full py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all font-semibold"
            >
              검색
            </button>
            
            {/* 검색 팁 */}
            <div className="mt-3 p-3 bg-purple-50 rounded-xl">
              <p className="text-xs font-bold text-purple-800 mb-2">💡 검색 팁</p>
              <div className="text-xs text-gray-700 space-y-1">
                <p>• <strong>AND</strong>: "기도 감사" → 기도와 감사 모두 포함</p>
                <p>• <strong>OR</strong>: "기도 | 감사" → 기도 또는 감사 중 하나</p>
                <p>• <strong>NOT</strong>: "기도 -할일" → 기도 포함, 할일 제외</p>
              </div>
            </div>
            
            {searchKeyword && (
              <div className="mt-3 text-sm text-gray-600">
                "{searchKeyword}" 검색 결과: {searchResults.length}개
              </div>
            )}
          </div>

          {/* 태그 필터 */}
          {allTags.length > 0 && (
            <div className="bg-white rounded-2xl shadow-lg p-3 mb-6">
              <p className="text-sm font-bold text-gray-700 mb-2">🏷️ 태그로 필터</p>
              <div className="flex flex-wrap gap-2">
                {allTags.map((tag, idx) => (
                  <button
                    key={idx}
                    onClick={() => {
                      const newSelected = selectedTags.includes(tag)
                        ? selectedTags.filter(t => t !== tag)
                        : [...selectedTags, tag];
                      setSelectedTags(newSelected);
                      if (newSelected.length > 0) {
                        filterByTags(newSelected);
                      } else {
                        setSearchResults([]);
                      }
                    }}
                    className={`px-3 py-1.5 rounded-full text-sm font-semibold transition-all ${
                      selectedTags.includes(tag)
                        ? 'bg-purple-500 text-white'
                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    }`}
                  >
                    {tag}
                  </button>
                ))}
              </div>
              {selectedTags.length > 0 && (
                <div className="mt-2">
                  <button
                    onClick={() => {
                      setSelectedTags([]);
                      setSearchResults([]);
                    }}
                    className="text-xs text-purple-600 hover:text-purple-800 font-semibold"
                  >
                    ✕ 태그 필터 초기화
                  </button>
                </div>
              )}
            </div>
          )}

          {/* 검색 결과 */}
          {searchResults.length > 0 ? (
            <div className="space-y-4">
              {searchResults.map((result, index) => {
                const color = dayColors[result.day];
                return (
                  <div
                    key={index}
                    onClick={() => handleSearchResultClick(result)}
                    className="bg-white rounded-2xl shadow-lg p-6 cursor-pointer hover:shadow-2xl transition-all transform hover:-translate-y-1"
                    style={{ borderTop: `6px solid ${color.bg}` }}
                  >
                    <div className="flex items-start justify-between mb-3">
                      <div>
                        <div className="flex items-center gap-2 mb-2">
                          <h3 className="text-xl font-bold text-gray-800">
                            {result.year}년 {result.date}
                          </h3>
                          <span 
                            className="px-3 py-1 rounded-full text-sm font-semibold text-white"
                            style={{ backgroundColor: color.bg }}
                          >
                            {result.day}
                          </span>
                          {result.theme && (
                            <span className="px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800">
                              {result.theme}
                            </span>
                          )}
                        </div>
                        {/* 태그 표시 */}
                        {result.tags && result.tags.length > 0 && (
                          <div className="flex flex-wrap gap-1 mt-2">
                            {result.tags.map((tag, idx) => (
                              <span key={idx} className="px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold">
                                🏷️ {tag}
                              </span>
                            ))}
                          </div>
                        )}
                      </div>
                      
                      {/* 데이터 유무 표시 */}
                      <div className="flex gap-1 flex-wrap">
                        {result.hasSundayWord && <span className="text-xs">{result.daySection?.icon || '📖'}</span>}
                        {result.hasPersonQuestion && <span className="text-xs">{result.daySection?.additionalSections?.[0]?.icon || '👤'}</span>}
                        {result.hasGodQuestion && <span className="text-xs">{result.daySection?.additionalSections?.[1]?.icon || '🙏'}</span>}
                        {result.hasFreeQuestion && <span className="text-xs">{result.daySection?.additionalSections?.[2]?.icon || '💭'}</span>}
                        {result.hasUpStory && <span className="text-xs">{result.daySection?.additionalSections?.[3]?.icon || '🎯'}</span>}
                        {result.hasMemo && <span className="text-xs">📝</span>}
                        {result.hasPraise && <span className="text-xs">🙌</span>}
                        {result.hasThank && <span className="text-xs">💝</span>}
                        {result.hasPrayer && <span className="text-xs">🙏</span>}
                        {result.hasTodo && <span className="text-xs">✅</span>}
                        {result.hasMemo2 && <span className="text-xs">📋</span>}
                      </div>
                    </div>
                    
                    {/* 모든 입력 내용 미리보기 */}
                    <div className="mt-3 space-y-2">
                      {/* 요일별 메인 섹션 */}
                      {result.hasSundayWord && (() => {
                        const key = result.key;
                        const words = sundayWords[key] || [];
                        const text = words.map(w => w.text).filter(Boolean).join(' ');
                        if (text) return (
                          <div className="p-2 bg-purple-50 rounded-lg">
                            <div className="text-xs font-semibold text-purple-600 mb-1">
                              {result.daySection?.icon || '📖'} {result.daySection?.title || '묵상'}:
                            </div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {/* 추가 섹션 1 */}
                      {result.hasPersonQuestion && result.daySection?.additionalSections?.[0] && (() => {
                        const key = result.key;
                        const items = personQuestions[key] || [];
                        const text = items.map(q => q.text).filter(Boolean).join(' ');
                        const section = result.daySection.additionalSections[0];
                        if (text) return (
                          <div className="p-2 rounded-lg" style={{ backgroundColor: section.color }}>
                            <div className="text-xs font-semibold mb-1" style={{ color: section.buttonColor }}>
                              {section.icon} {section.title}:
                            </div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {/* 추가 섹션 2 */}
                      {result.hasGodQuestion && result.daySection?.additionalSections?.[1] && (() => {
                        const key = result.key;
                        const items = godQuestions[key] || [];
                        const text = items.map(q => q.text).filter(Boolean).join(' ');
                        const section = result.daySection.additionalSections[1];
                        if (text) return (
                          <div className="p-2 rounded-lg" style={{ backgroundColor: section.color }}>
                            <div className="text-xs font-semibold mb-1" style={{ color: section.buttonColor }}>
                              {section.icon} {section.title}:
                            </div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {/* 추가 섹션 3 */}
                      {result.hasFreeQuestion && result.daySection?.additionalSections?.[2] && (() => {
                        const key = result.key;
                        const items = freeQuestions[key] || [];
                        const text = items.map(q => q.text).filter(Boolean).join(' ');
                        const section = result.daySection.additionalSections[2];
                        if (text) return (
                          <div className="p-2 rounded-lg" style={{ backgroundColor: section.color }}>
                            <div className="text-xs font-semibold mb-1" style={{ color: section.buttonColor }}>
                              {section.icon} {section.title}:
                            </div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {/* UP Story (금요일 4번째 섹션) */}
                      {result.hasUpStory && result.daySection?.additionalSections?.[3] && (() => {
                        const key = result.key;
                        const items = upStories[key] || [];
                        const text = items.map(s => s.text).filter(Boolean).join(' ');
                        const section = result.daySection.additionalSections[3];
                        if (text) return (
                          <div className="p-2 rounded-lg" style={{ backgroundColor: section.color }}>
                            <div className="text-xs font-semibold mb-1" style={{ color: section.buttonColor }}>
                              {section.icon} {section.title}:
                            </div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {/* 지금, 읊조리기 */}
                      {result.hasMemo && result.memo && (
                        <div className="p-2 bg-blue-50 rounded-lg">
                          <div className="text-xs font-semibold text-blue-600 mb-1">
                            📝 {result.day === '주일' ? '주간 돌아보기' : '지금, 읊조리기'}:
                          </div>
                          <p className="text-sm text-gray-700 line-clamp-1">{result.memo}</p>
                        </div>
                      )}
                      
                      {result.hasPraise && (() => {
                        const key = result.key;
                        const items = praises[key] || [];
                        const text = items.map(p => p.text).filter(Boolean).join(' ');
                        if (text) return (
                          <div className="p-2 bg-green-50 rounded-lg">
                            <div className="text-xs font-semibold text-green-600 mb-1">🙌 지금, 하나님 찬송하기:</div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {result.hasThank && (() => {
                        const key = result.key;
                        const items = thanks[key] || [];
                        const text = items.map(t => t.text).filter(Boolean).join(' ');
                        if (text) return (
                          <div className="p-2 bg-amber-50 rounded-lg">
                            <div className="text-xs font-semibold text-amber-600 mb-1">💝 지금, 감사하기:</div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {result.hasPrayer && (() => {
                        const key = result.key;
                        const items = prayers[key] || [];
                        const text = items.map(p => p.text).filter(Boolean).join(' ');
                        if (text) return (
                          <div className="p-2 bg-indigo-50 rounded-lg">
                            <div className="text-xs font-semibold text-indigo-600 mb-1">🙏 지금, 기도하기:</div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {result.hasTodo && (() => {
                        const key = result.key;
                        const items = todos[key] || [];
                        const text = items.map(t => `${t.completed ? '✅' : '⬜'} ${t.text}`).filter(t => t.includes(' ')).join(', ');
                        if (text) return (
                          <div className="p-2 bg-emerald-50 rounded-lg">
                            <div className="text-xs font-semibold text-emerald-600 mb-1">✅ 오늘의 할 일 / 일정:</div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                      
                      {result.hasMemo2 && (() => {
                        const key = result.key;
                        const items = memos2[key] || [];
                        const text = items.map(m => m.text).filter(Boolean).join(' ');
                        if (text) return (
                          <div className="p-2 bg-pink-50 rounded-lg">
                            <div className="text-xs font-semibold text-pink-600 mb-1">📝 오늘의 메모:</div>
                            <p className="text-sm text-gray-700 line-clamp-1">{text}</p>
                          </div>
                        );
                      })()}
                    </div>
                  </div>
                );
              })}
            </div>
          ) : (
            <div className="bg-white rounded-2xl shadow-lg p-6 text-center">
              <div className="text-4xl mb-3">📖</div>
              <p className="text-base text-gray-600 mb-1">검색어를 입력하거나 태그를 선택하세요</p>
              <p className="text-xs text-gray-500">AND/OR/NOT 검색 지원</p>
            </div>
          )}
        </div>
      </div>
    );
  }

  // 통계 화면
  if (showStats) {
    // 날짜를 숫자로 변환 (비교용)
    const toDateNum = (year, month, day) => year * 10000 + month * 100 + day;
    const startNum = toDateNum(statsStartYear, statsStartMonth, statsStartDay);
    const endNum = toDateNum(statsEndYear, statsEndMonth, statsEndDay);
    
    // 통계 화면의 고유 key (기간이 변경되면 완전히 새로 렌더링)
    const statsKey = `${statsStartYear}-${statsStartMonth}-${statsStartDay}-${statsEndYear}-${statsEndMonth}-${statsEndDay}`;
    
    // 키에서 날짜 추출하여 범위 체크
    const isInRange = (key) => {
      const parts = key.split('-');
      if (parts.length < 3) return false;
      const year = parseInt(parts[0]);
      const month = parseInt(parts[1]);
      // parts[2]가 "12월 1일" 형식이므로 "일" 앞의 숫자를 추출
      const dayMatch = parts[2].match(/(\d+)일/);
      if (!dayMatch) return false;
      const day = parseInt(dayMatch[1]);
      const dateNum = toDateNum(year, month, day);
      return dateNum >= startNum && dateNum <= endNum;
    };
    
    // 읊조리기 통계
    const recitationStats = Object.entries(checkCounts)
      .filter(([key]) => isInRange(key))
      .reduce((sum, [, count]) => sum + count, 0);
    
    const recitationDays = Object.entries(checkCounts)
      .filter(([key, count]) => isInRange(key) && count > 0).length;
    
    // 찬송 데이터
    const praiseData = Object.entries(praises)
      .filter(([key, value]) => isInRange(key) && value && value.some(p => p.text))
      .map(([key, items]) => {
        const parts = key.split('-');
        return { 
          date: `${parts[1]}월 ${parts[2]}`, 
          fullKey: key,
          items: items.filter(p => p.text) 
        };
      })
      .sort((a, b) => a.fullKey.localeCompare(b.fullKey));
    
    // 감사 데이터
    const thanksData = Object.entries(thanks)
      .filter(([key, value]) => isInRange(key) && value && value.some(t => t.text))
      .map(([key, items]) => {
        const parts = key.split('-');
        return { 
          date: `${parts[1]}월 ${parts[2]}`, 
          fullKey: key,
          items: items.filter(t => t.text) 
        };
      })
      .sort((a, b) => a.fullKey.localeCompare(b.fullKey));
    
    // 기도 데이터
    const prayerData = Object.entries(prayers)
      .filter(([key, value]) => isInRange(key) && value && value.some(p => p.text))
      .map(([key, items]) => {
        const parts = key.split('-');
        return { 
          date: `${parts[1]}월 ${parts[2]}`, 
          fullKey: key,
          items: items.filter(p => p.text) 
        };
      })
      .sort((a, b) => a.fullKey.localeCompare(b.fullKey));
    
    // 할 일 데이터
    const todoData = Object.entries(todos)
      .filter(([key, value]) => isInRange(key) && value && value.some(t => t.text))
      .map(([key, items]) => {
        const parts = key.split('-');
        return { 
          date: `${parts[1]}월 ${parts[2]}`, 
          fullKey: key,
          items: items.filter(t => t.text) 
        };
      })
      .sort((a, b) => a.fullKey.localeCompare(b.fullKey));
    
    // 오늘의 메모 데이터
    const memo2Data = Object.entries(memos2)
      .filter(([key, value]) => isInRange(key) && value && value.some(m => m.text))
      .map(([key, items]) => {
        const parts = key.split('-');
        return { 
          date: `${parts[1]}월 ${parts[2]}`, 
          fullKey: key,
          items: items.filter(m => m.text) 
        };
      })
      .sort((a, b) => a.fullKey.localeCompare(b.fullKey));
    
    // 묵상 데이터
    const memoData = Object.entries(memos)
      .filter(([key, value]) => isInRange(key) && value && value.length > 0)
      .map(([key, value]) => {
        const parts = key.split('-');
        return { 
          date: `${parts[1]}월 ${parts[2]}`, 
          fullKey: key,
          text: value 
        };
      })
      .sort((a, b) => a.fullKey.localeCompare(b.fullKey));
    
    // 일주일 묵상 데이터 (주차별로 그룹화)
    const sundayWordData = (() => {
      const allWeeklyKeys = new Set([
        ...Object.keys(sundayWords),
        ...Object.keys(personQuestions),
        ...Object.keys(godQuestions),
        ...Object.keys(freeQuestions),
        ...Object.keys(upStories)
      ]);
      
      // 날짜별 데이터 수집
      const dailyData = Array.from(allWeeklyKeys)
        .filter(key => isInRange(key))
        .map(key => {
          const parts = key.split('-');
          const year = parseInt(parts[0]);
          const month = parseInt(parts[1]);
          const dateStr = parts[2];
          const dayMatch = dateStr.match(/(\d+)일/);
          const day = dayMatch ? parseInt(dayMatch[1]) : 1;
          
          // 해당 월의 scriptures 데이터에서 요일 찾기
          const currentMonthKey = `${parts[0]}-${parts[1]}`;
          const monthScriptures = customScriptures[currentMonthKey] || defaultScripturesByMonth[currentMonthKey] || [];
          const scripture = monthScriptures.find(s => s.date === dateStr);
          const dayName = scripture ? scripture.day : '월요일';
          const daySection = daySpecificSections[dayName];
          
          // 모든 섹션 데이터 수집
          const allSections = [];
          
          // 메인 섹션 (모든 요일)
          const mainItems = sundayWords[key];
          if (mainItems && mainItems.length > 0 && mainItems.some(w => w.text)) {
            allSections.push({
              title: daySection ? daySection.title : '묵상',
              icon: daySection ? daySection.icon : '📖',
              items: mainItems.filter(w => w.text)
            });
          }
          
          // 주일~토요일 추가 섹션
          if (daySection?.additionalSections) {
            daySection.additionalSections.forEach((section, idx) => {
              let sectionData = [];
              if (idx === 0) sectionData = personQuestions[key] || [];
              else if (idx === 1) sectionData = godQuestions[key] || [];
              else if (idx === 2) sectionData = freeQuestions[key] || [];
              else if (idx === 3) sectionData = upStories[key] || [];
              
              if (sectionData && sectionData.length > 0 && sectionData.some(q => q.text)) {
                allSections.push({
                  title: section.title,
                  icon: section.icon,
                  items: sectionData.filter(q => q.text)
                });
              }
            });
          }
          
          return allSections.length > 0 ? { 
            year,
            month,
            day,
            date: dateStr, 
            fullKey: key,
            dayName: dayName,
            sections: allSections
          } : null;
        })
        .filter(Boolean)
        .sort((a, b) => a.fullKey.localeCompare(b.fullKey));
      
      // 주차별로 그룹화 (월요일 기준)
      const weeklyGroups = [];
      let currentWeek = null;
      
      dailyData.forEach(item => {
        const date = new Date(item.year, item.month - 1, item.day);
        const dayOfWeek = date.getDay(); // 0=일요일, 1=월요일
        
        // 월요일이면 새 주 시작
        if (dayOfWeek === 1 || currentWeek === null) {
          if (currentWeek && currentWeek.days.length > 0) {
            weeklyGroups.push(currentWeek);
          }
          
          // 주의 시작일(월요일)과 종료일(일요일) 계산
          const monday = new Date(date);
          // dayOfWeek가 0(일요일)이면 -6일, 1(월요일)이면 0일, 2(화요일)이면 -1일...
          const daysToMonday = dayOfWeek === 0 ? -6 : -(dayOfWeek - 1);
          monday.setDate(date.getDate() + daysToMonday);
          const sunday = new Date(monday);
          sunday.setDate(monday.getDate() + 6);
          
          currentWeek = {
            startDate: monday,
            endDate: sunday,
            dateRange: `${monday.getFullYear()}.${monday.getMonth() + 1}.${monday.getDate()} - ${sunday.getDate()}`,
            days: []
          };
        }
        
        if (currentWeek) {
          currentWeek.days.push(item);
        }
      });
      
      // 마지막 주 추가
      if (currentWeek && currentWeek.days.length > 0) {
        weeklyGroups.push(currentWeek);
      }
      
      return weeklyGroups;
    })();
    
    // 텍스트 생성 함수 (복사용)
    const generateText = () => {
      let text = `📊 신앙생활 기록\n`;
      text += `${statsStartYear}년 ${statsStartMonth}월 ${statsStartDay}일 ~ ${statsEndYear}년 ${statsEndMonth}월 ${statsEndDay}일\n`;
      text += `━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n`;
      
      // 묵상 추가
      if (statsFilter === 'summary' || statsFilter === 'memo') {
        if (memoData.length > 0) {
          text += `📝 묵상메모 (${memoData.length}일)\n`;
          text += `──────────────────────────\n`;
          memoData.forEach(d => {
            text += `[${d.date}]\n`;
            text += `${d.text}\n\n`;
          });
        }
      }
      
      // 주일 말씀 추가
      if (statsFilter === 'summary' || statsFilter === 'sunday') {
        if (sundayWordData.length > 0) {
          const totalCount = sundayWordData.reduce((s,w) => s + w.days.reduce((ss, d) => ss + d.sections.reduce((sss, sec) => sss + sec.items.length, 0), 0), 0);
          text += `📖 요일별 일주일 묵상 (${totalCount}개)\n`;
          text += `──────────────────────────\n`;
          sundayWordData.forEach(week => {
            text += `\n📅 ${week.dateRange}\n`;
            text += `━━━━━━━━━━━━━━━━━━━━━━\n`;
            week.days.forEach(day => {
              text += `\n${day.dayName}\n`;
              day.sections.forEach(section => {
                text += `${section.icon} ${section.title}\n`;
                section.items.forEach((item, i) => {
                  text += `  ${i+1}. ${item.text}\n`;
                });
              });
            });
          });
          text += `\n`;
        }
      }
      
      if (statsFilter === 'summary' || statsFilter === 'praise') {
        if (praiseData.length > 0) {
          text += `🙌 찬송하기 (${praiseData.reduce((s,d) => s + d.items.length, 0)}개)\n`;
          text += `──────────────────────────\n`;
          praiseData.forEach(d => {
            text += `[${d.date}]\n`;
            d.items.forEach((item, i) => {
              text += `  ${i+1}. ${item.text}\n`;
            });
          });
          text += `\n`;
        }
      }
      
      if (statsFilter === 'summary' || statsFilter === 'thanks') {
        if (thanksData.length > 0) {
          text += `💝 감사하기 (${thanksData.reduce((s,d) => s + d.items.length, 0)}개)\n`;
          text += `──────────────────────────\n`;
          thanksData.forEach(d => {
            text += `[${d.date}]\n`;
            d.items.forEach((item, i) => {
              text += `  ${i+1}. ${item.text}\n`;
            });
          });
          text += `\n`;
        }
      }
      
      if (statsFilter === 'summary' || statsFilter === 'prayer') {
        if (prayerData.length > 0) {
          text += `🙏 기도제목 (${prayerData.reduce((s,d) => s + d.items.length, 0)}개)\n`;
          text += `──────────────────────────\n`;
          prayerData.forEach(d => {
            text += `[${d.date}]\n`;
            d.items.forEach((item, i) => {
              text += `  ${i+1}. ${item.text}\n`;
            });
          });
          text += `\n`;
        }
      }
      
      if (statsFilter === 'summary' || statsFilter === 'todo') {
        if (todoData.length > 0) {
          const total = todoData.reduce((s,d) => s + d.items.length, 0);
          const completed = todoData.reduce((s,d) => s + d.items.filter(t => t.completed).length, 0);
          text += `✅ 할 일 (${completed}/${total} 완료)\n`;
          text += `──────────────────────────\n`;
          todoData.forEach(d => {
            text += `[${d.date}]\n`;
            d.items.forEach((item, i) => {
              text += `  ${item.completed ? '✅' : '⬜'} ${item.text}\n`;
            });
          });
          text += `\n`;
        }
      }
      
      text += `━━━━━━━━━━━━━━━━━━━━━━━━━━\n`;
      text += `생성일: ${new Date().toLocaleDateString('ko-KR')}`;
      
      return text;
    };
    
    const copyToClipboard = () => {
      const text = generateText();
      navigator.clipboard.writeText(text).then(() => {
        setStatsCopied(true);
        alert('✅ 통계 데이터가 복사되었습니다!\n\n메모장이나 워드에 붙여넣기(Ctrl+V)하여 프린트하세요.');
        setTimeout(() => setStatsCopied(false), 3000);
      }).catch(() => {
        alert('복사 실패. 수동으로 선택하여 복사해주세요.');
      });
    };
    
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-3xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <h1 className="text-2xl font-bold text-white">📊 통계</h1>
            <button
              onClick={() => setShowStats(false)}
              className="px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all font-semibold"
            >
              닫기
            </button>
          </div>
          
          <div className="bg-white rounded-3xl shadow-2xl p-6 space-y-6 max-h-[85vh] overflow-y-auto">
            {/* 기간 선택 - 시작일 */}
            <div className="bg-gray-50 rounded-xl p-4">
              <label className="block text-sm font-bold text-gray-700 mb-3">📅 기간 선택</label>
              
              {/* 시작일 */}
              <div className="mb-3">
                <label className="block text-xs font-semibold text-green-600 mb-1">시작일</label>
                <div className="grid grid-cols-3 gap-2">
                  <select
                    value={statsStartYear}
                    onChange={(e) => setStatsStartYear(parseInt(e.target.value))}
                    className="px-2 py-2 border-2 border-green-300 rounded-lg text-sm bg-green-50"
                  >
                    {[2025, 2026, 2027, 2028, 2029, 2030].map(y => (
                      <option key={y} value={y}>{y}년</option>
                    ))}
                  </select>
                  <select
                    value={statsStartMonth}
                    onChange={(e) => {
                      const newMonth = parseInt(e.target.value);
                      setStatsStartMonth(newMonth);
                      // 선택한 월의 마지막 날짜보다 큰 날짜가 선택되어 있으면 조정
                      const maxDay = getDaysInMonth(statsStartYear, newMonth);
                      if (statsStartDay > maxDay) {
                        setStatsStartDay(maxDay);
                      }
                    }}
                    className="px-2 py-2 border-2 border-green-300 rounded-lg text-sm bg-green-50"
                  >
                    {[1,2,3,4,5,6,7,8,9,10,11,12].map(m => (
                      <option key={m} value={m}>{m}월</option>
                    ))}
                  </select>
                  <select
                    value={statsStartDay}
                    onChange={(e) => setStatsStartDay(parseInt(e.target.value))}
                    className="px-2 py-2 border-2 border-green-300 rounded-lg text-sm bg-green-50"
                  >
                    {Array.from({length: getDaysInMonth(statsStartYear, statsStartMonth)}, (_, i) => i + 1).map(d => (
                      <option key={d} value={d}>{d}일</option>
                    ))}
                  </select>
                </div>
              </div>
              
              {/* 종료일 */}
              <div className="mb-3">
                <label className="block text-xs font-semibold text-red-600 mb-1">종료일</label>
                <div className="grid grid-cols-3 gap-2">
                  <select
                    value={statsEndYear}
                    onChange={(e) => setStatsEndYear(parseInt(e.target.value))}
                    className="px-2 py-2 border-2 border-red-300 rounded-lg text-sm bg-red-50"
                  >
                    {[2025, 2026, 2027, 2028, 2029, 2030].map(y => (
                      <option key={y} value={y}>{y}년</option>
                    ))}
                  </select>
                  <select
                    value={statsEndMonth}
                    onChange={(e) => {
                      const newMonth = parseInt(e.target.value);
                      setStatsEndMonth(newMonth);
                      // 선택한 월의 마지막 날짜보다 큰 날짜가 선택되어 있으면 조정
                      const maxDay = getDaysInMonth(statsEndYear, newMonth);
                      if (statsEndDay > maxDay) {
                        setStatsEndDay(maxDay);
                      }
                    }}
                    className="px-2 py-2 border-2 border-red-300 rounded-lg text-sm bg-red-50"
                  >
                    {[1,2,3,4,5,6,7,8,9,10,11,12].map(m => (
                      <option key={m} value={m}>{m}월</option>
                    ))}
                  </select>
                  <select
                    value={statsEndDay}
                    onChange={(e) => setStatsEndDay(parseInt(e.target.value))}
                    className="px-2 py-2 border-2 border-red-300 rounded-lg text-sm bg-red-50"
                  >
                    {Array.from({length: getDaysInMonth(statsEndYear, statsEndMonth)}, (_, i) => i + 1).map(d => (
                      <option key={d} value={d}>{d}일</option>
                    ))}
                  </select>
                </div>
              </div>
              
              {/* 선택된 기간 표시 */}
              <div className="p-2 bg-purple-100 rounded-lg text-center mb-3">
                <span className="font-bold text-purple-700">
                  {statsStartYear}년 {statsStartMonth}월 {statsStartDay}일 ~ {statsEndYear}년 {statsEndMonth}월 {statsEndDay}일
                </span>
              </div>
              
              {/* 조회하기 버튼 */}
              <button
                onClick={() => {
                  alert(`✅ ${statsStartYear}년 ${statsStartMonth}월 ${statsStartDay}일 ~ ${statsEndYear}년 ${statsEndMonth}월 ${statsEndDay}일\n\n기간이 설정되었습니다!\n원하는 항목 버튼을 클릭하여 조회하세요.`);
                }}
                className="w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-xl hover:from-purple-600 hover:to-indigo-600 transition-all font-bold text-base shadow-lg"
              >
                🔍 기간 설정하기
              </button>
            </div>
            
            {/* 항목 선택 버튼 */}
            <div className="space-y-2">
              {/* 첫 번째 줄 */}
              <div className="flex flex-wrap gap-2 justify-center">
                {[
                  { value: 'memo', label: '📝 묵상', bg: '#8b5cf6' },
                  { value: 'praise', label: '🙌 찬송', bg: '#ec4899' },
                  { value: 'thanks', label: '💝 감사', bg: '#f59e0b' },
                  { value: 'prayer', label: '🙏 기도', bg: '#3b82f6' },
                ].map(item => (
                  <button
                    key={item.value}
                    onClick={() => setStatsFilter(item.value)}
                    className="px-4 py-2 rounded-xl font-semibold transition-all text-sm"
                    style={{
                      backgroundColor: statsFilter === item.value ? item.bg : '#e5e7eb',
                      color: statsFilter === item.value ? 'white' : '#374151'
                    }}
                  >
                    {item.label}
                  </button>
                ))}
              </div>
              {/* 두 번째 줄 */}
              <div className="flex flex-wrap gap-2 justify-center">
                {[
                  { value: 'todo', label: '✅ 할일', bg: '#22c55e' },
                  { value: 'memo2', label: '📋 오늘의메모', bg: '#ec4899' },
                  { value: 'summary', label: '📊 요약', bg: '#8b5cf6' },
                  { value: 'chart', label: '📈 그래프', bg: '#6366f1' },
                ].map(item => (
                  <button
                    key={item.value}
                    onClick={() => setStatsFilter(item.value)}
                    className="px-4 py-2 rounded-xl font-semibold transition-all text-sm"
                    style={{
                      backgroundColor: statsFilter === item.value ? item.bg : '#e5e7eb',
                      color: statsFilter === item.value ? 'white' : '#374151'
                    }}
                  >
                    {item.label}
                  </button>
                ))}
                {/* 일주일묵상 버튼 - 완료 메시지 포함 */}
                <button
                  onClick={() => {
                    setStatsFilter('sunday');
                    alert(`✅ ${statsStartYear}년 ${statsStartMonth}월 ${statsStartDay}일 ~ ${statsEndYear}년 ${statsEndMonth}월 ${statsEndDay}일\n일주일 묵상을 조회했습니다!`);
                  }}
                  className="px-4 py-2 rounded-xl font-semibold transition-all text-sm"
                  style={{
                    backgroundColor: statsFilter === 'sunday' ? '#10b981' : '#e5e7eb',
                    color: statsFilter === 'sunday' ? 'white' : '#374151'
                  }}
                >
                  📖 일주일묵상
                </button>
              </div>
            </div>
            
            {/* 요약 보기 */}
            {statsFilter === 'summary' && (
              <div className="grid grid-cols-3 gap-3">
                <div className="bg-purple-50 rounded-xl p-3 text-center">
                  <div className="text-2xl font-bold text-purple-600">{recitationStats}회</div>
                  <div className="text-xs text-gray-600">읊조리기 ({recitationDays}일)</div>
                </div>
                <div 
                  className="bg-indigo-50 rounded-xl p-3 text-center cursor-pointer hover:bg-indigo-100 transition-all"
                  onClick={() => setStatsFilter('memo')}
                >
                  <div className="text-2xl font-bold text-indigo-600">{memoData.length}일</div>
                  <div className="text-xs text-gray-600">묵상 👆</div>
                </div>
                <div 
                  className="bg-emerald-50 rounded-xl p-3 text-center cursor-pointer hover:bg-emerald-100 transition-all"
                  onClick={() => {
                    setStatsFilter('sunday');
                    alert(`✅ ${statsStartYear}년 ${statsStartMonth}월 ${statsStartDay}일 ~ ${statsEndYear}년 ${statsEndMonth}월 ${statsEndDay}일\n일주일 묵상을 조회했습니다!`);
                  }}
                >
                  <div className="text-2xl font-bold text-emerald-600">
                    {sundayWordData.reduce((s,w) => s + w.days.reduce((ss, d) => ss + d.sections.reduce((sss, sec) => sss + sec.items.length, 0), 0), 0)}개
                  </div>
                  <div className="text-xs text-gray-600">일주일묵상 👆</div>
                </div>
                <div 
                  className="bg-pink-50 rounded-xl p-3 text-center cursor-pointer hover:bg-pink-100 transition-all"
                  onClick={() => setStatsFilter('praise')}
                >
                  <div className="text-2xl font-bold text-pink-600">{praiseData.reduce((s,d) => s + d.items.length, 0)}개</div>
                  <div className="text-xs text-gray-600">찬송 👆</div>
                </div>
                <div 
                  className="bg-amber-50 rounded-xl p-3 text-center cursor-pointer hover:bg-amber-100 transition-all"
                  onClick={() => setStatsFilter('thanks')}
                >
                  <div className="text-2xl font-bold text-amber-600">{thanksData.reduce((s,d) => s + d.items.length, 0)}개</div>
                  <div className="text-xs text-gray-600">감사 👆</div>
                </div>
                <div 
                  className="bg-blue-50 rounded-xl p-3 text-center cursor-pointer hover:bg-blue-100 transition-all"
                  onClick={() => setStatsFilter('prayer')}
                >
                  <div className="text-2xl font-bold text-blue-600">{prayerData.reduce((s,d) => s + d.items.length, 0)}개</div>
                  <div className="text-xs text-gray-600">기도 👆</div>
                </div>
                <div 
                  className="bg-green-50 rounded-xl p-3 text-center cursor-pointer hover:bg-green-100 transition-all"
                  onClick={() => setStatsFilter('todo')}
                >
                  <div className="text-2xl font-bold text-green-600">
                    {todoData.reduce((s,d) => s + d.items.filter(t => t.completed).length, 0)}/
                    {todoData.reduce((s,d) => s + d.items.length, 0)}
                  </div>
                  <div className="text-xs text-gray-600">할일 👆</div>
                </div>
                <div 
                  className="bg-rose-50 rounded-xl p-3 text-center cursor-pointer hover:bg-rose-100 transition-all"
                  onClick={() => setStatsFilter('memo2')}
                >
                  <div className="text-2xl font-bold text-rose-600">{memo2Data.reduce((s,d) => s + d.items.length, 0)}개</div>
                  <div className="text-xs text-gray-600">오늘의메모 👆</div>
                </div>
              </div>
            )}
            
            {/* 월별 막대그래프 */}
            {statsFilter === 'chart' && (
              <div>
                <h3 className="text-lg font-bold text-indigo-600 mb-4">📈 월별 비교 그래프</h3>
                {(() => {
                  // 모든 월의 데이터 수집
                  const allMonths = getAllAvailableMonths();
                  const monthlyStats = allMonths.map(monthKey => {
                    const [year, month] = monthKey.split('-');
                    const prefix = `${year}-${month}-`;
                    
                    const recitation = Object.entries(checkCounts)
                      .filter(([key]) => key.startsWith(prefix))
                      .reduce((sum, [, count]) => sum + count, 0);
                    
                    const memoCount = Object.entries(memos)
                      .filter(([key, value]) => key.startsWith(prefix) && value && value.length > 0).length;
                    
                    const praiseCount = Object.entries(praises)
                      .filter(([key, value]) => key.startsWith(prefix) && value && value.some(p => p.text))
                      .reduce((sum, [, items]) => sum + items.filter(p => p.text).length, 0);
                    
                    const thanksCount = Object.entries(thanks)
                      .filter(([key, value]) => key.startsWith(prefix) && value && value.some(t => t.text))
                      .reduce((sum, [, items]) => sum + items.filter(t => t.text).length, 0);
                    
                    const prayerCount = Object.entries(prayers)
                      .filter(([key, value]) => key.startsWith(prefix) && value && value.some(p => p.text))
                      .reduce((sum, [, items]) => sum + items.filter(p => p.text).length, 0);
                    
                    const todoCount = Object.entries(todos)
                      .filter(([key, value]) => key.startsWith(prefix) && value && value.some(t => t.text))
                      .reduce((sum, [, items]) => sum + items.filter(t => t.completed).length, 0);
                    
                    return {
                      key: monthKey,
                      label: `${month}월`,
                      year: year,
                      recitation,
                      memo: memoCount,
                      praise: praiseCount,
                      thanks: thanksCount,
                      prayer: prayerCount,
                      todo: todoCount
                    };
                  });
                  
                  // 최대값 계산 (스케일링용)
                  const maxValue = Math.max(
                    ...monthlyStats.map(m => Math.max(m.recitation, m.memo * 3, m.praise, m.thanks, m.prayer, m.todo)),
                    1
                  );
                  
                  const barHeight = (value) => Math.max((value / maxValue) * 100, value > 0 ? 8 : 0);
                  
                  return (
                    <div className="space-y-6">
                      {/* 범례 */}
                      <div className="flex flex-wrap gap-3 justify-center text-xs">
                        <span className="flex items-center gap-1"><span className="w-3 h-3 rounded" style={{backgroundColor: '#8b5cf6'}}></span> 읊조리기</span>
                        <span className="flex items-center gap-1"><span className="w-3 h-3 rounded" style={{backgroundColor: '#6366f1'}}></span> 묵상</span>
                        <span className="flex items-center gap-1"><span className="w-3 h-3 rounded" style={{backgroundColor: '#ec4899'}}></span> 찬송</span>
                        <span className="flex items-center gap-1"><span className="w-3 h-3 rounded" style={{backgroundColor: '#f59e0b'}}></span> 감사</span>
                        <span className="flex items-center gap-1"><span className="w-3 h-3 rounded" style={{backgroundColor: '#3b82f6'}}></span> 기도</span>
                        <span className="flex items-center gap-1"><span className="w-3 h-3 rounded" style={{backgroundColor: '#22c55e'}}></span> 할일완료</span>
                      </div>
                      
                      {/* 그래프 */}
                      <div className="overflow-x-auto">
                        <div className="flex gap-4 min-w-max justify-center pb-4">
                          {monthlyStats.map((stat, idx) => (
                            <div key={idx} className="flex flex-col items-center">
                              <div className="flex gap-1 items-end h-32 mb-2">
                                <div className="w-4 rounded-t transition-all" style={{height: `${barHeight(stat.recitation)}%`, backgroundColor: '#8b5cf6'}} title={`읊조리기: ${stat.recitation}회`}></div>
                                <div className="w-4 rounded-t transition-all" style={{height: `${barHeight(stat.memo * 3)}%`, backgroundColor: '#6366f1'}} title={`묵상: ${stat.memo}일`}></div>
                                <div className="w-4 rounded-t transition-all" style={{height: `${barHeight(stat.praise)}%`, backgroundColor: '#ec4899'}} title={`찬송: ${stat.praise}개`}></div>
                                <div className="w-4 rounded-t transition-all" style={{height: `${barHeight(stat.thanks)}%`, backgroundColor: '#f59e0b'}} title={`감사: ${stat.thanks}개`}></div>
                                <div className="w-4 rounded-t transition-all" style={{height: `${barHeight(stat.prayer)}%`, backgroundColor: '#3b82f6'}} title={`기도: ${stat.prayer}개`}></div>
                                <div className="w-4 rounded-t transition-all" style={{height: `${barHeight(stat.todo)}%`, backgroundColor: '#22c55e'}} title={`할일완료: ${stat.todo}개`}></div>
                              </div>
                              <div className="text-xs font-semibold text-gray-600">{stat.year}년</div>
                              <div className="text-sm font-bold text-gray-800">{stat.label}</div>
                            </div>
                          ))}
                        </div>
                      </div>
                      
                      {/* 월별 수치 테이블 */}
                      <div className="overflow-x-auto">
                        <table className="w-full text-xs">
                          <thead>
                            <tr className="bg-gray-100">
                              <th className="p-2 text-left">월</th>
                              <th className="p-2 text-center">읊조리기</th>
                              <th className="p-2 text-center">묵상</th>
                              <th className="p-2 text-center">찬송</th>
                              <th className="p-2 text-center">감사</th>
                              <th className="p-2 text-center">기도</th>
                              <th className="p-2 text-center">할일</th>
                            </tr>
                          </thead>
                          <tbody>
                            {monthlyStats.map((stat, idx) => (
                              <tr key={idx} className="border-b">
                                <td className="p-2 font-semibold">{stat.year}.{stat.label}</td>
                                <td className="p-2 text-center text-purple-600 font-bold">{stat.recitation}</td>
                                <td className="p-2 text-center text-indigo-600 font-bold">{stat.memo}</td>
                                <td className="p-2 text-center text-pink-600 font-bold">{stat.praise}</td>
                                <td className="p-2 text-center text-amber-600 font-bold">{stat.thanks}</td>
                                <td className="p-2 text-center text-blue-600 font-bold">{stat.prayer}</td>
                                <td className="p-2 text-center text-green-600 font-bold">{stat.todo}</td>
                              </tr>
                            ))}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  );
                })()}
              </div>
            )}
            
            {/* 묵상 상세 */}
            {statsFilter === 'memo' && (
              <div>
                <h3 className="text-lg font-bold text-indigo-600 mb-3">📝 묵상메모 ({memoData.length}일)</h3>
                {memoData.length === 0 ? (
                  <p className="text-gray-500 text-center py-8">이 기간에 기록된 묵상이 없습니다.</p>
                ) : (
                  <div className="space-y-3">
                    {memoData.map((d, i) => (
                      <div key={i} className="bg-indigo-50 rounded-lg p-3">
                        <div className="font-semibold text-gray-700 mb-1">{d.date}</div>
                        <p className="text-sm text-gray-600 whitespace-pre-wrap">{d.text}</p>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}
            
            {/* 주일 말씀 상세 */}
            {statsFilter === 'sunday' && (
              <div>
                <h3 className="text-lg font-bold text-emerald-600 mb-3">
                  📖 요일별 일주일 묵상 ({sundayWordData.reduce((s,w) => s + w.days.reduce((ss, d) => ss + d.sections.reduce((sss, sec) => sss + sec.items.length, 0), 0), 0)}개)
                </h3>
                {sundayWordData.length === 0 ? (
                  <p className="text-gray-500 text-center py-8">이 기간에 기록된 내용이 없습니다.</p>
                ) : (
                  <div className="space-y-6">
                    {sundayWordData.map((week, weekIdx) => (
                      <div key={weekIdx} className="bg-emerald-50 rounded-xl p-4 border-2 border-emerald-200">
                        {/* 주차 헤더 */}
                        <div className="font-bold text-emerald-800 text-lg mb-4 pb-2 border-b-2 border-emerald-300">
                          📅 {week.dateRange}
                        </div>
                        
                        {/* 일별 내용 */}
                        <div className="space-y-4">
                          {week.days.map((day, dayIdx) => (
                            <div key={dayIdx} className="bg-white rounded-lg p-3">
                              {/* 요일만 표시 */}
                              <div className="font-semibold text-emerald-700 text-base mb-2">
                                {day.dayName}
                              </div>
                              {day.sections.map((section, sIdx) => (
                                <div key={sIdx} className="mb-3 last:mb-0">
                                  <div className="font-semibold text-emerald-600 text-sm mb-1">
                                    {section.icon} {section.title}
                                  </div>
                                  <ul className="list-disc list-inside text-sm ml-2 text-gray-700">
                                    {section.items.map((item, j) => (
                                      <li key={j}>{item.text}</li>
                                    ))}
                                  </ul>
                                </div>
                              ))}
                            </div>
                          ))}
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}
            
            {/* 찬송 상세 */}
            {statsFilter === 'praise' && (
              <div>
                <h3 className="text-lg font-bold text-pink-600 mb-3">🙌 찬송하기 ({praiseData.reduce((s,d) => s + d.items.length, 0)}개)</h3>
                {praiseData.length === 0 ? (
                  <p className="text-gray-500 text-center py-8">이 기간에 기록된 찬송이 없습니다.</p>
                ) : (
                  <div className="space-y-3">
                    {praiseData.map((d, i) => (
                      <div key={i} className="bg-pink-50 rounded-lg p-3">
                        <div className="font-semibold text-gray-700 mb-1">{d.date}</div>
                        <ul className="list-disc list-inside text-sm">
                          {d.items.map((item, j) => <li key={j}>{item.text}</li>)}
                        </ul>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}
            
            {/* 감사 상세 */}
            {statsFilter === 'thanks' && (
              <div>
                <h3 className="text-lg font-bold text-amber-600 mb-3">💝 감사하기 ({thanksData.reduce((s,d) => s + d.items.length, 0)}개)</h3>
                {thanksData.length === 0 ? (
                  <p className="text-gray-500 text-center py-8">이 기간에 기록된 감사가 없습니다.</p>
                ) : (
                  <div className="space-y-3">
                    {thanksData.map((d, i) => (
                      <div key={i} className="bg-amber-50 rounded-lg p-3">
                        <div className="font-semibold text-gray-700 mb-1">{d.date}</div>
                        <ul className="list-disc list-inside text-sm">
                          {d.items.map((item, j) => <li key={j}>{item.text}</li>)}
                        </ul>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}
            
            {/* 기도 상세 */}
            {statsFilter === 'prayer' && (
              <div>
                <h3 className="text-lg font-bold text-blue-600 mb-3">🙏 기도제목 ({prayerData.reduce((s,d) => s + d.items.length, 0)}개)</h3>
                {prayerData.length === 0 ? (
                  <p className="text-gray-500 text-center py-8">이 기간에 기록된 기도가 없습니다.</p>
                ) : (
                  <div className="space-y-3">
                    {prayerData.map((d, i) => (
                      <div key={i} className="bg-blue-50 rounded-lg p-3">
                        <div className="font-semibold text-gray-700 mb-1">{d.date}</div>
                        <ul className="list-disc list-inside text-sm">
                          {d.items.map((item, j) => <li key={j}>{item.text}</li>)}
                        </ul>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}
            
            {/* 할 일 상세 */}
            {statsFilter === 'todo' && (
              <div>
                <h3 className="text-lg font-bold text-green-600 mb-3">
                  ✅ 할 일 ({todoData.reduce((s,d) => s + d.items.filter(t => t.completed).length, 0)}/{todoData.reduce((s,d) => s + d.items.length, 0)} 완료)
                </h3>
                {todoData.length === 0 ? (
                  <p className="text-gray-500 text-center py-8">이 기간에 기록된 할 일이 없습니다.</p>
                ) : (
                  <div className="space-y-3">
                    {todoData.map((d, i) => (
                      <div key={i} className="bg-green-50 rounded-lg p-3">
                        <div className="font-semibold text-gray-700 mb-1">{d.date}</div>
                        <ul className="text-sm">
                          {d.items.map((item, j) => (
                            <li key={j} className={item.completed ? 'text-green-600' : 'text-gray-600'}>
                              {item.completed ? '✅' : '⬜'} {item.text}
                            </li>
                          ))}
                        </ul>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}
            
            {/* 오늘의 메모 상세 */}
            {statsFilter === 'memo2' && (
              <div>
                <h3 className="text-lg font-bold text-rose-600 mb-3">📋 오늘의 메모 ({memo2Data.reduce((s,d) => s + d.items.length, 0)}개)</h3>
                {memo2Data.length === 0 ? (
                  <p className="text-gray-500 text-center py-8">이 기간에 기록된 메모가 없습니다.</p>
                ) : (
                  <div className="space-y-3">
                    {memo2Data.map((d, i) => (
                      <div key={i} className="bg-rose-50 rounded-lg p-3">
                        <div className="font-semibold text-gray-700 mb-1">{d.date}</div>
                        <ul className="list-disc list-inside text-sm">
                          {d.items.map((item, j) => <li key={j}>{item.text}</li>)}
                        </ul>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}
            
            {/* 복사 버튼 */}
            <div className="border-t pt-4">
              <button
                onClick={copyToClipboard}
                className={`w-full px-6 py-3 rounded-xl font-semibold transition-all ${
                  statsCopied 
                    ? 'bg-green-500 text-white' 
                    : 'bg-gradient-to-r from-purple-500 to-indigo-500 text-white hover:from-purple-600 hover:to-indigo-600'
                }`}
              >
                {statsCopied ? '✅ 복사 완료! 메모장에 붙여넣기 하세요' : '📋 텍스트 복사 (프린트용)'}
              </button>
              {!statsCopied && (
                <p className="text-xs text-gray-500 text-center mt-2">
                  복사 후 메모장/워드에 붙여넣기하여 프린트하세요
                </p>
              )}
            </div>
          </div>
        </div>
      </div>
    );
  }

  if (showMonthly) {
    const totalCount = Object.entries(checkCounts)
      .filter(([key]) => key.startsWith(`${currentYear}-${currentMonth}-`))
      .reduce((sum, [, count]) => sum + count, 0);
    const calendarData = getCalendarData();
    const prevMonth = getPrevMonthInfo();
    const nextMonth = getNextMonthInfo();
    
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-6xl mx-auto">
          {/* Header */}
          <div className="text-center mb-2">
            <h1 className="text-base md:text-base font-black text-white mb-3" style={{ fontFamily: 'system-ui, -apple-system, sans-serif', letterSpacing: '-1px' }}>
              나의 일주일 묵상 즐기기
            </h1>
            <div className="flex items-center justify-center gap-3 flex-wrap">
              <span className="inline-block px-3 py-1 bg-yellow-400 rounded-xl shadow-lg text-gray-900 font-black text-center" style={{ fontSize: '12px' }}>
                서서울성서침례교회
              </span>
              <span className="inline-block px-3 py-1 bg-yellow-400 rounded-xl shadow-lg text-gray-900 font-black text-center" style={{ fontSize: '12px' }}>
                이번 달 {totalCount}회 했습니다
              </span>
            </div>
          </div>

          {/* Monthly Grid */}
          <div className="bg-white rounded-3xl shadow-2xl p-2">
            <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">
              {currentYear}년 {currentMonth}월 읊조리기
            </h2>
            
            {/* 색상 범례 추가 */}
            <div className="mb-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl">
              <p className="text-xs font-semibold text-gray-600 mb-2 text-center">🎯 읊조리기 단계별 색상</p>
              <div className="flex flex-wrap justify-center gap-2 text-xs">
                <div className="flex items-center gap-1">
                  <div className="w-4 h-4 rounded" style={{backgroundColor: '#3B82F6'}}></div>
                  <span>1-9회</span>
                </div>
                <div className="flex items-center gap-1">
                  <div className="w-4 h-4 rounded" style={{backgroundColor: '#10B981'}}></div>
                  <span>10-19회</span>
                </div>
                <div className="flex items-center gap-1">
                  <div className="w-4 h-4 rounded" style={{backgroundColor: '#F59E0B'}}></div>
                  <span>20-29회</span>
                </div>
                <div className="flex items-center gap-1">
                  <div className="w-4 h-4 rounded" style={{backgroundColor: '#EF4444'}}></div>
                  <span>30-39회</span>
                </div>
                <div className="flex items-center gap-1">
                  <div className="w-4 h-4 rounded" style={{backgroundColor: '#8B5CF6'}}></div>
                  <span>40-49회</span>
                </div>
                <div className="flex items-center gap-1">
                  <div className="w-4 h-4 rounded" style={{background: 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)'}}></div>
                  <span className="font-bold text-amber-600">50회+</span>
                </div>
              </div>
            </div>
            
            {/* Week Headers */}
            <div className="grid grid-cols-7 gap-2 mb-4">
              {['일', '월', '화', '수', '목', '금', '토'].map((day, i) => (
                <div key={i} className="text-center font-bold text-gray-600 py-2">
                  {day}
                </div>
              ))}
            </div>
            
            {/* Calendar Grid */}
            <div className="grid grid-cols-7 gap-3">
              {calendarData.map((scripture, index) => {
                if (!scripture) {
                  return <div key={`empty-${index}`} className="p-3"></div>;
                }
                
                const color = dayColors[scripture.day];
                const key = `${currentYear}-${currentMonth}-${scripture.date}`;
                const count = checkCounts[key] || 0;
                const countColor = getCountColor(count);
                const actualIndex = scriptures.findIndex(s => s.date === scripture.date);
                
                // 주간 본문 체크
                const dayMatch = scripture.date.match(/(\d+)일/);
                const dayNum = dayMatch ? parseInt(dayMatch[1]) : 0;
                const weekInfo = getWeekInfoForDate(currentYear, currentMonth, dayNum);
                const hasWeeklyScripture = weeklyScriptures[weekInfo.weekKey];
                
                // 각 섹션별 데이터 체크
                const hasMemo = memos[key] && memos[key].length > 0;
                const hasSundayWord = sundayWords[key] && sundayWords[key].some(w => w.text);
                const hasPersonQuestion = personQuestions[key] && personQuestions[key].some(q => q.text);
                const hasGodQuestion = godQuestions[key] && godQuestions[key].some(q => q.text);
                const hasFreeQuestion = freeQuestions[key] && freeQuestions[key].some(q => q.text);
                const hasPraise = praises[key] && praises[key].some(p => p.text);
                const hasThank = thanks[key] && thanks[key].some(t => t.text);
                const hasPrayer = prayers[key] && prayers[key].some(p => p.text);
                const hasTodo = todos[key] && todos[key].some(t => t.text);
                const hasMemo2 = memos2[key] && memos2[key].some(m => m.text);
                
                return (
                  <div
                    key={index}
                    onClick={() => handleCardSelect(actualIndex)}
                    className="relative bg-white rounded-2xl shadow-lg p-2 cursor-pointer hover:shadow-2xl transition-all transform hover:-translate-y-1"
                    style={{ borderTop: `4px solid ${color.bg}` }}
                  >
                    {/* 주간 본문 아이콘 */}
                    {hasWeeklyScripture && scripture.day === '주일' && (
                      <div className="absolute top-1 right-1">
                        <Book size={12} style={{ color: color.bg }} />
                      </div>
                    )}
                    
                    <div className="text-center">
                      {/* 날짜 */}
                      <div className="text-lg font-bold text-gray-800 mb-1">
                        {scripture.date.replace(`${currentMonth}월 `, '').replace('일', '')}
                      </div>
                      
                      {/* 카운터 (크기 축소) */}
                      {count > 0 ? (
                        <div 
                          className="text-sm font-bold py-1 px-2 rounded-lg mb-1 transition-all inline-block"
                          style={countColor.isGradient ? { 
                            background: countColor.bg,
                            color: countColor.text,
                            boxShadow: '0 2px 4px rgba(255, 215, 0, 0.3)'
                          } : { 
                            backgroundColor: countColor.bg,
                            color: countColor.text
                          }}
                        >
                          {count}
                        </div>
                      ) : (
                        <div className="text-sm text-gray-300 py-1 mb-1">-</div>
                      )}
                      
                      {/* 아이콘 표시 영역 */}
                      <div className="flex flex-wrap gap-0.5 justify-center min-h-[20px]">
                        {hasSundayWord && <span className="text-xs">📖</span>}
                        {hasPersonQuestion && <span className="text-xs">👤</span>}
                        {hasGodQuestion && <span className="text-xs">🙏</span>}
                        {hasFreeQuestion && <span className="text-xs">💭</span>}
                        {hasMemo && <span className="text-xs">📝</span>}
                        {hasPraise && <span className="text-xs">🙌</span>}
                        {hasThank && <span className="text-xs">💝</span>}
                        {hasPrayer && <span className="text-xs">🙏</span>}
                        {hasTodo && <span className="text-xs">✅</span>}
                        {hasMemo2 && <span className="text-xs">📋</span>}
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          </div>
          
          {/* Month Navigation & Admin - 하단 배치 */}
          <div className="flex items-center justify-center gap-3 mt-6 flex-wrap pb-4">
            <button
              onClick={goToPrevMonth}
              className="px-4 py-2 bg-white text-gray-800 rounded-xl font-semibold transition-all flex items-center gap-2 hover:bg-gray-100 text-sm"
            >
              <ChevronLeft size={20} />
              {prevMonth.month}월
            </button>
            
            <button
              onClick={() => {
                const today = getTodayInfo();
                setTodayInfo(today);
                setCurrentYear(today.year);
                setCurrentMonth(today.month);
                
                setTimeout(() => {
                  const key = `${today.year}-${today.month}`;
                  const todayScriptures = customScriptures[key] || defaultScripturesByMonth[key] || [];
                  
                  if (todayScriptures.length === 0) {
                    alert(`${today.year}년 ${today.month}월 데이터가 없습니다.`);
                    return;
                  }
                  
                  const todayIndex = todayScriptures.findIndex(s => {
                    const match = s.date.match(/(\d+)일/);
                    if (match) {
                      const day = parseInt(match[1]);
                      return day === today.day;
                    }
                    return false;
                  });
                  
                  if (todayIndex >= 0) {
                    setCurrentIndex(todayIndex);
                    setShowMonthly(false);
                    setShowList(false);
                  } else {
                    alert(`${today.year}년 ${today.month}월 ${today.day}일 데이터가 없습니다.`);
                  }
                }, 100);
              }}
              className="px-4 py-2 bg-rose-500 text-white rounded-xl shadow-lg hover:shadow-xl hover:bg-rose-600 transition-all font-semibold text-sm"
            >
              📅 오늘
            </button>
            
            <button
              onClick={goToNextMonth}
              className={`px-4 py-2 rounded-xl font-semibold transition-all flex items-center gap-2 text-sm ${
                hasMonthData(nextMonth.year, nextMonth.month)
                  ? 'bg-white text-gray-800 hover:bg-gray-100'
                  : 'bg-white bg-opacity-50 text-gray-500'
              }`}
            >
              {nextMonth.month}월
              <ChevronRight size={20} />
            </button>
            
            <button
              onClick={() => {
                setShowList(true);
                setShowMonthly(false);
              }}
              className="bg-green-500 text-white rounded-xl shadow-lg px-4 py-2 hover:shadow-xl hover:bg-green-600 transition-all font-semibold text-sm"
            >
              📋 목록
            </button>
            
            <button
              onClick={() => {
                setShowScriptureSearch(true);
                setShowMonthly(false);
              }}
              className="bg-blue-500 text-white rounded-xl shadow-lg px-4 py-2 hover:shadow-xl hover:bg-blue-600 transition-all font-semibold text-sm flex items-center gap-2"
            >
              📖 성경
            </button>
            
            <button
              onClick={() => {
                setShowSearch(true);
                setShowMonthly(false);
              }}
              className="bg-indigo-500 text-white rounded-xl shadow-lg px-4 py-2 hover:shadow-xl hover:bg-indigo-600 transition-all font-semibold text-sm flex items-center gap-2"
            >
              <Search size={18} />
              기록
            </button>
            
            <button
              onClick={handleAdminClick}
              className="px-4 py-2 bg-amber-500 text-white rounded-xl shadow-lg hover:shadow-xl hover:bg-amber-600 transition-all font-semibold text-sm flex items-center gap-2"
            >
              <Settings size={18} />
              관리자
            </button>
            
            <button
              onClick={() => {
                // 현재 보고 있는 월로 자동 설정
                setStatsStartYear(currentYear);
                setStatsStartMonth(currentMonth);
                setStatsStartDay(1);
                setStatsEndYear(currentYear);
                setStatsEndMonth(currentMonth);
                setStatsEndDay(getDaysInMonth(currentYear, currentMonth));
                setStatsFilter('summary');
                setStatsCopied(false);
                setShowStats(true);
                setShowMonthly(false);
              }}
              className="px-4 py-2 bg-green-500 text-white rounded-xl shadow-lg hover:shadow-xl hover:bg-green-600 transition-all font-semibold text-sm flex items-center gap-2"
            >
              📊 통계
            </button>
          </div>
        </div>
      </div>
    );
  }

  if (showList) {
    const prevMonth = getPrevMonthInfo();
    const nextMonth = getNextMonthInfo();
    
    return (
      <div className="min-h-screen p-4" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>
        <div className="max-w-6xl mx-auto">
          <div className="flex items-center justify-between mb-8">
            <button
              onClick={() => setShowMonthly(true)}
              className="px-6 py-3 bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all text-gray-800 font-semibold"
            >
              📅 월간
            </button>
            
            <h1 className="text-3xl font-bold text-white">
              {currentYear}년 {monthNames[currentMonth]} 말씀 목록
            </h1>
            
            <div className="flex gap-3">
              <button
                onClick={() => {
                  setShowScriptureSearch(true);
                  setShowList(false);
                }}
                className="px-6 py-3 bg-blue-500 text-white rounded-2xl shadow-lg hover:shadow-xl hover:bg-blue-600 transition-all font-semibold flex items-center gap-2"
              >
                📖 성경
              </button>
              <button
                onClick={() => {
                  setShowSearch(true);
                  setShowList(false);
                }}
                className="px-6 py-3 bg-indigo-500 text-white rounded-2xl shadow-lg hover:shadow-xl hover:bg-indigo-600 transition-all font-semibold flex items-center gap-2"
              >
                <Search size={20} />
                기록
              </button>
              <button
                onClick={() => setShowList(false)}
                className="px-6 py-3 bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all text-gray-800 font-semibold"
              >
                📖 카드
              </button>
            </div>
          </div>
          
          {/* Month Navigation */}
          <div className="flex items-center justify-center gap-4 mb-6">
            <button
              onClick={goToPrevMonth}
              className={`px-4 py-2 rounded-xl font-semibold transition-all flex items-center gap-2 ${
                hasMonthData(prevMonth.year, prevMonth.month)
                  ? 'bg-white text-gray-800 hover:bg-gray-100'
                  : 'bg-white bg-opacity-50 text-gray-500'
              }`}
            >
              <ChevronLeft size={20} />
              {prevMonth.month}월
            </button>
            
            {/* 오늘 버튼 */}
            <button
              onClick={() => {
                const today = getTodayInfo();
                setTodayInfo(today);
                setCurrentYear(today.year);
                setCurrentMonth(today.month);
                
                setTimeout(() => {
                  const key = `${today.year}-${today.month}`;
                  const todayScriptures = customScriptures[key] || defaultScripturesByMonth[key] || [];
                  
                  if (todayScriptures.length === 0) {
                    alert(`${today.year}년 ${today.month}월 데이터가 없습니다.`);
                    return;
                  }
                  
                  const todayIndex = todayScriptures.findIndex(s => {
                    const match = s.date.match(/(\d+)일/);
                    if (match) {
                      const day = parseInt(match[1]);
                      return day === today.day;
                    }
                    return false;
                  });
                  
                  if (todayIndex >= 0) {
                    setCurrentIndex(todayIndex);
                    setShowMonthly(false);
                    setShowList(false);
                  } else {
                    alert(`${today.year}년 ${today.month}월 ${today.day}일 데이터가 없습니다.`);
                  }
                }, 100);
              }}
              className="px-6 py-2 bg-rose-500 text-white rounded-xl shadow-lg hover:shadow-xl hover:bg-rose-600 transition-all font-semibold"
            >
              📅 오늘
            </button>
            
            <button
              onClick={goToNextMonth}
              className={`px-4 py-2 rounded-xl font-semibold transition-all flex items-center gap-2 ${
                hasMonthData(nextMonth.year, nextMonth.month)
                  ? 'bg-white text-gray-800 hover:bg-gray-100'
                  : 'bg-white bg-opacity-50 text-gray-500'
              }`}
            >
              {nextMonth.month}월
              <ChevronRight size={20} />
            </button>
          </div>
          
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
            {scriptures.map((scripture, index) => {
              const color = dayColors[scripture.day];
              const key = `${currentYear}-${currentMonth}-${scripture.date}`;
              const count = checkCounts[key] || 0;
              const countColor = getCountColor(count);
              return (
                <div
                  key={index}
                  onClick={() => handleCardSelect(index)}
                  className="bg-white rounded-2xl shadow-lg p-6 cursor-pointer hover:shadow-2xl transition-all transform hover:-translate-y-1"
                  style={{ borderTop: `6px solid ${color.bg}` }}
                >
                  <div className="flex items-start justify-between mb-4">
                    <div>
                      <h3 className="text-xl font-bold text-gray-800 mb-1">
                        {scripture.date}
                      </h3>
                      <span 
                        className="inline-block px-3 py-1 rounded-full text-sm font-semibold text-white"
                        style={{ backgroundColor: color.bg }}
                      >
                        {scripture.day}
                      </span>
                      {scripture.theme && (
                        <span className="ml-2 inline-block px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800">
                          {scripture.theme}
                        </span>
                      )}
                    </div>
                    {count > 0 && (
                      <div 
                        className="px-3 py-1 rounded-full font-bold text-sm transition-all"
                        style={countColor.isGradient ? {
                          background: countColor.bg,
                          color: countColor.text,
                          boxShadow: '0 2px 4px rgba(255, 215, 0, 0.3)'
                        } : {
                          backgroundColor: countColor.bg,
                          color: countColor.text
                        }}
                      >
                        {count}회
                      </div>
                    )}
                  </div>
                  <p className="text-sm font-semibold mb-2" style={{ color: color.dark }}>
                    {scripture.reference}
                  </p>
                  <p className="text-sm text-gray-600 line-clamp-3 leading-relaxed">
                    {scripture.verse}
                  </p>
                </div>
              );
            })}
          </div>
        </div>
      </div>
    );
  }

  // Card View
  const prevMonth = getPrevMonthInfo();
  const nextMonth = getNextMonthInfo();
  
  return (
    <div 
      className="min-h-screen p-2 flex items-center justify-center"
      style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}
    >
      <div className="w-full max-w-2xl">
        {/* Header - 제거됨 */}

        {/* Scripture Card */}
        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden mb-6">
          {/* Card Header */}
          <div
            className="p-4 text-white relative overflow-hidden"
            style={{ 
              background: `linear-gradient(135deg, ${currentColor.bg} 0%, ${currentColor.dark} 100%)`
            }}
          >
            <div className="relative z-10">
              <div className="flex items-end justify-between mb-3">
                <div>
                  <div className="flex items-baseline gap-2 mb-2">
                    <h2 
                      className="text-2xl md:text-3xl font-bold"
                      style={{ fontFamily: 'system-ui, -apple-system, sans-serif', letterSpacing: '-1px' }}
                    >
                      {currentCard.date}
                    </h2>
                    <p className="text-xl font-bold text-white">
                      {currentCard.day}
                    </p>
                  </div>
                  {currentCard.theme && (
                    <span className="inline-block px-3 py-1 bg-white bg-opacity-30 rounded-full text-sm font-semibold">
                      {currentCard.theme}
                    </span>
                  )}
                </div>
                <div className="text-right">
                  <div className="text-4xl font-bold">
                    {Object.entries(checkCounts).filter(([key]) => key.startsWith(`${currentYear}-${currentMonth}-`)).reduce((sum, [, count]) => sum + count, 0)}
                    <span className="text-2xl ml-1">회</span>
                  </div>
                  <div className="text-xs opacity-80 mt-1">이번 달 누적</div>
                </div>
              </div>
              
              {/* Navigation buttons in header */}
              <div className="grid grid-cols-3 gap-2 mt-3">
                <button
                  onClick={handlePrevious}
                  className="bg-white bg-opacity-20 backdrop-blur-sm rounded-xl shadow-lg p-2 hover:bg-opacity-30 transition-all flex items-center justify-center gap-1 font-semibold"
                >
                  <ChevronLeft size={20} />
                  이전
                </button>
                <button
                  onClick={() => {
                    const today = getTodayInfo();
                    setTodayInfo(today);
                    setCurrentYear(today.year);
                    setCurrentMonth(today.month);
                    
                    setTimeout(() => {
                      const key = `${today.year}-${today.month}`;
                      const todayScriptures = customScriptures[key] || defaultScripturesByMonth[key] || [];
                      
                      if (todayScriptures.length === 0) {
                        alert(`${today.year}년 ${today.month}월 데이터가 없습니다.`);
                        return;
                      }
                      
                      const todayIndex = todayScriptures.findIndex(s => {
                        const match = s.date.match(/(\d+)일/);
                        if (match) {
                          const day = parseInt(match[1]);
                          return day === today.day;
                        }
                        return false;
                      });
                      
                      if (todayIndex >= 0) {
                        setCurrentIndex(todayIndex);
                      } else {
                        alert(`${today.year}년 ${today.month}월 ${today.day}일 데이터가 없습니다.`);
                      }
                    }, 100);
                  }}
                  className="rounded-xl shadow-lg p-2 transition-all flex items-center justify-center font-bold"
                  style={{ 
                    backgroundColor: currentColor.complement,
                    color: '#1a1a1a'
                  }}
                >
                  오늘
                </button>
                <button
                  onClick={handleNext}
                  className="bg-white bg-opacity-20 backdrop-blur-sm rounded-xl shadow-lg p-2 hover:bg-opacity-30 transition-all flex items-center justify-center gap-1 font-semibold"
                >
                  다음
                  <ChevronRight size={20} />
                </button>
              </div>
            </div>
            <div 
              className="absolute top-0 right-0 w-64 h-64 rounded-full opacity-10"
              style={{ background: 'white', transform: 'translate(30%, -30%)' }}
            ></div>
          </div>

          {/* Card Body */}
          <div className="p-3">
            {/* 주간 본문 박스 */}
            {currentWeekScripture ? (
              <div 
                className="rounded-2xl p-4 mb-4 shadow-lg"
                style={{ 
                  background: 'linear-gradient(135deg, #6366f1 0%, #4338ca 100%)',
                  border: '3px solid #818cf8'
                }}
              >
                <div className="flex items-center justify-between mb-3">
                  <div className="flex items-center gap-2">
                    <Book size={24} className="text-white" />
                    <h3 className="text-white font-bold text-base">
                      📖 이번 주 말씀
                    </h3>
                  </div>
                  <span className="text-white text-xs bg-white bg-opacity-20 px-3 py-1 rounded-full font-semibold">
                    {currentWeekScripture.weekLabel || currentWeekScripture.dateRange}
                  </span>
                </div>
                <div className="bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-3">
                  <p className="text-white font-bold text-base mb-2">
                    {currentWeekScripture.reference}
                  </p>
                  <p className="text-white text-sm leading-relaxed">
                    {currentWeekScripture.verse}
                  </p>
                </div>
              </div>
            ) : (
              <div className="rounded-xl p-3 mb-4 bg-gray-50 border border-gray-200">
                <div className="flex items-center justify-between">
                  <div className="flex items-center gap-2">
                    <Book size={18} className="text-gray-400" />
                    <p className="text-gray-500 text-xs">이번 주 말씀 미등록</p>
                  </div>
                  <button
                    onClick={handleAdminClick}
                    className="px-2 py-1 bg-indigo-500 text-white rounded-lg text-xs hover:bg-indigo-600 transition-all"
                  >
                    추가
                  </button>
                </div>
              </div>
            )}

            {/* "지금" Section - 요일별 특별 묵상 */}
            <div 
              className="rounded-2xl p-2 mb-3"
              style={{ backgroundColor: currentColor.light }}
            >
              {/* 요일별 특별 섹션 */}
              <div className="mb-3">
                <div className="flex items-center justify-between mb-2">
                  <label className="font-semibold text-gray-700 text-sm flex-1">
                    {daySpecificSections[currentCard.day].icon} {daySpecificSections[currentCard.day].title}
                  </label>
                  <button
                    onClick={addSundayWord}
                    className="flex items-center gap-1 px-3 py-1.5 rounded-full text-white text-xs font-semibold hover:opacity-90 transition-all ml-2"
                    style={{ backgroundColor: currentColor.bg }}
                  >
                    <Plus size={14} />
                    추가
                  </button>
                </div>
                <div className="space-y-1">
                  {currentSundayWords.map((word, index) => (
                    <div key={index} className="flex flex-col gap-1">
                      <div className="flex items-center justify-end gap-2">
                        {currentSundayWords.length > 1 && (
                          <button
                            onClick={() => removeSundayWord(index)}
                            className="flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all"
                          >
                            <X size={14} />
                          </button>
                        )}
                      </div>
                      <textarea
                        value={word.text}
                        onChange={(e) => {
                          handleSundayWordChange(index, e.target.value);
                          autoResizeTextarea(e);
                        }}
                        onInput={autoResizeTextarea}
                        placeholder={index === 0 ? daySpecificSections[currentCard.day].placeholder : `${daySpecificSections[currentCard.day].title.replace(/을|를|이|가/, '')} ${index + 1}`}
                        className="w-full px-2 py-2 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all text-base resize-none"
                        style={{ borderColor: currentColor.bg, backgroundColor: 'white', minHeight: '60px', overflow: 'hidden' }}
                        onFocus={autoResizeTextarea}
                      />
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* 주일~토요일: 추가 질문 섹션 */}
            {(['주일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'].includes(currentCard.day) && daySpecificSections[currentCard.day].additionalSections) && (
              <>
                {daySpecificSections[currentCard.day].additionalSections.map((section, sectionIndex) => {
                  const sectionKey = `${currentCard.day}-section${sectionIndex}`;
                  let currentSectionData, setSectionData, saveSection;
                  
                  // dataKey가 있으면 해당 state 사용, 없으면 기존 방식
                  if (section.dataKey === 'personQuestions') {
                    currentSectionData = currentPersonQuestions;
                    setSectionData = setCurrentPersonQuestions;
                    saveSection = savePersonQuestion;
                  } else if (section.dataKey === 'godQuestions') {
                    currentSectionData = currentGodQuestions;
                    setSectionData = setCurrentGodQuestions;
                    saveSection = saveGodQuestion;
                  } else if (section.dataKey === 'freeQuestions') {
                    currentSectionData = currentFreeQuestions;
                    setSectionData = setCurrentFreeQuestions;
                    saveSection = saveFreeQuestion;
                  } else if (section.dataKey === 'upStories') {
                    currentSectionData = currentUpStories;
                    setSectionData = setCurrentUpStories;
                    saveSection = saveUpStory;
                  } else if (section.dataKey === 'memos2') {
                    currentSectionData = currentMemos2;
                    setSectionData = setCurrentMemos2;
                    saveSection = saveMemo2;
                  } else if (section.dataKey === 'praises') {
                    currentSectionData = currentPraises;
                    setSectionData = setCurrentPraises;
                    saveSection = savePraise;
                  } else {
                    // 기존 방식 (인덱스 기반)
                    if (sectionIndex === 0) {
                      currentSectionData = currentPersonQuestions;
                      setSectionData = setCurrentPersonQuestions;
                      saveSection = savePersonQuestion;
                    } else if (sectionIndex === 1) {
                      currentSectionData = currentGodQuestions;
                      setSectionData = setCurrentGodQuestions;
                      saveSection = saveGodQuestion;
                    } else if (sectionIndex === 2) {
                      currentSectionData = currentFreeQuestions;
                      setSectionData = setCurrentFreeQuestions;
                      saveSection = saveFreeQuestion;
                    } else {
                      currentSectionData = currentSundayWords;
                      setSectionData = setCurrentSundayWords;
                      saveSection = saveSundayWord;
                    }
                  }
                  
                  return (
                    <div 
                      key={sectionKey}
                      className="rounded-2xl p-2 mb-3"
                      style={{ backgroundColor: section.color }}
                    >
                      <div className="mb-2">
                        <div className="flex items-center justify-between mb-2">
                          <label className="font-semibold text-gray-700 text-sm flex-1">
                            {section.icon} {section.title}
                          </label>
                          <button
                            onClick={() => {
                              const newData = [...currentSectionData, { text: '' }];
                              setSectionData(newData);
                              saveSection(newData);
                            }}
                            className="flex items-center gap-1 px-3 py-1.5 rounded-full text-white text-xs font-semibold hover:opacity-90 transition-all ml-2"
                            style={{ backgroundColor: section.buttonColor }}
                          >
                            <Plus size={14} />
                            추가
                          </button>
                        </div>
                      </div>
                      <div className="space-y-1">
                        {currentSectionData.map((item, index) => (
                          <div key={index} className="flex flex-col gap-1">
                            <div className="flex items-center justify-end gap-2">
                              {currentSectionData.length > 1 && (
                                <button
                                  onClick={() => {
                                    const newData = currentSectionData.filter((_, i) => i !== index);
                                    setSectionData(newData);
                                    saveSection(newData);
                                  }}
                                  className="flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all"
                                >
                                  <X size={14} />
                                </button>
                              )}
                            </div>
                            <textarea
                              value={item.text}
                              onChange={(e) => {
                                const newData = [...currentSectionData];
                                newData[index] = { text: e.target.value };
                                setSectionData(newData);
                                saveSection(newData);
                                autoResizeTextarea(e);
                              }}
                              onInput={autoResizeTextarea}
                              placeholder={index === 0 ? section.placeholder : `${section.title} ${index + 1}`}
                              className="w-full px-2 py-2 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all text-base resize-none"
                              style={{ borderColor: section.buttonColor, backgroundColor: 'white', minHeight: '60px', overflow: 'hidden' }}
                              onFocus={autoResizeTextarea}
                            />
                          </div>
                        ))}
                      </div>
                    </div>
                  );
                })}
              </>
            )}
            
            {/* 성경구절 박스 + 카운터 */}
            <div className="mb-4">
              <div className="flex items-center gap-4 mb-4">
                {/* 성경구절 */}
                <div 
                  className="flex-1 rounded-xl p-3 text-center"
                  style={{ backgroundColor: currentColor.dark }}
                >
                  <p 
                    className="text-base font-bold"
                    style={{ color: '#FFFFFF' }}
                  >
                    {currentCard.reference}
                  </p>
                </div>
                
                {/* 카운터 */}
                <div className="flex items-center gap-2">
                  <button
                    onClick={decrementCheck}
                    disabled={currentCount === 0}
                    className="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                    style={{ backgroundColor: currentColor.bg }}
                  >
                    <Minus size={18} />
                  </button>
                  <div 
                    className="w-14 h-14 rounded-xl flex items-center justify-center text-2xl font-bold shadow-inner transition-all"
                    style={currentCountColor.isGradient ? {
                      background: currentCountColor.bg,
                      color: currentCountColor.text,
                      boxShadow: '0 4px 6px rgba(255, 215, 0, 0.3)'
                    } : {
                      backgroundColor: currentCountColor.bg,
                      color: currentCountColor.text
                    }}
                  >
                    {currentCount}
                  </div>
                  <button
                    onClick={incrementCheck}
                    className="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-lg hover:shadow-xl transition-all"
                    style={{ backgroundColor: currentColor.bg }}
                  >
                    <Plus size={18} />
                  </button>
                </div>
              </div>
              
              {/* 본문 */}
              <p 
                className="text-lg md:text-xl leading-relaxed text-gray-800 px-2"
                style={{ 
                  fontFamily: 'system-ui, -apple-system, sans-serif',
                  lineHeight: '1.8',
                  wordBreak: 'keep-all'
                }}
              >
                {currentCard.verse}
              </p>
            </div>

            {/* Memo Section - 별도 박스로 분리 */}
            <div 
              className="rounded-2xl p-2 mb-3"
              style={{ backgroundColor: currentColor.light }}
            >
              <h3 className="font-semibold text-gray-700 text-sm mb-2">
                {currentCard.day === '주일' ? '📝 주간 돌아보기' : '📝 지금, 읊조리기'}
              </h3>
              <textarea
                value={currentMemo}
                onChange={(e) => {
                  handleMemoChange(e);
                  autoResizeTextarea(e);
                }}
                onInput={autoResizeTextarea}
                placeholder={currentCard.day === '주일' 
                  ? "이번 주를 돌아보며 하나님께서 하신 일, 배운 점, 느낀 점을 기록해보세요..." 
                  : "이 말씀을 읽고 느낀 점이나 적용할 내용을 기록해보세요..."}
                className="w-full p-3 rounded-xl border-2 resize-none focus:outline-none focus:ring-2 transition-all text-base"
                style={{ borderColor: currentColor.bg, backgroundColor: 'white', minHeight: '80px', overflow: 'hidden' }}
                onFocus={autoResizeTextarea}
              />
            </div>

            {/* 찬송 - 연한 초록 */}
            <div 
              className="rounded-2xl p-2 mb-3"
              style={{ backgroundColor: '#d1fae5' }}
            >
              <div className="mb-3">
                <div className="flex items-center justify-between mb-2">
                  <label className="font-semibold text-gray-700 text-sm">🙌 지금, 하나님 찬송하기</label>
                  <button
                    onClick={addPraise}
                    className="flex items-center gap-1 px-2 py-1 rounded-full text-white text-xs font-semibold hover:opacity-90 transition-all"
                    style={{ backgroundColor: '#10b981' }}
                  >
                    <Plus size={14} />
                    추가
                  </button>
                </div>
                <div className="space-y-1">
                  {currentPraises.map((praise, index) => (
                    <div key={index} className="flex flex-col gap-1">
                      <div className="flex items-center justify-end gap-2">
                        {currentPraises.length > 1 && (
                          <button
                            onClick={() => removePraise(index)}
                            className="flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all"
                          >
                            <X size={14} />
                          </button>
                        )}
                      </div>
                      <textarea
                        value={praise.text}
                        onChange={(e) => {
                          handlePraiseChange(index, e.target.value);
                          autoResizeTextarea(e);
                        }}
                        onInput={autoResizeTextarea}
                        placeholder={index === 0 ? "하나님은 찬송 받기를 원하십니다. 하나님께서 하신 일, 하나님의 성품, 하나님께서 해 주실 일들을 적어 보세요. 그리고 말로 찬양해 보세요" : `찬송 ${index + 1}`}
                        className="w-full px-2 py-2 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all text-base resize-none"
                        style={{ borderColor: currentColor.bg, backgroundColor: 'white', minHeight: '60px', overflow: 'hidden' }}
                        onFocus={autoResizeTextarea}
                      />
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* 감사 - 연한 파란 */}
            <div 
              className="rounded-2xl p-2 mb-3"
              style={{ backgroundColor: '#dbeafe' }}
            >
              <div className="mb-3">
                <div className="flex items-center justify-between mb-2">
                  <label className="font-semibold text-gray-700 text-sm">💝 지금, 감사하기</label>
                  <button
                    onClick={addThank}
                    className="flex items-center gap-1 px-2 py-1 rounded-full text-white text-xs font-semibold hover:opacity-90 transition-all"
                    style={{ backgroundColor: '#3b82f6' }}
                  >
                    <Plus size={14} />
                    추가
                  </button>
                </div>
                <div className="space-y-1">
                  {currentThanks.map((thank, index) => (
                    <div key={index} className="flex flex-col gap-1">
                      <div className="flex items-center justify-end gap-2">
                        {currentThanks.length > 1 && (
                          <button
                            onClick={() => removeThank(index)}
                            className="flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all"
                          >
                            <X size={14} />
                          </button>
                        )}
                      </div>
                      <textarea
                        value={thank.text}
                        onChange={(e) => {
                          handleThankChange(index, e.target.value);
                          autoResizeTextarea(e);
                        }}
                        onInput={autoResizeTextarea}
                        placeholder={index === 0 ? "감사는 복리입니다. 감사가 또 다른 감사를 낳습니다. 그 기쁨을 느껴 보세요" : `감사 ${index + 1}`}
                        className="w-full px-2 py-2 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all text-base resize-none"
                        style={{ borderColor: currentColor.bg, backgroundColor: 'white', minHeight: '60px', overflow: 'hidden' }}
                        onFocus={autoResizeTextarea}
                      />
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* 기도 - 연한 보라 */}
            <div 
              className="rounded-2xl p-2 mb-3"
              style={{ backgroundColor: '#f3e8ff' }}
            >
              <div>
                <div className="flex items-center justify-between mb-2">
                  <label className="font-semibold text-gray-700 text-sm">🙏 지금, 기도하기</label>
                  <button
                    onClick={addPrayer}
                    className="flex items-center gap-1 px-2 py-1 rounded-full text-white text-xs font-semibold hover:opacity-90 transition-all"
                    style={{ backgroundColor: '#a855f7' }}
                  >
                    <Plus size={14} />
                    추가
                  </button>
                </div>
                <div className="space-y-1">
                  {currentPrayers.map((prayer, index) => (
                    <div key={index} className="flex flex-col gap-1">
                      <div className="flex items-center justify-end gap-2">
                        {currentPrayers.length > 1 && (
                          <button
                            onClick={() => removePrayer(index)}
                            className="flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all"
                          >
                            <X size={14} />
                          </button>
                        )}
                      </div>
                      <textarea
                        value={prayer.text}
                        onChange={(e) => {
                          handlePrayerChange(index, e.target.value);
                          autoResizeTextarea(e);
                        }}
                        onInput={autoResizeTextarea}
                        placeholder={index === 0 ? "오늘은 어떤 기도를 할 건가요?" : `기도 ${index + 1}`}
                        className="w-full px-2 py-2 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all text-base resize-none"
                        style={{ borderColor: currentColor.bg, backgroundColor: 'white', minHeight: '60px', overflow: 'hidden' }}
                        onFocus={autoResizeTextarea}
                      />
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* 오늘의 할 일 / 일정 */}
            <div 
              className="rounded-2xl p-2 mb-3"
              style={{ backgroundColor: currentColor.light }}
            >
              <div className="flex items-center justify-between mb-3">
                <h3 className="font-semibold text-gray-700 text-sm">
                  ✅ 오늘의 할 일 / 일정
                </h3>
                <button
                  onClick={addTodo}
                  className="flex items-center gap-1 px-2 py-1 rounded-full text-white text-xs font-semibold hover:opacity-90 transition-all"
                  style={{ backgroundColor: currentColor.bg }}
                >
                  <Plus size={14} />
                  추가
                </button>
              </div>
              <div className="space-y-2">
                {currentTodos.map((todo, index) => (
                  <div key={index} className="flex flex-col gap-1">
                    <div className="flex items-center gap-2">
                      <textarea
                        value={todo.text}
                        onChange={(e) => {
                          handleTodoChange(index, e.target.value);
                          autoResizeTextarea(e);
                        }}
                        onInput={autoResizeTextarea}
                        placeholder={`오늘 꼭 해야하는 일 ${index + 1}`}
                        className="flex-1 px-2 py-2 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all text-base resize-none"
                        style={{ borderColor: currentColor.bg, backgroundColor: 'white', minHeight: '40px', overflow: 'hidden' }}
                        onFocus={autoResizeTextarea}
                      />
                      <button
                        onClick={() => handleTodoToggle(index)}
                        className={`flex-shrink-0 w-7 h-7 rounded-lg flex items-center justify-center transition-all ${
                          todo.completed ? 'bg-green-500 text-white' : 'bg-white border-2'
                        }`}
                        style={{ borderColor: todo.completed ? 'transparent' : currentColor.bg }}
                      >
                        {todo.completed && <Check size={16} />}
                      </button>
                      {currentTodos.length > 1 && (
                        <button
                          onClick={() => removeTodo(index)}
                          className="flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all"
                        >
                          <X size={14} />
                        </button>
                      )}
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* 오늘의 메모 - 연한 핑크 */}
            <div 
              className="rounded-2xl p-2"
              style={{ backgroundColor: '#fce7f3' }}
            >
              <div>
                <div className="flex items-center justify-between mb-2">
                  <label className="font-semibold text-gray-700 text-sm">📝 오늘의 메모</label>
                  <button
                    onClick={addMemo2}
                    className="flex items-center gap-1 px-2 py-1 rounded-full text-white text-xs font-semibold hover:opacity-90 transition-all"
                    style={{ backgroundColor: '#ec4899' }}
                  >
                    <Plus size={14} />
                    추가
                  </button>
                </div>
                <div className="space-y-1">
                  {currentMemos2.map((memo, index) => (
                    <div key={index} className="flex flex-col gap-1">
                      <div className="flex items-center justify-end gap-2">
                        {currentMemos2.length > 1 && (
                          <button
                            onClick={() => removeMemo2(index)}
                            className="flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all"
                          >
                            <X size={14} />
                          </button>
                        )}
                      </div>
                      <textarea
                        value={memo.text}
                        onChange={(e) => {
                          handleMemo2Change(index, e.target.value);
                          autoResizeTextarea(e);
                        }}
                        onInput={autoResizeTextarea}
                        placeholder={index === 0 ? "오늘 기억하고 싶은 내용을 자유롭게 메모하세요..." : `메모 ${index + 1}`}
                        className="w-full px-2 py-2 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all text-base resize-none"
                        style={{ borderColor: '#ec4899', backgroundColor: 'white', minHeight: '60px', overflow: 'hidden' }}
                        onFocus={autoResizeTextarea}
                      />
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>

                  {/* Bottom Controls */}
        <div className="grid grid-cols-2 md:grid-cols-5 gap-2">
          <button
            onClick={() => setShowMonthly(true)}
            className="bg-gradient-to-r from-sky-400 to-blue-500 text-white rounded-2xl shadow-lg p-3 hover:shadow-xl hover:from-sky-500 hover:to-blue-600 transition-all flex items-center justify-center font-semibold text-sm"
          >
            월간
          </button>
          <button
            onClick={() => setShowList(true)}
            className="bg-gradient-to-r from-emerald-400 to-green-500 text-white rounded-2xl shadow-lg p-3 hover:shadow-xl hover:from-emerald-500 hover:to-green-600 transition-all flex items-center justify-center font-semibold text-sm"
          >
            목록
          </button>
          <button
            onClick={() => setShowScriptureSearch(true)}
            className="bg-gradient-to-r from-violet-400 to-purple-500 text-white rounded-2xl shadow-lg p-3 hover:shadow-xl hover:from-violet-500 hover:to-purple-600 transition-all flex items-center justify-center font-semibold text-sm gap-1"
          >
            📖 성경
          </button>
          <button
            onClick={() => setShowSearch(true)}
            className="bg-gradient-to-r from-amber-400 to-orange-500 text-white rounded-2xl shadow-lg p-3 hover:shadow-xl hover:from-amber-500 hover:to-orange-600 transition-all flex items-center justify-center font-semibold text-sm gap-1"
          >
            <Search size={16} />
            기록
          </button>
          <button
            onClick={copyToClipboard}
            className={`rounded-2xl shadow-lg p-3 hover:shadow-xl transition-all flex items-center justify-center font-semibold text-sm ${
              copied 
                ? 'bg-green-500 text-white' 
                : 'bg-gradient-to-r from-rose-400 to-pink-500 text-white hover:from-rose-500 hover:to-pink-600'
            }`}
          >
            {copied ? '✅' : '오늘 복사'}
          </button>
          <button
            onClick={copyWeekToClipboard}
            className={`rounded-2xl shadow-lg p-3 hover:shadow-xl transition-all flex items-center justify-center font-semibold ${
              weekCopied 
                ? 'bg-green-500 text-white text-sm' 
                : 'bg-gradient-to-r from-fuchsia-400 to-indigo-500 text-white text-xs hover:from-fuchsia-500 hover:to-indigo-600'
            }`}
          >
            {weekCopied ? '✅' : '일주일묵상'}
          </button>
        </div>
        
        {/* PDF 다운로드 메뉴 */}
        {showPdfMenu && (
          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" onClick={() => setShowPdfMenu(false)}>
            <div className="bg-white rounded-3xl shadow-2xl p-6 max-w-md w-full" onClick={(e) => e.stopPropagation()}>
              <h3 className="text-xl font-bold text-gray-800 mb-4 text-center">📄 다운로드</h3>
              <div className="space-y-3">
                <button
                  onClick={() => downloadAsPdf('today')}
                  className="w-full px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl hover:from-blue-600 hover:to-blue-700 transition-all font-semibold shadow-lg"
                >
                  📝 오늘의 삶 다운로드
                </button>
                <button
                  onClick={() => downloadAsPdf('week')}
                  className="w-full px-6 py-4 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-2xl hover:from-purple-600 hover:to-indigo-600 transition-all font-semibold shadow-lg"
                >
                  📖 일주일 묵상 다운로드
                </button>
                {showStats && (
                  <button
                    onClick={() => downloadAsPdf('stats')}
                    className="w-full px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-2xl hover:from-green-600 hover:to-emerald-600 transition-all font-semibold shadow-lg"
                  >
                    📊 통계 다운로드
                  </button>
                )}
                <button
                  onClick={() => setShowPdfMenu(false)}
                  className="w-full px-6 py-4 bg-gray-500 text-white rounded-2xl hover:bg-gray-600 transition-all font-semibold"
                >
                  닫기
                </button>
              </div>
            </div>
          </div>
        )}
        
        {/* PDF 다운로드 버튼 (플로팅) */}
        <button
          onClick={() => setShowPdfMenu(true)}
          className="fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-br from-rose-500 to-pink-500 text-white rounded-full shadow-2xl hover:shadow-3xl transition-all flex items-center justify-center z-40 hover:scale-110"
          style={{ boxShadow: '0 8px 20px rgba(244, 63, 94, 0.4)' }}
        >
          <div className="text-2xl">📥</div>
        </button>
      </div>
    </div>
  );
};



    // 앱 렌더링
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<WeeklyScriptureApp />);
  </script>
</body>
</html>
